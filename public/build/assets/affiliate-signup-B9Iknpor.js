import{a as W,_ as X}from"./AppTextarea.vue_vue_type_script_setup_true_lang-CtXT9_ia.js";import{_ as Y}from"./AppTextField.vue_vue_type_script_setup_true_lang-CBahpkzN.js";import{b4 as Z,r as p,b5 as S,d as ee,aL as ae,u as se,D as le,a as te,g as R,o as b,f as l,b as a,e as t,m as u,l as U,c as A,E as re,ac as I,s as g,t as _,aU as oe,az as ne}from"./main-uLG9IIeX.js";import{u as T,a as ie,b as ue}from"./misc-mask-light-CBYuy-d-.js";import{a as de,b as me,c as pe,d as ce}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{V as fe}from"./VNodeRenderer-DWM5_xJG.js";import{u as ge}from"./useFormErrors-XAfRt52c.js";import{u as ve}from"./useNotifications-DDBS_wPD.js";import{a as i,V as N}from"./VRow-aGfXYx3U.js";import{V as _e}from"./VImg-BS6_svHJ.js";import{V as Ve}from"./VCard-CB1gT6RB.js";import{V as j}from"./VCardText-BZtszuIK.js";import{V as D}from"./VAlert-TgguXW_5.js";import{V as be}from"./VForm-C9FiqBHN.js";import{V as ye}from"./VCheckbox-BPY3LPcF.js";import{V as xe}from"./VField-CfH1YcVv.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VSelect-sWnAtot-.js";import"./VTextField-Dxeq5kx5.js";import"./forwardRefs-Dv_T9a_w.js";import"./lazy-CjF3Yiep.js";import"./VList-uZDByhc2.js";import"./ssrBoot-BPhRU-mF.js";import"./createSimpleFunctional-DugzUcbB.js";import"./VAvatar-bHPDEsYY.js";import"./VDivider-UqGR4x4D.js";import"./dialog-transition-2hF0ajsQ.js";import"./VMenu-DP1p-55V.js";import"./VCheckboxBtn-CogF2AUK.js";import"./VChip-B84WcmDa.js";import"./VTextarea-BuIc6d95.js";/* empty css              */const he=Z("affiliateSignup",()=>{const k=p(!1),d=p(!1),V=p(null),m=p(null);return{isLoading:k,isResending:d,lastSignupEmail:V,lastExpiresAt:m,signup:async x=>{var v,n,c;k.value=!0;try{const s=await S.post("/public/affiliates/signup",x);return s.data.success&&(V.value=((v=s.data.data)==null?void 0:v.email)||null,m.value=((n=s.data.data)==null?void 0:n.expires_at)||null),s.data}catch(s){return(c=s.response)!=null&&c.data?s.response.data:{success:!1,message:"Une erreur rÃ©seau est survenue. Veuillez rÃ©essayer."}}finally{k.value=!1}},resendVerification:async x=>{var v,n,c;d.value=!0;try{const s=await S.post("/public/affiliates/resend-verification",{email:x});return s.data.success&&(V.value=((v=s.data.data)==null?void 0:v.email)||null,m.value=((n=s.data.data)==null?void 0:n.expires_at)||null),s.data}catch(s){return(c=s.response)!=null&&c.data?s.response.data:{success:!1,message:"Une erreur rÃ©seau est survenue. Veuillez rÃ©essayer."}}finally{d.value=!1}},clearData:()=>{V.value=null,m.value=null}}}),we={class:"position-relative bg-background w-100 me-0"},Ce={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"100px"}},Ie=["src"],Se={key:0},Be={class:"mb-4"},Ee={key:1},Le={class:"mb-4"},Re={class:"d-flex gap-4"},Ue={class:"mb-1"},Ae={class:"mb-0 text-sm"},ze={class:"d-flex align-center"},Me={key:0,class:"text-error text-caption mt-1"},Te=ee({__name:"affiliate-signup",setup(k){const{t:d}=ae(),V=se(),m=he(),{showSuccess:B,showError:y}=ve(),{errors:h,set:x,clear:v}=ge(),n=o=>h[o]||[],c=o=>!!(h[o]&&h[o].length>0),s=p({nom_complet:"",email:"",telephone:"",password:"",password_confirmation:"",adresse:"",ville:"",pays:"Maroc",rib:"",bank_type:"",notes:"",accept_terms:!1}),w=p(!1),C=p(!1),E=p(!1),z=p(""),L=p(null),q=["Maroc","France","AlgÃ©rie","Tunisie","Espagne","Belgique","Suisse","Canada","Autre"],F=["Attijariwafa Bank","Banque Populaire","BMCE Bank","BMCI","CIH Bank","CrÃ©dit Agricole","CrÃ©dit du Maroc","SociÃ©tÃ© GÃ©nÃ©rale","Autre"],P=async()=>{v();try{const o={...s.value,referral_code:z.value},e=await m.signup(o);e.success?(B(e.message),E.value=!0):e.errors?x(e.errors):y(e.message)}catch{y(d("affiliate_signup_unexpected_error"))}},$=async()=>{if(m.lastSignupEmail)try{const o=await m.resendVerification(m.lastSignupEmail);o.success?B(o.message):y(o.message)}catch{y(d("affiliate_signup_resend_error"))}},G=async o=>{try{const e=await S.get(`/api/public/referrals/info?ref=${o}`);e.data.success&&(L.value=e.data.data)}catch(e){console.error("Failed to fetch referral info:",e)}},H=async o=>{try{await S.post("/api/public/referrals/track-click",{ref:o,source:"web"})}catch(e){console.error("Failed to track referral click:",e)}},J=T(ce,pe,me,de,!0),K=T(ue,ie);return le(()=>{const o=V.query.ref;o&&(z.value=o,H(o),G(o))}),(o,e)=>{const f=Y,M=W,O=X,Q=te("RouterLink");return b(),R(N,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:l(()=>[a(i,{lg:"7",md:"6",class:"d-none d-md-flex"},{default:l(()=>[t("div",we,[t("div",Ce,[a(_e,{"max-width":"500",src:u(J),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),t("img",{class:"auth-footer-mask",src:u(K),alt:"auth-footer-mask",height:"280",width:"100"},null,8,Ie)])]),_:1}),a(i,{cols:"12",md:"6",lg:"5",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[a(Ve,{flat:"","max-width":600,class:"mt-12 mt-sm-0 pa-6 w-100",style:{"max-width":"100% !important"}},{default:l(()=>[a(j,null,{default:l(()=>[a(u(fe),{nodes:u(re).app.logo,class:"mb-6"},null,8,["nodes"]),E.value?(b(),A("div",Ee,[e[20]||(e[20]=t("h4",{class:"text-h4 mb-1 text-success"}," âœ… Inscription rÃ©ussie ! ",-1)),t("p",Le,[e[16]||(e[16]=g(" VÃ©rifiez votre email ")),t("strong",null,_(u(m).lastSignupEmail),1),e[17]||(e[17]=g(" pour continuer. "))]),a(D,{type:"info",variant:"tonal",class:"mb-4"},{default:l(()=>e[18]||(e[18]=[t("p",{class:"mb-2"},[t("strong",null,"Prochaines Ã©tapes :")],-1),t("ol",{class:"ps-4"},[t("li",null,"Cliquez sur le lien dans votre email"),t("li",null,"Attendez l'approbation de votre demande"),t("li",null,"Recevez vos identifiants de connexion")],-1)])),_:1,__:[18]}),t("div",Re,[a(I,{variant:"outlined",onClick:$,loading:u(m).isResending},{default:l(()=>e[19]||(e[19]=[g(" Renvoyer l'email ")])),_:1,__:[19]},8,["loading"]),a(I,{color:"primary",to:{name:"login"}},{default:l(()=>[g(_(u(d)("actions.backToLogin")),1)]),_:1})])])):(b(),A("div",Se,[t("div",Be,[a(I,{to:{name:"login"},variant:"text",size:"small","prepend-icon":"tabler-arrow-left",class:"text-primary"},{default:l(()=>[g(_(u(d)("actions.backToLogin")),1)]),_:1})]),e[14]||(e[14]=t("h4",{class:"text-h4 mb-1"}," ðŸš€ Rejoignez notre rÃ©seau d'affiliÃ©s ",-1)),e[15]||(e[15]=t("p",{class:"mb-0"}," Commencez Ã  gagner des commissions dÃ¨s aujourd'hui ! ",-1))]))]),_:1}),E.value?U("",!0):(b(),R(j,{key:0},{default:l(()=>[a(be,{onSubmit:oe(P,["prevent"])},{default:l(()=>[L.value?(b(),R(D,{key:0,type:"info",variant:"tonal",class:"mb-6"},{prepend:l(()=>[a(ne,{icon:"tabler-user-plus"})]),default:l(()=>[t("div",null,[t("p",Ue,[g(_(u(d)("referred_by"))+": ",1),t("strong",null,_(L.value.referrer_name),1)]),t("p",Ae,_(u(d)("referral_bonus_info")),1)])]),_:1})):U("",!0),a(N,null,{default:l(()=>[a(i,{cols:"12"},{default:l(()=>[a(f,{modelValue:s.value.nom_complet,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.nom_complet=r),autofocus:"",label:"Nom complet *",placeholder:"Votre nom complet","error-messages":n("nom_complet")},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",md:"6"},{default:l(()=>[a(f,{modelValue:s.value.email,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.email=r),label:"Email *",type:"email",placeholder:"votre@email.com","error-messages":n("email")},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",md:"6"},{default:l(()=>[a(f,{modelValue:s.value.telephone,"onUpdate:modelValue":e[2]||(e[2]=r=>s.value.telephone=r),label:u(d)("form_phone_required"),placeholder:"+212 6 12 34 56 78","error-messages":n("telephone")},null,8,["modelValue","label","error-messages"])]),_:1}),a(i,{cols:"12",md:"6"},{default:l(()=>[a(f,{modelValue:s.value.password,"onUpdate:modelValue":e[3]||(e[3]=r=>s.value.password=r),label:"Mot de passe *",placeholder:"Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·",type:w.value?"text":"password","append-inner-icon":w.value?"tabler-eye-off":"tabler-eye","error-messages":n("password"),"onClick:appendInner":e[4]||(e[4]=r=>w.value=!w.value)},null,8,["modelValue","type","append-inner-icon","error-messages"])]),_:1}),a(i,{cols:"12",md:"6"},{default:l(()=>[a(f,{modelValue:s.value.password_confirmation,"onUpdate:modelValue":e[5]||(e[5]=r=>s.value.password_confirmation=r),label:"Confirmer le mot de passe *",placeholder:"Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·",type:C.value?"text":"password","append-inner-icon":C.value?"tabler-eye-off":"tabler-eye","error-messages":n("password_confirmation"),"onClick:appendInner":e[6]||(e[6]=r=>C.value=!C.value)},null,8,["modelValue","type","append-inner-icon","error-messages"])]),_:1}),a(i,{cols:"12"},{default:l(()=>[a(f,{modelValue:s.value.adresse,"onUpdate:modelValue":e[7]||(e[7]=r=>s.value.adresse=r),label:"Adresse *",placeholder:u(d)("affiliate_signup_address_placeholder"),"error-messages":n("adresse")},null,8,["modelValue","placeholder","error-messages"])]),_:1}),a(i,{cols:"12",sm:"6"},{default:l(()=>[a(f,{modelValue:s.value.ville,"onUpdate:modelValue":e[8]||(e[8]=r=>s.value.ville=r),label:"Ville *",placeholder:"Votre ville","error-messages":n("ville")},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",sm:"6"},{default:l(()=>[a(M,{modelValue:s.value.pays,"onUpdate:modelValue":e[9]||(e[9]=r=>s.value.pays=r),label:"Pays *",items:q,"error-messages":n("pays")},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12",sm:"6"},{default:l(()=>[a(M,{modelValue:s.value.bank_type,"onUpdate:modelValue":e[10]||(e[10]=r=>s.value.bank_type=r),label:"Type de banque *",placeholder:u(d)("affiliate_signup_bank_placeholder"),items:F,"error-messages":n("bank_type")},null,8,["modelValue","placeholder","error-messages"])]),_:1}),a(i,{cols:"12",sm:"6"},{default:l(()=>[a(f,{modelValue:s.value.rib,"onUpdate:modelValue":e[11]||(e[11]=r=>s.value.rib=r),label:"RIB *",placeholder:"Votre RIB/IBAN",style:{"font-family":"monospace"},"error-messages":n("rib")},null,8,["modelValue","error-messages"])]),_:1}),a(i,{cols:"12"},{default:l(()=>[a(O,{modelValue:s.value.notes,"onUpdate:modelValue":e[12]||(e[12]=r=>s.value.notes=r),label:"Notes (optionnel)",placeholder:u(d)("affiliate_signup_experience_placeholder"),rows:"3","error-messages":n("notes")},null,8,["modelValue","placeholder","error-messages"])]),_:1}),a(i,{cols:"12"},{default:l(()=>[t("div",ze,[a(ye,{id:"accept-terms",modelValue:s.value.accept_terms,"onUpdate:modelValue":e[13]||(e[13]=r=>s.value.accept_terms=r),error:c("accept_terms")},null,8,["modelValue","error"]),a(xe,{for:"accept-terms",class:"text-sm",style:{opacity:"1"}},{default:l(()=>e[21]||(e[21]=[t("span",{class:"me-1"},"J'accepte les",-1),t("a",{href:"javascript:void(0)",class:"text-primary"},"conditions d'utilisation",-1),t("span",{class:"mx-1"},"et la",-1),t("a",{href:"javascript:void(0)",class:"text-primary"},"politique de confidentialitÃ©",-1)])),_:1,__:[21]})]),c("accept_terms")?(b(),A("div",Me,_(n("accept_terms")),1)):U("",!0)]),_:1}),a(i,{cols:"12"},{default:l(()=>[a(I,{block:"",type:"submit",loading:u(m).isLoading},{default:l(()=>e[22]||(e[22]=[g(" S'inscrire comme affiliÃ© ")])),_:1,__:[22]},8,["loading"])]),_:1}),a(i,{cols:"12",class:"text-center"},{default:l(()=>[e[24]||(e[24]=t("span",{class:"text-sm"},"Vous avez dÃ©jÃ  un compte ?",-1)),a(Q,{class:"text-primary ms-1 text-sm",to:{name:"login"}},{default:l(()=>e[23]||(e[23]=[g(" Se connecter ")])),_:1,__:[23]})]),_:1,__:[24]})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),ga=ke(Te,[["__scopeId","data-v-65c6ddcf"]]);export{ga as default};
