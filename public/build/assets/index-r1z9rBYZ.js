import{d as ee,aL as ae,k as te,r as f,V as le,o as oe,c as k,b,e,f as d,n as o,v as i,g as l,t as c,ac as _,aP as re,h as F,aU as se,az as ne,F as ie,j as ue,x as de,aW as L}from"./main-DEzoUo6n.js";import{u as E}from"./useApi-czTV0ZEy.js";import{useQuickConfirm as me}from"./useConfirmAction-lawnJ6WL.js";import{c as ce,S as fe}from"./SoftDeleteActions-BuccLWgy.js";import{S as pe}from"./SoftDeleteFilter-DxhBbGin.js";import{V as ve}from"./VBreadcrumbs-GZoY2rRV.js";import{V as C}from"./VCardText-DtKfeQ8i.js";import{V as N,a as T}from"./VRow-CCKjjrNU.js";import{V as S}from"./VTextField-BiqUvfe6.js";import{V as w,c as P,b as $}from"./VCard-BQBmQiQJ.js";import{V as q}from"./VChip-BLx6lUDe.js";import{V as A}from"./VSpacer-om3XMluz.js";import{V as R}from"./VForm-rtEvNB7m.js";import{V as I}from"./VCheckbox-BgUxiM5L.js";import{V as Q}from"./VDialog-SdVxorIC.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useNotifications-Bc6GUAmT.js";import"./ActionIcon-Bo-k4-Vl.js";import"./VTooltip-CxfTaIey.js";import"./VOverlay-D7sMErQR.js";import"./forwardRefs-BYcTBJDs.js";import"./lazy-BPEwf1-U.js";import"./VImg-Dcm3Nb79.js";import"./VSelect-DRK_p5uX.js";import"./VField-BrxQSdNw.js";import"./VList-PlS4cpk2.js";import"./ssrBoot-BNMsj90G.js";import"./createSimpleFunctional-DUhC6iZd.js";import"./VAvatar-DcdpS4jo.js";import"./VDivider-96JDmIpb.js";import"./dialog-transition-PfMbSZsR.js";import"./VMenu-CAJpv2vQ.js";import"./VCheckboxBtn-ispl65Ef.js";/* empty css              */const _e={class:"d-flex justify-space-between align-center mb-6"},Ve={class:"text-h4 font-weight-bold mb-1"},ye={class:"text-body-1 text-medium-emphasis"},ge={key:0,class:"text-center py-8"},he={key:1,class:"text-center py-8"},xe={class:"text-h6 mb-2"},Ce={class:"text-body-2 text-medium-emphasis"},Se={class:"d-flex justify-space-between align-start mb-3"},we={class:"text-h6 font-weight-bold"},ke={class:"text-caption text-medium-emphasis"},De={class:"d-flex flex-column gap-1"},Ue=ee({__name:"index",setup(Ee){const{t:r}=ae(),M=te(),{confirmCreate:O,confirmUpdate:J,confirmDelete:Te}=me(),{filter:D,getQueryParams:W,getStatusColor:G,getStatusText:H}=ce({entityName:"variant attribute",apiEndpoint:"/admin/variant-attributs",onSuccess:()=>v(),onError:s=>console.error("Soft delete error:",s)}),p=f([]),U=f(!1),V=f(""),y=f(!1),g=f(!1),h=f(null);f(!1);const n=f({code:"",nom:"",actif:!0}),m=f({}),j=le(()=>{if(!V.value)return p.value;const s=V.value.toLowerCase();return p.value.filter(a=>a.code.toLowerCase().includes(s)||a.nom.toLowerCase().includes(s))}),v=async()=>{try{U.value=!0;const a=`/admin/variant-attributs?${new URLSearchParams(W()).toString()}`,{data:t,error:u}=await E(a);if(!u.value&&t.value){const x=t.value;x.success&&(p.value=x.data)}}catch(s){console.error("Error fetching variant attributes:",s)}finally{U.value=!1}},K=()=>{n.value={code:"",nom:"",actif:!0},m.value={},y.value=!0},X=s=>{h.value=s,n.value={code:s.code,nom:s.nom,actif:s.actif},m.value={},g.value=!0},Y=s=>{M.push(`/admin/variants/attributs/${s.id}/valeurs`)},z=async()=>{if(await O("attribut"))try{m.value={};const{data:a,error:t}=await E("/admin/variant-attributs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value)});if(!t.value&&a.value){const u=a.value;u.success?(p.value.push(u.data),y.value=!1):u.errors&&(m.value=u.errors)}}catch(a){console.error("Error creating variant attribute:",a)}},B=async()=>{if(!(!h.value||!await J("attribut",h.value.nom)))try{m.value={};const{data:a,error:t}=await E(`/admin/variant-attributs/${h.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value)});if(!t.value&&a.value){const u=a.value;if(u.success){const x=p.value.findIndex(Z=>Z.id===h.value.id);x>-1&&(p.value[x]=u.data),g.value=!1}else u.errors&&(m.value=u.errors)}}catch(a){console.error("Error updating variant attribute:",a)}};return oe(()=>{v()}),(s,a)=>(b(),k("div",null,[e(ve,{items:[{title:"Admin",disabled:!0},{title:o(r)("variants"),disabled:!0},{title:o(r)("attributes"),disabled:!0}],class:"px-0"},null,8,["items"]),d("div",_e,[d("div",null,[d("h1",Ve,i(o(r)("variant_attributes")),1),d("p",ye,i(o(r)("manage_variant_attributes_desc")),1)]),e(_,{color:"primary","prepend-icon":"tabler-plus",onClick:K},{default:l(()=>[c(i(o(r)("add_attribute")),1)]),_:1})]),e(w,{class:"mb-6"},{default:l(()=>[e(C,null,{default:l(()=>[e(N,null,{default:l(()=>[e(T,{cols:"12",md:"8"},{default:l(()=>[e(S,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=t=>V.value=t),placeholder:o(r)("search_attributes"),"prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined",density:"compact"},null,8,["modelValue","placeholder"])]),_:1}),e(T,{cols:"12",md:"4"},{default:l(()=>[e(pe,{modelValue:o(D),"onUpdate:modelValue":[a[1]||(a[1]=t=>re(D)?D.value=t:null),v]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,null,{default:l(()=>[e(C,null,{default:l(()=>[U.value?(b(),k("div",ge,[e(se,{indeterminate:"",color:"primary"})])):j.value.length===0?(b(),k("div",he,[e(ne,{icon:"tabler-palette",size:"64",color:"grey",class:"mb-4"}),d("h3",xe,i(o(r)("no_attributes_found")),1),d("p",Ce,i(V.value?o(r)("try_adjusting_search"):o(r)("create_first_variant_attribute")),1)])):(b(),F(N,{key:2},{default:l(()=>[(b(!0),k(ie,null,ue(j.value,t=>(b(),F(T,{key:t.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[e(w,{class:de(["attribute-card h-100",{"opacity-60":!t.actif}]),elevation:"2"},{default:l(()=>[e(C,{class:"pb-2"},{default:l(()=>[d("div",Se,[d("div",null,[d("h4",we,i(t.nom),1),d("p",ke,i(t.code),1)]),d("div",De,[e(q,{color:t.actif?"success":"error",size:"small",variant:"flat"},{default:l(()=>[c(i(t.actif?o(r)("active"):o(r)("inactive")),1)]),_:2},1032,["color"]),e(q,{color:o(G)(t),size:"small",variant:"elevated"},{default:l(()=>[c(i(o(H)(t)),1)]),_:2},1032,["color"])])])]),_:2},1024),e(P,{class:"pt-0"},{default:l(()=>[e(_,{size:"small",variant:"text",color:"primary",onClick:u=>Y(t)},{default:l(()=>[c(i(o(r)("manage_values")),1)]),_:2},1032,["onClick"]),e(A),e(fe,{item:t,"entity-name":"variant attribute","api-endpoint":"/admin/variant-attributs","item-name-field":"nom",onDeleted:v,onRestored:v,onPermanentlyDeleted:v,onEdit:X},null,8,["item"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1}),e(Q,{modelValue:y.value,"onUpdate:modelValue":a[6]||(a[6]=t=>y.value=t),"max-width":"500"},{default:l(()=>[e(w,null,{default:l(()=>[e($,null,{default:l(()=>[c(i(o(r)("create_variant_attribute")),1)]),_:1}),e(C,null,{default:l(()=>[e(R,{onSubmit:L(z,["prevent"])},{default:l(()=>[e(S,{modelValue:n.value.code,"onUpdate:modelValue":a[2]||(a[2]=t=>n.value.code=t),label:o(r)("code"),placeholder:o(r)("code_placeholder"),"error-messages":m.value.code,variant:"outlined",class:"mb-4",required:""},null,8,["modelValue","label","placeholder","error-messages"]),e(S,{modelValue:n.value.nom,"onUpdate:modelValue":a[3]||(a[3]=t=>n.value.nom=t),label:o(r)("name"),placeholder:o(r)("name_placeholder"),"error-messages":m.value.nom,variant:"outlined",class:"mb-4",required:""},null,8,["modelValue","label","placeholder","error-messages"]),e(I,{modelValue:n.value.actif,"onUpdate:modelValue":a[4]||(a[4]=t=>n.value.actif=t),label:o(r)("active")},null,8,["modelValue","label"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(A),e(_,{type:"button",onClick:a[5]||(a[5]=t=>y.value=!1)},{default:l(()=>[c(i(o(r)("cancel")),1)]),_:1}),e(_,{color:"primary",type:"button",onClick:z},{default:l(()=>[c(i(o(r)("create")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:g.value,"onUpdate:modelValue":a[11]||(a[11]=t=>g.value=t),"max-width":"500"},{default:l(()=>[e(w,null,{default:l(()=>[e($,null,{default:l(()=>[c(i(o(r)("edit_variant_attribute")),1)]),_:1}),e(C,null,{default:l(()=>[e(R,{onSubmit:L(B,["prevent"])},{default:l(()=>[e(S,{modelValue:n.value.code,"onUpdate:modelValue":a[7]||(a[7]=t=>n.value.code=t),label:o(r)("code"),"error-messages":m.value.code,variant:"outlined",class:"mb-4",required:""},null,8,["modelValue","label","error-messages"]),e(S,{modelValue:n.value.nom,"onUpdate:modelValue":a[8]||(a[8]=t=>n.value.nom=t),label:o(r)("name"),"error-messages":m.value.nom,variant:"outlined",class:"mb-4",required:""},null,8,["modelValue","label","error-messages"]),e(I,{modelValue:n.value.actif,"onUpdate:modelValue":a[9]||(a[9]=t=>n.value.actif=t),label:o(r)("active")},null,8,["modelValue","label"])]),_:1})]),_:1}),e(P,null,{default:l(()=>[e(A),e(_,{type:"button",onClick:a[10]||(a[10]=t=>g.value=!1)},{default:l(()=>[c(i(o(r)("cancel")),1)]),_:1}),e(_,{color:"primary",type:"button",onClick:B},{default:l(()=>[c(i(o(r)("update")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),ma=be(Ue,[["__scopeId","data-v-13352a9c"]]);export{ma as default};
