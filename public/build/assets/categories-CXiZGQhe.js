import{b5 as n,ba as i}from"./main-DnYrbSQO.js";const c=n("categories",{state:()=>({categories:[],currentCategory:null,loading:!1,error:null,pagination:{current_page:1,per_page:15,total:0,last_page:1}}),getters:{activeCategories:e=>e.categories.filter(r=>r.actif),inactiveCategories:e=>e.categories.filter(r=>!r.actif),totalCategories:e=>e.categories.length,getCategoryById:e=>r=>e.categories.find(t=>t.id===r)},actions:{async fetchCategories(e={}){this.loading=!0,this.error=null;try{const r=new URLSearchParams;Object.entries(e).forEach(([s,o])=>{o!==""&&o!==null&&o!==void 0&&r.append(s,String(o))});const t=`/admin/categories${r.toString()?`?${r.toString()}`:""}`,a=await i(t);a.success?(this.categories=a.data,this.pagination=a.pagination):this.error=a.message}catch(r){this.error=r.message||"Error fetching categories",console.error("Error fetching categories:",r)}finally{this.loading=!1}},async fetchCategory(e){this.loading=!0,this.error=null;try{const r=await i(`/admin/categories/${e}`);if(r.success)return this.currentCategory=r.data,r.data;throw this.error=r.message,new Error(r.message)}catch(r){throw this.error=r.message||"Error fetching category",console.error("Error fetching category:",r),r}finally{this.loading=!1}},async createCategory(e){this.loading=!0,this.error=null;try{const r=await i("/admin/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.success)return this.categories.unshift(r.data),this.pagination.total++,r.data;throw this.error=r.message,new Error(r.message)}catch(r){throw this.error=r.message||"Error creating category",console.error("Error creating category:",r),r}finally{this.loading=!1}},async updateCategory(e,r){var t;this.loading=!0,this.error=null;try{const a=await i(`/admin/categories/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(a.success){const s=this.categories.findIndex(o=>o.id===e);return s!==-1&&(this.categories[s]=a.data),((t=this.currentCategory)==null?void 0:t.id)===e&&(this.currentCategory=a.data),a.data}else throw this.error=a.message,new Error(a.message)}catch(a){throw this.error=a.message||"Error updating category",console.error("Error updating category:",a),a}finally{this.loading=!1}},async deleteCategory(e){var r;this.loading=!0,this.error=null;try{await i(`/admin/categories/${e}`,{method:"DELETE"}),this.categories=this.categories.filter(t=>t.id!==e),this.pagination.total--,((r=this.currentCategory)==null?void 0:r.id)===e&&(this.currentCategory=null)}catch(t){throw this.error=t.message||"Error deleting category",console.error("Error deleting category:",t),t}finally{this.loading=!1}},async toggleCategoryStatus(e){var r;this.loading=!0,this.error=null;try{const t=await i(`/admin/categories/${e}/toggle-status`,{method:"POST"});if(t.success){const a=this.categories.findIndex(s=>s.id===e);return a!==-1&&(this.categories[a]=t.data),((r=this.currentCategory)==null?void 0:r.id)===e&&(this.currentCategory=t.data),t.data}else throw this.error=t.message,new Error(t.message)}catch(t){throw this.error=t.message||"Error toggling category status",console.error("Error toggling category status:",t),t}finally{this.loading=!1}},clearError(){this.error=null},clearCurrentCategory(){this.currentCategory=null},resetPagination(){this.pagination={current_page:1,per_page:15,total:0,last_page:1}}}});export{c as u};
