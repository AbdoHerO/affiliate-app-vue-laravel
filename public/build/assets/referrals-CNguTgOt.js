import{d as q,aL as M,r as g,V as $,o as G,c as v,b as _,f as s,e,v as l,n as r,g as t,az as c,t as d,ac as b,F as R,j as A,h as B,m as H,b6 as E}from"./main-DEzoUo6n.js";import{V as z,a as p}from"./VRow-CCKjjrNU.js";import{V as D}from"./VTextField-BiqUvfe6.js";import{V as h,b as k}from"./VCard-BQBmQiQJ.js";import{V as y}from"./VCardText-DtKfeQ8i.js";import{V as J}from"./VAlert--Qma1TSN.js";import{V as K}from"./VSnackbar-Br3eOTz2.js";import{V as w}from"./VAvatar-DcdpS4jo.js";import{V as P}from"./VChip-BLx6lUDe.js";/* empty css              */import"./VField-BrxQSdNw.js";import"./VImg-Dcm3Nb79.js";import"./forwardRefs-BYcTBJDs.js";import"./createSimpleFunctional-DUhC6iZd.js";import"./VOverlay-D7sMErQR.js";import"./lazy-BPEwf1-U.js";const Q={class:"d-flex justify-space-between align-center mb-6"},W={class:"text-h4 font-weight-bold mb-1"},X={class:"text-body-1 mb-0"},Y={class:"d-flex align-center gap-2"},Z={class:"text-h6 mb-0"},ee={class:"text-body-2 mb-0"},te={key:0},ae={class:"flex-grow-1"},se={class:"font-weight-medium"},le={class:"text-body-2 text-medium-emphasis"},re={key:1,class:"text-center py-8"},oe={class:"text-body-2"},ie={class:"d-flex align-start mb-3"},ne={class:"font-weight-medium"},ce={class:"text-body-2 text-medium-emphasis"},de={class:"d-flex align-start mb-3"},ue={class:"font-weight-medium"},_e={class:"text-body-2 text-medium-emphasis"},fe={class:"d-flex align-start"},me={class:"font-weight-medium"},ve={class:"text-body-2 text-medium-emphasis"},Ae=q({__name:"referrals",setup(pe){const{t:a}=M(),S=g(!1),u=g({stats:{clicks:0,signups:0,verified_signups:0,conversion_rate:0,verified_conversion_rate:0,total_points:0,referral_url:""},recent_activity:[]}),f=g(""),x=g(!1),m=g({start_date:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),N=$(()=>[{title:a("referral_clicks"),value:u.value.stats.clicks,icon:"tabler-click",color:"primary"},{title:a("signups"),value:u.value.stats.signups,icon:"tabler-user-plus",color:"success"},{title:a("verified_signups"),value:u.value.stats.verified_signups,icon:"tabler-user-check",color:"info"},{title:a("conversion_rate"),value:`${u.value.stats.conversion_rate}%`,icon:"tabler-trending-up",color:"warning"},{title:a("total_points"),value:u.value.stats.total_points,icon:"tabler-award",color:"secondary"}]),T=async()=>{S.value=!0;try{const o=await E.get("/affiliate/referrals/dashboard",{params:{start_date:m.value.start_date,end_date:m.value.end_date}});o.data.success&&(u.value=o.data.data,f.value=u.value.stats.referral_url)}catch(o){console.error("Error fetching referral dashboard:",o)}finally{S.value=!1}},V=async()=>{try{const o=await E.get("/affiliate/referrals/link");o.data.success&&(f.value=o.data.data.referral_url)}catch(o){console.error("Error fetching referral link:",o)}},C=async()=>{try{f.value||await V(),await navigator.clipboard.writeText(f.value),x.value=!0,setTimeout(()=>{x.value=!1},2e3)}catch(o){console.error("Error copying link:",o)}},L=async()=>{try{f.value||await V(),navigator.share?await navigator.share({title:a("referral_link_share_title"),text:a("referral_link_share_text"),url:f.value}):await C()}catch(o){console.error("Error sharing link:",o),await C()}},I=()=>{T()},j=o=>new Date(o).toLocaleDateString(),F=o=>o==="referral"?"tabler-user-plus":"tabler-gift",U=o=>o==="referral"?"success":"secondary";return G(async()=>{await V(),await T()}),(o,n)=>(_(),v("div",null,[s("div",Q,[s("div",null,[s("h1",W,l(r(a)("my_referrals")),1),s("p",X,l(r(a)("referrals_subtitle")),1)]),e(h,{class:"pa-4",style:{"min-width":"300px"}},{default:t(()=>[e(z,{"no-gutters":""},{default:t(()=>[e(p,{cols:"5"},{default:t(()=>[e(D,{modelValue:m.value.start_date,"onUpdate:modelValue":n[0]||(n[0]=i=>m.value.start_date=i),type:"date",label:r(a)("start_date"),density:"compact",variant:"outlined",onChange:I},null,8,["modelValue","label"])]),_:1}),e(p,{cols:"2",class:"d-flex align-center justify-center"},{default:t(()=>[e(c,{icon:"tabler-arrow-right",size:"20"})]),_:1}),e(p,{cols:"5"},{default:t(()=>[e(D,{modelValue:m.value.end_date,"onUpdate:modelValue":n[1]||(n[1]=i=>m.value.end_date=i),type:"date",label:r(a)("end_date"),density:"compact",variant:"outlined",onChange:I},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),e(h,{class:"mb-6"},{default:t(()=>[e(k,{class:"d-flex align-center"},{default:t(()=>[e(c,{icon:"tabler-link",class:"me-2"}),d(" "+l(r(a)("your_referral_link")),1)]),_:1}),e(y,null,{default:t(()=>[e(J,{type:"info",variant:"tonal",class:"mb-4"},{default:t(()=>[d(l(r(a)("referral_link_instructions")),1)]),_:1}),s("div",Y,[e(D,{"model-value":f.value,readonly:"",variant:"outlined",class:"flex-grow-1"},null,8,["model-value"]),e(b,{color:"primary",onClick:C},{default:t(()=>[e(c,{icon:"tabler-copy"})]),_:1}),e(b,{color:"secondary",onClick:L},{default:t(()=>[e(c,{icon:"tabler-share"})]),_:1})]),e(K,{modelValue:x.value,"onUpdate:modelValue":n[2]||(n[2]=i=>x.value=i),color:"success",timeout:"2000"},{default:t(()=>[d(l(r(a)("link_copied_successfully")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(z,{class:"mb-6"},{default:t(()=>[(_(!0),v(R,null,A(N.value,i=>(_(),B(p,{key:i.title,cols:"12",sm:"6",lg:"4",xl:"2"},{default:t(()=>[e(h,null,{default:t(()=>[e(y,{class:"d-flex align-center"},{default:t(()=>[e(w,{color:i.color,variant:"tonal",size:"40",class:"me-4"},{default:t(()=>[e(c,{icon:i.icon,size:"24"},null,8,["icon"])]),_:2},1032,["color"]),s("div",null,[s("h6",Z,l(i.value),1),s("p",ee,l(i.title),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(z,null,{default:t(()=>[e(p,{cols:"12",md:"6"},{default:t(()=>[e(h,null,{default:t(()=>[e(k,{class:"d-flex align-center"},{default:t(()=>[e(c,{icon:"tabler-activity",class:"me-2"}),d(" "+l(r(a)("recent_activity")),1)]),_:1}),e(y,null,{default:t(()=>[u.value.recent_activity.length>0?(_(),v("div",te,[(_(!0),v(R,null,A(u.value.recent_activity,(i,O)=>(_(),v("div",{key:O,class:"d-flex align-center mb-3"},[e(w,{color:U(i.type),variant:"tonal",size:"32",class:"me-3"},{default:t(()=>[e(c,{icon:F(i.type),size:"16"},null,8,["icon"])]),_:2},1032,["color"]),s("div",ae,[s("div",se,l(i.message),1),s("div",le,l(j(i.date)),1)]),i.type==="referral"&&i.verified?(_(),B(P,{key:0,color:"success",size:"small"},{default:t(()=>[d(l(r(a)("verified")),1)]),_:1})):H("",!0)]))),128))])):(_(),v("div",re,[e(c,{icon:"tabler-activity",size:"48",class:"mb-4",color:"disabled"}),s("p",oe,l(r(a)("no_activity_yet")),1)]))]),_:1})]),_:1})]),_:1}),e(p,{cols:"12",md:"6"},{default:t(()=>[e(h,null,{default:t(()=>[e(k,null,{default:t(()=>[d(l(r(a)("quick_actions")),1)]),_:1}),e(y,null,{default:t(()=>[e(b,{block:"",color:"primary",class:"mb-3",to:"/affiliate/referrals/users"},{default:t(()=>[e(c,{start:"",icon:"tabler-users"}),d(" "+l(r(a)("view_referred_users")),1)]),_:1}),e(b,{block:"",color:"secondary",class:"mb-3",to:"/affiliate/referrals/rewards"},{default:t(()=>[e(c,{start:"",icon:"tabler-gift"}),d(" "+l(r(a)("view_rewards_history")),1)]),_:1}),e(b,{block:"",color:"info",onClick:L},{default:t(()=>[e(c,{start:"",icon:"tabler-share"}),d(" "+l(r(a)("share_referral_link")),1)]),_:1})]),_:1})]),_:1}),e(h,{class:"mt-4"},{default:t(()=>[e(k,null,{default:t(()=>[d(l(r(a)("how_it_works")),1)]),_:1}),e(y,null,{default:t(()=>[s("div",ie,[e(w,{color:"primary",variant:"tonal",size:"24",class:"me-3 mt-1"},{default:t(()=>n[3]||(n[3]=[s("span",{class:"text-caption font-weight-bold"},"1",-1)])),_:1,__:[3]}),s("div",null,[s("div",ne,l(r(a)("share_your_link")),1),s("div",ce,l(r(a)("share_link_description")),1)])]),s("div",de,[e(w,{color:"success",variant:"tonal",size:"24",class:"me-3 mt-1"},{default:t(()=>n[4]||(n[4]=[s("span",{class:"text-caption font-weight-bold"},"2",-1)])),_:1,__:[4]}),s("div",null,[s("div",ue,l(r(a)("friend_signs_up")),1),s("div",_e,l(r(a)("signup_description")),1)])]),s("div",fe,[e(w,{color:"secondary",variant:"tonal",size:"24",class:"me-3 mt-1"},{default:t(()=>n[5]||(n[5]=[s("span",{class:"text-caption font-weight-bold"},"3",-1)])),_:1,__:[5]}),s("div",null,[s("div",me,l(r(a)("earn_rewards")),1),s("div",ve,l(r(a)("rewards_description")),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{Ae as default};
