import{d as F,aL as I,r as p,V as N,o as j,c as E,f as i,e,v as o,n as s,g as a,ac as g,b6 as K,b as L,t as c,az as V,cG as R}from"./main-0h7RfoM1.js";import{V as x,b as A}from"./VCard-BJO62jXa.js";import{V as w}from"./VCardText-DBDe3l6V.js";import{V as C,a as f}from"./VRow-CwTmyELD.js";import{V as h}from"./VTextField-CB8SxAnl.js";import{V as G}from"./VSelect-E3I5xPtI.js";import{V as M}from"./VDataTableServer-S93ZGevF.js";import{V as k}from"./VChip-Cb1gcZbV.js";import{V as O}from"./VAvatar-BcyggOHV.js";import"./createSimpleFunctional-CRjW3p8V.js";import"./VImg-D8VstP0L.js";/* empty css              */import"./VField-ThiSfLeE.js";import"./forwardRefs-DtnMMuBS.js";import"./VList-D8OGLl9W.js";import"./ssrBoot-_8LWlSSM.js";import"./VDivider-CF-VI2ua.js";import"./dialog-transition--QLlkKWU.js";import"./VMenu-BRSAgo5d.js";import"./VOverlay-cV5WKNuZ.js";import"./lazy-DAn2yZiW.js";import"./VCheckboxBtn-DNqYvCTV.js";import"./VDataTable-CrgqCoMT.js";import"./VPagination-CjKu94po.js";import"./VTable-BHYHnEIv.js";import"./filter-BbUs5nlv.js";const q={class:"d-flex justify-space-between align-center mb-6"},H={class:"text-h4 font-weight-bold mb-1"},J={class:"text-body-1 mb-0"},P={class:"d-flex gap-2"},Q={class:"d-flex align-center"},W={class:"font-weight-medium"},X={class:"text-body-2 text-medium-emphasis"},Y={class:"text-center py-8"},Z={class:"text-h6 mb-2"},$={class:"text-body-2"},Se=F({__name:"users",setup(ee){const{t:r}=I(),v=p(!1),y=p([]),u=p({current_page:1,last_page:1,per_page:15,total:0}),d=p({search:"",verified:null,start_date:"",end_date:""}),U=N(()=>[{title:r("user"),key:"new_user",sortable:!1},{title:r("signup_date"),key:"attributed_at",sortable:!0},{title:r("verification_status"),key:"verified",sortable:!0},{title:r("source"),key:"source",sortable:!0}]),_=async(n=1)=>{v.value=!0;try{const l={page:n,per_page:u.value.per_page,...d.value};Object.keys(l).forEach(b=>{(l[b]===""||l[b]===null)&&delete l[b]});const t=await K.get("/affiliate/referrals/referred-users",{params:l});t.data.success&&(y.value=t.data.data,u.value=t.data.pagination)}catch(l){console.error("Failed to fetch referred users:",l)}finally{v.value=!1}},m=()=>{u.value.current_page=1,_()},S=()=>{d.value={search:"",verified:null,start_date:"",end_date:""},_()},T=n=>new Date(n).toLocaleDateString(),z=n=>n?"success":"warning",D=n=>r(n?"verified":"pending_verification"),B=n=>n==="mobile"?"info":"primary";return j(()=>{_()}),(n,l)=>(L(),E("div",null,[i("div",q,[i("div",null,[i("h1",H,o(s(r)("my_referred_users")),1),i("p",J,o(s(r)("my_referred_users_subtitle")),1)]),e(g,{color:"primary",to:"/affiliate/referrals"},{default:a(()=>[e(V,{start:"",icon:"tabler-arrow-left"}),c(" "+o(s(r)("back_to_dashboard")),1)]),_:1})]),e(x,{class:"mb-6"},{default:a(()=>[e(A,null,{default:a(()=>[c(o(s(r)("filters")),1)]),_:1}),e(w,null,{default:a(()=>[e(C,null,{default:a(()=>[e(f,{cols:"12",md:"4"},{default:a(()=>[e(h,{modelValue:d.value.search,"onUpdate:modelValue":l[0]||(l[0]=t=>d.value.search=t),label:s(r)("search_users"),placeholder:s(r)("search_by_name_email"),"prepend-inner-icon":"tabler-search",clearable:"",onKeyup:R(m,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),e(f,{cols:"12",md:"3"},{default:a(()=>[e(G,{modelValue:d.value.verified,"onUpdate:modelValue":[l[1]||(l[1]=t=>d.value.verified=t),m],items:[{value:!0,title:s(r)("verified")},{value:!1,title:s(r)("unverified")}],label:s(r)("verification_status"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),e(f,{cols:"12",md:"3"},{default:a(()=>[e(h,{modelValue:d.value.start_date,"onUpdate:modelValue":l[2]||(l[2]=t=>d.value.start_date=t),type:"date",label:s(r)("start_date"),onChange:m},null,8,["modelValue","label"])]),_:1}),e(f,{cols:"12",md:"2"},{default:a(()=>[i("div",P,[e(g,{color:"primary",onClick:m},{default:a(()=>[c(o(s(r)("search")),1)]),_:1}),e(g,{variant:"outlined",onClick:S},{default:a(()=>[c(o(s(r)("clear")),1)]),_:1})])]),_:1})]),_:1}),e(C,{class:"mt-2"},{default:a(()=>[e(f,{cols:"12",md:"3"},{default:a(()=>[e(h,{modelValue:d.value.end_date,"onUpdate:modelValue":l[3]||(l[3]=t=>d.value.end_date=t),type:"date",label:s(r)("end_date"),onChange:m},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(w,null,{default:a(()=>[e(M,{page:u.value.current_page,"onUpdate:page":[l[4]||(l[4]=t=>u.value.current_page=t),_],headers:U.value,items:y.value,"items-length":u.value.total,"items-per-page":u.value.per_page,loading:v.value,class:"text-no-wrap"},{"item.new_user":a(({item:t})=>[i("div",Q,[e(O,{size:"32",class:"me-3"},{default:a(()=>[e(V,{icon:"tabler-user"})]),_:1}),i("div",null,[i("div",W,o(t.new_user.nom_complet),1),i("div",X,o(t.new_user.email),1)])])]),"item.attributed_at":a(({item:t})=>[c(o(T(t.attributed_at)),1)]),"item.verified":a(({item:t})=>[e(k,{color:z(t.verified),size:"small"},{default:a(()=>[c(o(D(t.verified)),1)]),_:2},1032,["color"])]),"item.source":a(({item:t})=>[e(k,{color:B(t.source),size:"small"},{default:a(()=>[c(o(t.source),1)]),_:2},1032,["color"])]),"no-data":a(()=>[i("div",Y,[e(V,{icon:"tabler-users-off",size:"64",class:"mb-4",color:"disabled"}),i("h6",Z,o(s(r)("no_referred_users_yet")),1),i("p",$,o(s(r)("no_referred_users_yet_description")),1)])]),_:1},8,["page","headers","items","items-length","items-per-page","loading"])]),_:1})]),_:1})]))}});export{Se as default};
