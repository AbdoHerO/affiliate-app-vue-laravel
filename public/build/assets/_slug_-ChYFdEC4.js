import{d as I,r as w,c as u,b as l,e,g as s,t as k,az as h,v as n,F as $,j,h as m,m as d,ac as S,f as a,aU as G,aL as K,u as Q,V as O,o as W}from"./main-BGmfaZsq.js";import{u as X}from"./useApi-CJ-TYkD6.js";import{V as Z,a as q,P as ee}from"./PublicLayout-DYSbgVRq.js";import{b as P,V as g,c as H}from"./VCard-hQ_o7lvO.js";import{V as y}from"./VCardText-BzdllyhI.js";import{V as F,a as z}from"./VRow-Jzvhbj9T.js";import{V as C}from"./VImg-6pMKiBpi.js";import{V as Y}from"./VDialog-DIYcXxVx.js";import{a as J}from"./VOverlay-CvSSR2rW.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as N}from"./VChip-S_h5DeIW.js";import{V as te}from"./VAlert-CPLjIjOe.js";import{V as se}from"./VDivider-oo2GmB8o.js";import{V as ae}from"./VRating-C0XCFpi3.js";/* empty css              */import"./VSpacer-B4IQn0G0.js";import"./createSimpleFunctional-BjWjRu3X.js";import"./ssrBoot-A30zOnZp.js";import"./VAvatar-CXniQsPN.js";import"./forwardRefs-BxxmAO9z.js";import"./dialog-transition-BhMeiVQ2.js";import"./lazy-DgLfxsl0.js";const le={class:"d-flex align-center justify-center fill-height"},oe=I({__name:"PublicImageGallery",props:{images:{}},setup(T){const v=w(null),t=w(!1),x=b=>{v.value=b,t.value=!0},i=()=>{t.value=!1,v.value=null};return(b,r)=>(l(),u($,null,[e(g,{elevation:"2"},{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(h,{icon:"tabler-photo"}),k(" Images ("+n(b.images.length)+") ",1)]),_:1}),e(y,null,{default:s(()=>[e(F,null,{default:s(()=>[(l(!0),u($,null,j(b.images,o=>(l(),m(z,{key:o.id,cols:"6",sm:"4",md:"3"},{default:s(()=>[e(g,{class:"image-card",elevation:"1",onClick:c=>x(o.url)},{default:s(()=>[e(C,{src:o.url,alt:`Image ${o.ordre+1}`,"aspect-ratio":"1",cover:"",class:"cursor-pointer"},{placeholder:s(()=>[a("div",le,[e(G,{indeterminate:"",color:"primary"})])]),_:2},1032,["src","alt"]),e(J,{"model-value":!1,contained:"",class:"align-center justify-center",opacity:"0"},{default:s(()=>[e(h,{icon:"tabler-eye",size:"32",color:"white"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Y,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=o=>t.value=o),"max-width":"90vw","max-height":"90vh"},{default:s(()=>[v.value?(l(),m(g,{key:0},{default:s(()=>[e(H,{class:"justify-end pa-2"},{default:s(()=>[e(S,{icon:"tabler-x",variant:"text",onClick:i})]),_:1}),e(y,{class:"pa-0"},{default:s(()=>[e(C,{src:v.value,"max-height":"80vh",contain:""},null,8,["src"])]),_:1})]),_:1})):d("",!0)]),_:1},8,["modelValue"])],64))}}),ie=D(oe,[["__scopeId","data-v-b617d930"]]),re={class:"video-thumbnail"},ne={class:"d-flex align-center justify-center fill-height bg-grey-lighten-4"},ce={key:1,class:"d-flex align-center justify-center bg-grey-lighten-4 cursor-pointer",style:{"aspect-ratio":"16/9"}},ue={class:"text-caption text-truncate"},de={class:"video-container"},me=["src"],_e=["src"],ve=I({__name:"PublicVideoGallery",props:{videos:{}},setup(T){const v=w(null),t=w(!1),x=o=>{v.value=o,t.value=!0},i=()=>{t.value=!1,v.value=null},b=o=>o.includes("youtube.com")||o.includes("youtu.be"),r=o=>{const c=o.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return c?`https://www.youtube.com/embed/${c[1]}`:o};return(o,c)=>(l(),u($,null,[e(g,{elevation:"2"},{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(h,{icon:"tabler-video"}),k(" Videos ("+n(o.videos.length)+") ",1)]),_:1}),e(y,null,{default:s(()=>[e(F,null,{default:s(()=>[(l(!0),u($,null,j(o.videos,_=>(l(),m(z,{key:_.id,cols:"6",sm:"4",md:"3"},{default:s(()=>[e(g,{class:"video-card",elevation:"1",onClick:p=>x(_.url)},{default:s(()=>{var p;return[a("div",re,[b(_.url)?(l(),m(C,{key:0,src:`https://img.youtube.com/vi/${(p=_.url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/))==null?void 0:p[1]}/maxresdefault.jpg`,"aspect-ratio":"16/9",cover:"",class:"cursor-pointer"},{placeholder:s(()=>[a("div",ne,[e(h,{icon:"tabler-video",size:"48",color:"grey"})])]),_:2},1032,["src"])):(l(),u("div",ce,[e(h,{icon:"tabler-video",size:"48",color:"grey"})])),e(J,{"model-value":!1,contained:"",class:"align-center justify-center",opacity:"0.3"},{default:s(()=>[e(h,{icon:"tabler-player-play-filled",size:"48",color:"white"})]),_:1})]),_.titre?(l(),m(y,{key:0,class:"pa-2"},{default:s(()=>[a("div",ue,n(_.titre),1)]),_:2},1024)):d("",!0)]}),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Y,{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=_=>t.value=_),"max-width":"90vw","max-height":"90vh"},{default:s(()=>[v.value?(l(),m(g,{key:0},{default:s(()=>[e(H,{class:"justify-end pa-2"},{default:s(()=>[e(S,{icon:"tabler-x",variant:"text",onClick:i})]),_:1}),e(y,{class:"pa-4"},{default:s(()=>[a("div",de,[b(v.value)?(l(),u("iframe",{key:0,src:r(v.value),frameborder:"0",allowfullscreen:"",class:"video-iframe"},null,8,me)):(l(),u("video",{key:1,src:v.value,controls:"",class:"video-player"}," Your browser does not support the video tag. ",8,_e))])]),_:1})]),_:1})):d("",!0)]),_:1},8,["modelValue"])],64))}}),pe=D(ve,[["__scopeId","data-v-fe786aed"]]),fe={class:"d-flex flex-wrap gap-3"},ge={key:0,class:"variant-image"},he={class:"d-flex align-center justify-center fill-height bg-grey-lighten-4"},ye={class:"text-subtitle-2 font-weight-bold mb-1"},xe={class:"text-body-2 text-medium-emphasis mb-2"},be={key:0,class:"text-caption text-primary font-weight-medium"},ke=I({__name:"VariantChips",props:{variants:{}},setup(T){const v=t=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"MAD"}).format(Number(t));return(t,x)=>(l(),m(g,{elevation:"2"},{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(h,{icon:"tabler-palette"}),k(" Variants ("+n(t.variants.length)+") ",1)]),_:1}),e(y,null,{default:s(()=>[a("div",fe,[(l(!0),u($,null,j(t.variants,i=>(l(),m(g,{key:i.id,class:"variant-card",elevation:"1",width:"200"},{default:s(()=>[i.image_url?(l(),u("div",ge,[e(C,{src:i.image_url,alt:`${i.nom}: ${i.valeur}`,height:"120",cover:""},{placeholder:s(()=>[a("div",he,[e(h,{icon:"tabler-photo",size:"32",color:"grey"})])]),_:2},1032,["src","alt"])])):d("",!0),e(y,{class:"pa-3"},{default:s(()=>[a("div",ye,n(i.nom),1),a("div",xe,n(i.valeur),1),i.prix_vente_variante?(l(),u("div",be,n(v(i.prix_vente_variante)),1)):d("",!0)]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1}))}}),we=D(ke,[["__scopeId","data-v-177c248a"]]),$e={key:0,class:"proposition-image"},Ve={class:"d-flex align-center justify-center fill-height bg-grey-lighten-4"},Ce={class:"mb-2"},Ie={key:0,class:"text-subtitle-1 font-weight-bold mb-2"},Pe={class:"text-body-2 text-medium-emphasis mb-3 flex-grow-1"},De={class:"text-caption text-medium-emphasis"},Te=I({__name:"PropositionCards",props:{propositions:{}},setup(T){const v=i=>new Date(i).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),t=i=>{switch(i){case"nouveau":return"success";case"amelioration":return"info";case"probleme":return"warning";default:return"primary"}},x=i=>{switch(i){case"nouveau":return"New Feature";case"amelioration":return"Improvement";case"probleme":return"Issue Report";default:return i}};return(i,b)=>(l(),m(g,{elevation:"2"},{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(h,{icon:"tabler-lightbulb"}),k(" Propositions ("+n(i.propositions.length)+") ",1)]),_:1}),e(y,null,{default:s(()=>[e(F,null,{default:s(()=>[(l(!0),u($,null,j(i.propositions,r=>(l(),m(z,{key:r.id,cols:"12",sm:"6",md:"4"},{default:s(()=>[e(g,{class:"proposition-card h-100",elevation:"1"},{default:s(()=>[r.image_url?(l(),u("div",$e,[e(C,{src:r.image_url,alt:r.titre||"Proposition",height:"160",cover:""},{placeholder:s(()=>[a("div",Ve,[e(h,{icon:"tabler-photo",size:"32",color:"grey"})])]),_:2},1032,["src","alt"])])):d("",!0),e(y,{class:"pa-4 d-flex flex-column"},{default:s(()=>[a("div",Ce,[e(N,{color:t(r.type),size:"small",variant:"outlined"},{default:s(()=>[k(n(x(r.type)),1)]),_:2},1032,["color"])]),r.titre?(l(),u("h3",Ie,n(r.titre),1)):d("",!0),a("div",Pe,n(r.description),1),a("div",De,n(v(r.created_at)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),ze=D(Te,[["__scopeId","data-v-c4384f9d"]]),je={key:1,class:"d-flex flex-column gap-3"},Le={class:"d-flex justify-space-between align-start mb-3"},Ne={class:"flex-grow-1"},Fe={class:"text-subtitle-1 font-weight-bold mb-1"},Se={class:"text-body-2 text-medium-emphasis"},Me={class:"d-flex flex-column flex-sm-row gap-4"},Re={class:"flex-grow-1"},Ue={class:"font-weight-medium"},Ae={key:0,class:"flex-grow-1"},Be={class:"font-weight-medium"},Ee={key:1,class:"flex-grow-1"},Oe=I({__name:"StockIssues",props:{stockIssues:{},variants:{}},setup(T){const{t:v}=K(),t=r=>new Date(r).toLocaleString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=(r,o=[])=>{if(!r)return"All variants";const c=o.find(_=>_.id===r);return c?`${c.nom}: ${c.valeur}`:"Unknown variant"},i=r=>{if(!r)return"error";const o=new Date(r),c=new Date,_=Math.ceil((o.getTime()-c.getTime())/(1e3*60*60*24));return _<=3?"warning":_<=7?"info":"success"},b=r=>{if(!r)return v("components_no_restock_date");const o=new Date(r),c=new Date,_=Math.ceil((o.getTime()-c.getTime())/(1e3*60*60*24));return _<0?"Overdue":_===0?"Today":_===1?"Tomorrow":`${_} days`};return(r,o)=>(l(),m(g,{elevation:"2"},{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(h,{icon:"tabler-alert-triangle",color:"warning"}),k(" Stock Issues ("+n(r.stockIssues.length)+") ",1)]),_:1}),e(y,null,{default:s(()=>[r.stockIssues.length===0?(l(),m(te,{key:0,type:"success",variant:"tonal",class:"mb-0"},{default:s(()=>[e(h,{icon:"tabler-check"}),o[0]||(o[0]=k(" No current stock issues "))]),_:1,__:[0]})):(l(),u("div",je,[(l(!0),u($,null,j(r.stockIssues,c=>(l(),m(g,{key:c.id,class:"stock-issue-card",elevation:"1",color:i(c.expected_restock_at),variant:"outlined"},{default:s(()=>[e(y,{class:"pa-4"},{default:s(()=>[a("div",Le,[a("div",Ne,[a("h4",Fe,n(c.motif),1),a("div",Se," Affects: "+n(x(c.variante_id,r.variants)),1)]),e(N,{color:i(c.expected_restock_at),size:"small",variant:"flat"},{default:s(()=>[k(n(b(c.expected_restock_at)),1)]),_:2},1032,["color"])]),e(se,{class:"my-3"}),a("div",Me,[a("div",Re,[o[1]||(o[1]=a("div",{class:"text-caption text-medium-emphasis"},"Started",-1)),a("div",Ue,n(t(c.started_at)),1)]),c.expected_restock_at?(l(),u("div",Ae,[o[2]||(o[2]=a("div",{class:"text-caption text-medium-emphasis"},"Expected Restock",-1)),a("div",Be,n(t(c.expected_restock_at)),1)])):(l(),u("div",Ee,o[3]||(o[3]=[a("div",{class:"text-caption text-medium-emphasis"},"Status",-1),a("div",{class:"font-weight-medium text-error"}," No restock date set ",-1)])))])]),_:2},1024)]),_:2},1032,["color"]))),128))]))]),_:1})]),_:1}))}}),qe=D(Oe,[["__scopeId","data-v-381c3294"]]),Ge={key:0,class:"d-flex justify-center align-center",style:{"min-height":"400px"}},He={key:1,class:"d-flex flex-column justify-center align-center",style:{"min-height":"400px"}},Ye={class:"text-body-1 text-medium-emphasis"},Je={key:2},Ke={class:"flex-grow-1"},Qe={class:"text-h6 font-weight-bold text-truncate"},We={class:"d-flex flex-column flex-md-row gap-6"},Xe={class:"flex-shrink-0"},Ze={key:1,class:"d-flex align-center justify-center bg-grey-lighten-4 rounded-lg",style:{width:"300px",height:"300px"}},et={class:"flex-grow-1"},tt={class:"text-h3 font-weight-bold mb-4"},st={class:"d-flex align-center gap-4 mb-4"},at={class:"text-h4 font-weight-bold text-primary"},lt={key:0,class:"text-body-1 text-medium-emphasis"},ot={class:"d-flex gap-2 mb-4"},it={key:0,class:"rating-section mb-4"},rt={class:"d-flex align-center gap-2"},nt={class:"text-body-2 text-medium-emphasis"},ct={key:1,class:"text-body-1 mb-4"},ut=["innerHTML"],dt={key:2,class:"copywriting-section"},mt=["innerHTML"],_t={class:"d-flex flex-column gap-3"},vt={key:0},pt={class:"font-weight-medium"},ft={key:1},gt={class:"font-weight-medium"},ht={class:"text-h6 font-weight-bold text-primary"},yt={key:2},xt={class:"font-weight-medium"},bt=I({__name:"[slug]",setup(T){const v=Q(),t=w(null),x=w(!0),i=w(null);O(()=>{var p;return((p=t.value)==null?void 0:p.titre)||"Product"});const b=O(()=>window.location.href),r=async()=>{try{x.value=!0,i.value=null;const p=v.params.slug,{data:f,error:L}=await X(`/public/produits/${p}`);if(L.value){i.value="Product not found";return}const V=f.value;V.success?(t.value=V.data,t.value.titre&&(document.title=`${t.value.titre} - COD Platform`)):i.value=V.message||"Product not found"}catch(p){console.error("Error loading product:",p),i.value="Failed to load product"}finally{x.value=!1}},o=async()=>{try{await navigator.clipboard.writeText(b.value),console.log("Link copied to clipboard")}catch(p){console.error("Failed to copy link:",p)}},c=p=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"MAD"}).format(Number(p)),_=p=>p?p.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").trim():"";return W(()=>{r()}),(p,f)=>(l(),m(ee,null,{default:s(()=>[x.value?(l(),u("div",Ge,[e(G,{indeterminate:"",color:"primary",size:"64"})])):i.value?(l(),u("div",He,[e(h,{icon:"tabler-alert-circle",size:"64",color:"error",class:"mb-4"}),f[0]||(f[0]=a("h2",{class:"text-h4 mb-2"},"Product Not Found",-1)),a("p",Ye,n(i.value),1)])):t.value?(l(),u("div",Je,[e(Z,{color:"white",elevation:"1",class:"border-b",style:{top:"64px"},app:""},{default:s(()=>[e(q,{class:"d-flex align-center"},{default:s(()=>[a("div",Ke,[a("h1",Qe,n(t.value.titre),1)]),e(S,{variant:"outlined",color:"primary",size:"small","prepend-icon":"tabler-share",onClick:o},{default:s(()=>f[1]||(f[1]=[k(" Copy Link ")])),_:1,__:[1]})]),_:1})]),_:1}),e(q,{class:"py-8",style:{"margin-top":"64px"}},{default:s(()=>[e(F,null,{default:s(()=>[e(z,{cols:"12",lg:"8"},{default:s(()=>{var L,V,M,R,U,A;return[e(g,{class:"mb-6",elevation:"2"},{default:s(()=>[e(y,{class:"pa-6"},{default:s(()=>{var B,E;return[a("div",We,[a("div",Xe,[(B=t.value.images)!=null&&B[0]?(l(),m(C,{key:0,src:t.value.images[0].url,alt:t.value.titre,width:"300",height:"300",class:"rounded-lg",cover:""},null,8,["src","alt"])):(l(),u("div",Ze,[e(h,{icon:"tabler-photo",size:"64",color:"grey"})]))]),a("div",et,[a("h1",tt,n(t.value.titre),1),a("div",st,[a("div",at,n(c(t.value.prix_vente)),1),t.value.prix_affilie?(l(),u("div",lt," Affiliate: "+n(c(t.value.prix_affilie)),1)):d("",!0)]),a("div",ot,[t.value.boutique?(l(),m(N,{key:0,color:"primary",variant:"outlined",size:"small"},{default:s(()=>[k(n(t.value.boutique.nom),1)]),_:1})):d("",!0),t.value.categorie?(l(),m(N,{key:1,color:"secondary",variant:"outlined",size:"small"},{default:s(()=>[k(n(t.value.categorie.nom),1)]),_:1})):d("",!0)]),(E=t.value.rating)!=null&&E.value?(l(),u("div",it,[a("div",rt,[e(ae,{"model-value":t.value.rating.value,readonly:"",length:"5","half-increments":"",color:"warning",size:"small"},null,8,["model-value"]),a("span",nt," ("+n(t.value.rating.value)+"/"+n(t.value.rating.max||5)+") ",1)])])):d("",!0),t.value.description?(l(),u("div",ct,[a("div",{innerHTML:t.value.description},null,8,ut)])):d("",!0),t.value.copywriting?(l(),u("div",dt,[e(g,{variant:"outlined",class:"pa-4 bg-grey-lighten-5"},{default:s(()=>[a("div",{class:"text-body-1 copywriting-content",innerHTML:_(t.value.copywriting)},null,8,mt)]),_:1})])):d("",!0)])])]}),_:1})]),_:1}),((L=t.value.images)==null?void 0:L.length)>1?(l(),m(ie,{key:0,images:t.value.images,class:"mb-6"},null,8,["images"])):d("",!0),(V=t.value.videos)!=null&&V.length?(l(),m(pe,{key:1,videos:t.value.videos,class:"mb-6"},null,8,["videos"])):d("",!0),(M=t.value.variantes)!=null&&M.length?(l(),m(we,{key:2,variants:t.value.variantes,class:"mb-6"},null,8,["variants"])):d("",!0),(R=t.value.propositions)!=null&&R.length?(l(),m(ze,{key:3,propositions:t.value.propositions,class:"mb-6"},null,8,["propositions"])):d("",!0),(U=t.value.ruptures)!=null&&U.length||(A=t.value.variantes)!=null&&A.length?(l(),m(qe,{key:4,"stock-issues":t.value.ruptures||[],variants:t.value.variantes||[],class:"mb-6"},null,8,["stock-issues","variants"])):d("",!0)]}),_:1}),e(z,{cols:"12",lg:"4"},{default:s(()=>[e(g,{elevation:"2"},{default:s(()=>[e(P,null,{default:s(()=>f[2]||(f[2]=[k("Product Details")])),_:1,__:[2]}),e(y,null,{default:s(()=>[a("div",_t,[t.value.boutique?(l(),u("div",vt,[f[3]||(f[3]=a("div",{class:"text-caption text-medium-emphasis"},"Store",-1)),a("div",pt,n(t.value.boutique.nom),1)])):d("",!0),t.value.categorie?(l(),u("div",ft,[f[4]||(f[4]=a("div",{class:"text-caption text-medium-emphasis"},"Category",-1)),a("div",gt,n(t.value.categorie.nom),1)])):d("",!0),a("div",null,[f[5]||(f[5]=a("div",{class:"text-caption text-medium-emphasis"},"Price",-1)),a("div",ht,n(c(t.value.prix_vente)),1)]),t.value.prix_affilie?(l(),u("div",yt,[f[6]||(f[6]=a("div",{class:"text-caption text-medium-emphasis"},"Affiliate Price",-1)),a("div",xt,n(c(t.value.prix_affilie)),1)])):d("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):d("",!0)]),_:1}))}}),qt=D(bt,[["__scopeId","data-v-907c3286"]]);export{qt as default};
