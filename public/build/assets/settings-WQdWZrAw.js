import{$ as te}from"./api-DSi3Suj8.js";import{_ as ve,a as be}from"./AppTextarea.vue_vue_type_script_setup_true_lang-CtXT9_ia.js";import{_ as ye}from"./AppTextField.vue_vue_type_script_setup_true_lang-CBahpkzN.js";import{b4 as he,r as U,V as x,w as oe,aE as Ve,aF as we,aL as T,d as L,D as ge,g as A,o as w,f as a,b as e,m as s,s as v,t as d,e as _,c as R,l as J,F as me,i as pe,ac as O,az as j,a$ as ke,b0 as xe}from"./main-uLG9IIeX.js";import{a as u,V as P}from"./VRow-aGfXYx3U.js";import{V as F}from"./VCard-CB1gT6RB.js";import{V as z}from"./VCardText-BZtszuIK.js";import{V as ce}from"./VSkeletonLoader-ByuEhuJ3.js";import{V as M}from"./VField-CfH1YcVv.js";import{V as K}from"./VFileInput-D1Glyc4K.js";import{V as _e}from"./VAlert-TgguXW_5.js";import{a as Ce}from"./VList-uZDByhc2.js";import{V as X}from"./VSwitch-D1bWLDQ4.js";import{V as G}from"./VChip-B84WcmDa.js";import{a as Se,V as Fe}from"./VTabs-BkhoRyPL.js";import{a as ze,V as I}from"./VWindowItem-DPvP18Ki.js";import"./index-D-EbNoF1.js";import"./VSelect-sWnAtot-.js";import"./VTextField-Dxeq5kx5.js";import"./forwardRefs-Dv_T9a_w.js";import"./lazy-CjF3Yiep.js";import"./VImg-BS6_svHJ.js";import"./dialog-transition-2hF0ajsQ.js";import"./VMenu-DP1p-55V.js";import"./VCheckboxBtn-CogF2AUK.js";import"./VAvatar-bHPDEsYY.js";import"./VTextarea-BuIc6d95.js";/* empty css              */import"./createSimpleFunctional-DugzUcbB.js";import"./ssrBoot-BPhRU-mF.js";import"./VDivider-UqGR4x4D.js";const fe=he("settings",()=>{const c=U({}),b=U(!1),t=U(!1),S=U(null),g=x(()=>c.value.app_name||"Affiliate Platform"),q=x(()=>c.value.app_logo||""),o=x(()=>c.value.app_favicon||""),h=x(()=>c.value.primary_color||"#6366F1"),$=x(()=>c.value.secondary_color||"#8B5CF6"),B=x(()=>c.value.default_language||"fr"),y=x(()=>c.value.app_theme||"light"),i=x(()=>c.value.login_background_image||""),r=x(()=>c.value.signup_background_image||""),k=x(()=>({name:c.value.company_name||"",email:c.value.company_email||"",phone:c.value.company_phone||"",address:c.value.company_address||"",website:c.value.company_website||""})),ne=x(()=>({facebook:c.value.company_social_facebook||"",instagram:c.value.company_social_instagram||"",twitter:c.value.company_social_twitter||""})),se=x(()=>({logo:q.value,favicon:o.value,primaryColor:h.value,secondaryColor:$.value,theme:y.value})),Z=x(()=>({defaultLanguage:B.value,timezone:c.value.timezone||"Africa/Casablanca",currency:c.value.currency||"MAD",currencySymbol:c.value.currency_symbol||"MAD",dateFormat:c.value.date_format||"DD/MM/YYYY",timeFormat:c.value.time_format||"24"})),ie=async()=>{if(!t.value){b.value=!0;try{console.log("🔄 Initializing settings store..."),await Q(),E(),t.value=!0,console.log("✅ Settings store initialized successfully")}catch(f){console.error("❌ Settings store initialization failed:",f),c.value={app_name:"Affiliate Platform",app_description:"Advanced Affiliate Marketing Platform",primary_color:"#6366F1",secondary_color:"#8B5CF6",app_theme:"light",default_language:"fr",currency:"MAD",currency_symbol:"MAD"},t.value=!0,console.log("⚠️ Using default settings due to initialization failure")}finally{b.value=!1}}},Q=async()=>{try{console.log("🔄 Fetching settings from API...");const f=await fetch("/api/public/app-config",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const V=await f.json();if(V&&V.success)c.value=V.data||{},S.value=new Date,console.log("✅ Settings fetched successfully:",V.data);else throw console.warn("⚠️ Settings API returned unsuccessful response:",V),new Error("Settings API returned unsuccessful response")}catch(f){throw console.error("❌ Failed to fetch settings:",f),c.value={},f}},N=async(f,V)=>{b.value=!0;try{const D=await te(`/admin/settings/${f}`,{method:"PUT",body:V});if(D.success)await Q(),E(),ue();else throw new Error(D.message||"Failed to update settings")}catch(D){throw console.error("Failed to update settings:",D),D}finally{b.value=!1}},W=(f,V)=>c.value[f]??V,E=()=>{H(),ee(),ae(),re()},H=()=>{try{const f=Ve(),V=we();if(y.value&&y.value!=="system"&&(f.theme=y.value),h.value){const D=V.themes.value.light,le=V.themes.value.dark;D&&(D.colors.primary=h.value),le&&(le.colors.primary=h.value)}}catch(f){console.warn("Failed to apply theme settings:",f)}},ee=()=>{try{const{locale:f}=T();B.value&&f.value!==B.value&&(f.value=B.value)}catch(f){console.warn("Failed to apply language settings:",f)}},ae=()=>{if(o.value){const f=document.querySelector('link[rel="icon"]');if(f)f.href=o.value;else{const V=document.createElement("link");V.rel="icon",V.href=o.value,document.head.appendChild(V)}}},re=()=>{const f=document.documentElement;h.value&&f.style.setProperty("--settings-primary-color",h.value),$.value&&f.style.setProperty("--settings-secondary-color",$.value)},ue=()=>{window.dispatchEvent(new CustomEvent("settings:updated",{detail:{settings:c.value}}))};return oe(()=>c.value,()=>{t.value&&E()},{deep:!0}),{settings:x(()=>c.value),loading:x(()=>b.value),initialized:x(()=>t.value),lastUpdated:x(()=>S.value),appName:g,appLogo:q,appFavicon:o,primaryColor:h,secondaryColor:$,defaultLanguage:B,appTheme:y,loginBackground:i,signupBackground:r,companyInfo:k,socialLinks:ne,brandingInfo:se,localizationInfo:Z,initialize:ie,fetchSettings:Q,updateSettings:N,getSetting:W,applySettings:E}});fe();const Ue={class:"text-h6 mb-3"},Ye={key:0,class:"mt-3"},Me={class:"border rounded pa-3 d-flex align-center justify-center",style:{"min-height":"80px",background:"#f5f5f5"}},Ae=["src"],Be={key:0,class:"mt-3"},$e={class:"border rounded pa-3 d-flex align-center justify-center",style:{"min-height":"60px",background:"#f5f5f5"}},De=["src"],Pe={class:"d-flex gap-2 mb-2"},je={class:"d-flex gap-2"},Te={class:"d-flex gap-2 mb-2"},Ee={class:"d-flex gap-2"},Le={key:0,class:"mt-3"},qe={class:"border rounded pa-2",style:{height:"120px",background:"#f5f5f5",overflow:"hidden"}},Ie=["src"],Re={key:0,class:"mt-3"},Oe={class:"border rounded pa-2",style:{height:"120px",background:"#f5f5f5",overflow:"hidden"}},Ge=["src"],Ne={class:"me-2"},We={class:"text-caption text-medium-emphasis mt-2"},He={class:"text-caption text-medium-emphasis"},Je={class:"text-caption text-medium-emphasis"},Ke={class:"text-caption text-medium-emphasis"},Qe={class:"text-caption text-medium-emphasis"},Xe={class:"d-flex gap-3 flex-wrap"},Ze=L({__name:"GeneralSettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T(),S=fe(),g=c,q=b,o=U({app_name:"",app_description:"",app_slogan:"",app_keywords:"",company_name:"",company_email:"",company_phone:"",company_address:"",company_website:"",company_social_facebook:"",company_social_instagram:"",company_social_twitter:"",app_logo:"",app_favicon:"",primary_color:"#6366F1",secondary_color:"#8B5CF6",login_background_image:"",signup_background_image:"",app_theme:"light",default_language:"fr",timezone:"Africa/Casablanca",currency:"MAD",currency_symbol:"MAD",date_format:"DD/MM/YYYY",time_format:"24",number_format:"european",maintenance_mode:!1,registration_enabled:!0,email_verification_required:!0,kyc_verification_required:!0,max_file_upload_size:10,allowed_file_types:"jpg,jpeg,png,pdf,doc,docx",session_timeout:120,password_min_length:8,password_require_special:!0,app_version:"1.0.0"}),h=U(!1),$=U(!1),B=U(!1),y=[{title:"Français",value:"fr",flag:"🇫🇷"},{title:"العربية",value:"ar",flag:"🇲🇦"},{title:"English",value:"en",flag:"🇺🇸"}],i=[{title:"Casablanca (GMT+1)",value:"Africa/Casablanca"},{title:"Paris (GMT+1)",value:"Europe/Paris"},{title:"London (GMT+0)",value:"Europe/London"},{title:"New York (GMT-5)",value:"America/New_York"}],r=[{title:"DD/MM/YYYY",value:"DD/MM/YYYY"},{title:"MM/DD/YYYY",value:"MM/DD/YYYY"},{title:"YYYY-MM-DD",value:"YYYY-MM-DD"},{title:"DD-MM-YYYY",value:"DD-MM-YYYY"}],k=[{title:"24 heures (14:30)",value:"24"},{title:"12 heures (2:30 PM)",value:"12"}],ne=[{title:"Européen (1 234,56)",value:"european"},{title:"Américain (1,234.56)",value:"american"},{title:"Arabe (١٢٣٤,٥٦)",value:"arabic"}],se=[{title:"Clair",value:"light"},{title:"Sombre",value:"dark"},{title:"Auto",value:"auto"}],Z=[{title:"Indigo",value:"#6366F1",color:"#6366F1"},{title:"Violet",value:"#8B5CF6",color:"#8B5CF6"},{title:"Bleu",value:"#3B82F6",color:"#3B82F6"},{title:"Vert",value:"#10B981",color:"#10B981"},{title:"Orange",value:"#F59E0B",color:"#F59E0B"},{title:"Rouge",value:"#EF4444",color:"#EF4444"}];oe(()=>g.data,m=>{m&&Object.keys(m).forEach(l=>{!l.startsWith("general.")&&o.value.hasOwnProperty(l)&&(o.value[l]=m[l])})},{deep:!0,immediate:!0}),oe(o,m=>{Object.keys(m).forEach(l=>{m[l]!==g.data[l]&&q("change",l,m[l])})},{deep:!0});const ie=async()=>{if(!B.value){h.value=!0;try{const m=await te("/admin/settings/general",{method:"GET"});m.success&&m.data&&Object.keys(o.value).forEach(l=>{m.data[l]!==void 0?o.value[l]=m.data[l]:m.data[`general.${l}`]!==void 0&&(o.value[l]=m.data[`general.${l}`])}),B.value=!0}catch(m){console.error("Failed to load settings:",m)}finally{h.value=!1}}},Q=async()=>{$.value=!0;try{await S.updateSettings("general",o.value),q("save",o.value)}catch(m){throw console.error("Failed to save settings:",m),m}finally{$.value=!1}},N=U(""),W=U(""),E=U(""),H=U(""),ee=m=>{var p;const l=(p=m.target.files)==null?void 0:p[0];if(l){if(!V(l,"logo"))return;const C=new FileReader;C.onload=Y=>{var n;N.value=(n=Y.target)==null?void 0:n.result,o.value.app_logo=l.name},C.readAsDataURL(l)}},ae=m=>{var p;const l=(p=m.target.files)==null?void 0:p[0];if(l){if(!V(l,"favicon"))return;const C=new FileReader;C.onload=Y=>{var n;W.value=(n=Y.target)==null?void 0:n.result,o.value.app_favicon=l.name},C.readAsDataURL(l)}},re=m=>{var p;const l=(p=m.target.files)==null?void 0:p[0];if(l){if(!V(l,"background"))return;const C=new FileReader;C.onload=Y=>{var n;E.value=(n=Y.target)==null?void 0:n.result,o.value.login_background_image=l.name},C.readAsDataURL(l)}},ue=m=>{var p;const l=(p=m.target.files)==null?void 0:p[0];if(l){if(!V(l,"background"))return;const C=new FileReader;C.onload=Y=>{var n;H.value=(n=Y.target)==null?void 0:n.result,o.value.signup_background_image=l.name},C.readAsDataURL(l)}};ge(()=>{ie()}),oe(()=>g.data,m=>{m&&Object.keys(m).length>0&&Object.keys(o.value).forEach(l=>{m[l]!==void 0&&(o.value[l]=m[l])})},{immediate:!0,deep:!0});const f=x(()=>g.loading||h.value||$.value),V=(m,l)=>{const p={logo:2097152,favicon:1048576,background:5242880},C={logo:["image/jpeg","image/png","image/svg+xml"],favicon:["image/x-icon","image/png","image/jpeg"],background:["image/jpeg","image/png","image/webp"]};return m.size>p[l]?(alert(`File too large. Maximum size for ${l} is ${p[l]/(1024*1024)}MB`),!1):C[l].includes(m.type)?!0:(alert(`Invalid file type for ${l}. Allowed types: ${C[l].join(", ")}`),!1)},D=()=>{o.value={app_name:"Affiliate Platform",app_description:"",app_slogan:"",app_keywords:"",company_name:"",company_email:"",company_phone:"",company_address:"",company_website:"",company_social_facebook:"",company_social_instagram:"",company_social_twitter:"",app_logo:"",app_favicon:"",primary_color:"#6366F1",secondary_color:"#8B5CF6",login_background_image:"",signup_background_image:"",app_theme:"light",default_language:"fr",timezone:"Africa/Casablanca",currency:"MAD",currency_symbol:"MAD",date_format:"DD/MM/YYYY",time_format:"24",number_format:"european",maintenance_mode:!1,registration_enabled:!0,email_verification_required:!0,kyc_verification_required:!0,max_file_upload_size:10,allowed_file_types:"jpg,jpeg,png,pdf,doc,docx",session_timeout:120,password_min_length:8,password_require_special:!0,app_version:"1.0.0"},N.value="",W.value="",E.value="",H.value=""},le=()=>{o.value.primary_color="#6366F1",o.value.secondary_color="#8B5CF6"};return(m,l)=>{const p=ye,C=ve,Y=be;return h.value&&!B.value?(w(),A(P,{key:0},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(F,null,{default:a(()=>[e(z,null,{default:a(()=>[e(ce,{type:"heading, paragraph, divider, heading, paragraph",class:"mb-6"}),e(ce,{type:"heading, paragraph, divider, heading, paragraph",class:"mb-6"}),e(ce,{type:"heading, paragraph, button"})]),_:1})]),_:1})]),_:1})]),_:1})):(w(),A(P,{key:1},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("app_information")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.app_name,"onUpdate:modelValue":l[0]||(l[0]=n=>o.value.app_name=n),label:s(t)("app_name"),placeholder:s(t)("placeholder_app_name")},null,8,["modelValue","label","placeholder"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.app_version,"onUpdate:modelValue":l[1]||(l[1]=n=>o.value.app_version=n),label:s(t)("app_version"),placeholder:"1.0.0",readonly:""},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(C,{modelValue:o.value.app_description,"onUpdate:modelValue":l[2]||(l[2]=n=>o.value.app_description=n),label:s(t)("app_description"),placeholder:s(t)("placeholder_app_description"),rows:"3"},null,8,["modelValue","label","placeholder"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.app_slogan,"onUpdate:modelValue":l[3]||(l[3]=n=>o.value.app_slogan=n),label:s(t)("app_slogan"),placeholder:s(t)("placeholder_app_slogan")},null,8,["modelValue","label","placeholder"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.app_keywords,"onUpdate:modelValue":l[4]||(l[4]=n=>o.value.app_keywords=n),label:s(t)("app_keywords"),placeholder:"SEO keywords, separated by commas"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("company_logo")),1)]),_:1}),e(K,{label:s(t)("choose_logo_file"),"prepend-inner-icon":"tabler-photo",variant:"outlined",accept:"image/*",onChange:ee},null,8,["label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("favicon")),1)]),_:1}),e(K,{label:s(t)("choose_favicon_file"),"prepend-inner-icon":"tabler-world",variant:"outlined",accept:"image/*",onChange:ae},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("company_information")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.company_name,"onUpdate:modelValue":l[5]||(l[5]=n=>o.value.company_name=n),label:s(t)("company_name"),placeholder:s(t)("placeholder_company_name")},null,8,["modelValue","label","placeholder"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.company_email,"onUpdate:modelValue":l[6]||(l[6]=n=>o.value.company_email=n),label:s(t)("company_email"),placeholder:"contact@company.com",type:"email"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.company_phone,"onUpdate:modelValue":l[7]||(l[7]=n=>o.value.company_phone=n),label:s(t)("company_phone"),placeholder:"+212 6 12 34 56 78"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:o.value.company_address,"onUpdate:modelValue":l[8]||(l[8]=n=>o.value.company_address=n),label:s(t)("company_address"),placeholder:"Company address",rows:"3"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.company_website,"onUpdate:modelValue":l[9]||(l[9]=n=>o.value.company_website=n),label:s(t)("company_website"),placeholder:"https://www.company.com",type:"url"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[_("h6",Ue,d(s(t)("social_media_links")),1)]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(p,{modelValue:o.value.company_social_facebook,"onUpdate:modelValue":l[10]||(l[10]=n=>o.value.company_social_facebook=n),label:s(t)("facebook_page"),placeholder:"https://facebook.com/yourpage","prepend-inner-icon":"tabler-brand-facebook"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(p,{modelValue:o.value.company_social_instagram,"onUpdate:modelValue":l[11]||(l[11]=n=>o.value.company_social_instagram=n),label:s(t)("instagram_page"),placeholder:"https://instagram.com/yourpage","prepend-inner-icon":"tabler-brand-instagram"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(p,{modelValue:o.value.company_social_twitter,"onUpdate:modelValue":l[12]||(l[12]=n=>o.value.company_social_twitter=n),label:s(t)("twitter_page"),placeholder:"https://twitter.com/yourpage","prepend-inner-icon":"tabler-brand-twitter"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("branding_appearance")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("app_logo")),1)]),_:1}),e(K,{modelValue:o.value.app_logo,"onUpdate:modelValue":l[13]||(l[13]=n=>o.value.app_logo=n),label:s(t)("choose_logo_file"),"prepend-inner-icon":"tabler-photo",variant:"outlined",accept:"image/*",onChange:ee},null,8,["modelValue","label"]),N.value||o.value.app_logo?(w(),R("div",Ye,[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("preview"))+":",1)]),_:1}),_("div",Me,[_("img",{src:N.value||o.value.app_logo,alt:"Logo Preview",style:{"max-height":"60px","max-width":"200px","object-fit":"contain"}},null,8,Ae)])])):J("",!0),e(_e,{type:"info",variant:"tonal",class:"mt-2",density:"compact"},{default:a(()=>[v(d(s(t)("logo_requirements")),1)]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("app_favicon")),1)]),_:1}),e(K,{modelValue:o.value.app_favicon,"onUpdate:modelValue":l[14]||(l[14]=n=>o.value.app_favicon=n),label:s(t)("choose_favicon_file"),"prepend-inner-icon":"tabler-world",variant:"outlined",accept:"image/*",onChange:ae},null,8,["modelValue","label"]),W.value||o.value.app_favicon?(w(),R("div",Be,[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("preview"))+":",1)]),_:1}),_("div",$e,[_("img",{src:W.value||o.value.app_favicon,alt:"Favicon Preview",style:{height:"32px",width:"32px","object-fit":"contain"}},null,8,De)])])):J("",!0),e(_e,{type:"info",variant:"tonal",class:"mt-2",density:"compact"},{default:a(()=>[v(d(s(t)("favicon_requirements")),1)]),_:1})]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("primary_color")),1)]),_:1}),_("div",Pe,[(w(),R(me,null,pe(Z,n=>e(O,{key:n.value,color:n.color,size:"small",icon:"",onClick:de=>o.value.primary_color=n.value},{default:a(()=>[o.value.primary_color===n.value?(w(),A(j,{key:0,icon:"tabler-check"})):J("",!0)]),_:2},1032,["color","onClick"])),64))]),_("div",je,[e(p,{modelValue:o.value.primary_color,"onUpdate:modelValue":l[15]||(l[15]=n=>o.value.primary_color=n),label:s(t)("custom_color"),type:"color",class:"flex-grow-1"},null,8,["modelValue","label"]),e(O,{color:"secondary",variant:"outlined",size:"small",onClick:l[16]||(l[16]=n=>o.value.primary_color="#6366F1")},{default:a(()=>[v(d(s(t)("reset")),1)]),_:1})])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("secondary_color")),1)]),_:1}),_("div",Te,[(w(),R(me,null,pe(Z,n=>e(O,{key:n.value,color:n.color,size:"small",icon:"",onClick:de=>o.value.secondary_color=n.value},{default:a(()=>[o.value.secondary_color===n.value?(w(),A(j,{key:0,icon:"tabler-check"})):J("",!0)]),_:2},1032,["color","onClick"])),64))]),_("div",Ee,[e(p,{modelValue:o.value.secondary_color,"onUpdate:modelValue":l[17]||(l[17]=n=>o.value.secondary_color=n),label:s(t)("custom_color"),type:"color",class:"flex-grow-1"},null,8,["modelValue","label"]),e(O,{color:"secondary",variant:"outlined",size:"small",onClick:l[18]||(l[18]=n=>o.value.secondary_color="#8B5CF6")},{default:a(()=>[v(d(s(t)("reset")),1)]),_:1})])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("login_background")),1)]),_:1}),e(K,{modelValue:o.value.login_background_image,"onUpdate:modelValue":l[19]||(l[19]=n=>o.value.login_background_image=n),label:s(t)("choose_background_image"),"prepend-inner-icon":"tabler-photo",variant:"outlined",accept:"image/*",onChange:re},null,8,["modelValue","label"]),E.value||o.value.login_background_image?(w(),R("div",Le,[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("preview"))+":",1)]),_:1}),_("div",qe,[_("img",{src:E.value||o.value.login_background_image,alt:"Login Background Preview",style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"4px"}},null,8,Ie)])])):J("",!0)]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("signup_background")),1)]),_:1}),e(K,{modelValue:o.value.signup_background_image,"onUpdate:modelValue":l[20]||(l[20]=n=>o.value.signup_background_image=n),label:s(t)("choose_background_image"),"prepend-inner-icon":"tabler-photo",variant:"outlined",accept:"image/*",onChange:ue},null,8,["modelValue","label"]),H.value||o.value.signup_background_image?(w(),R("div",Re,[e(M,{class:"mb-2"},{default:a(()=>[v(d(s(t)("preview"))+":",1)]),_:1}),_("div",Oe,[_("img",{src:H.value||o.value.signup_background_image,alt:"Signup Background Preview",style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"4px"}},null,8,Ge)])])):J("",!0)]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(Y,{modelValue:o.value.app_theme,"onUpdate:modelValue":l[21]||(l[21]=n=>o.value.app_theme=n),items:se,label:s(t)("app_theme")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("localization")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(Y,{modelValue:o.value.default_language,"onUpdate:modelValue":l[22]||(l[22]=n=>o.value.default_language=n),items:y,label:s(t)("default_language")},{item:a(({props:n,item:de})=>[e(Ce,ke(xe(n)),{prepend:a(()=>[_("span",Ne,d(de.raw.flag),1)]),_:2},1040)]),_:1},8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(Y,{modelValue:o.value.timezone,"onUpdate:modelValue":l[23]||(l[23]=n=>o.value.timezone=n),items:i,label:s(t)("timezone")},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.currency,"onUpdate:modelValue":l[24]||(l[24]=n=>o.value.currency=n),label:s(t)("currency_code"),placeholder:"MAD"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.currency_symbol,"onUpdate:modelValue":l[25]||(l[25]=n=>o.value.currency_symbol=n),label:s(t)("currency_symbol"),placeholder:"MAD"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("format_settings")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"4"},{default:a(()=>[e(Y,{modelValue:o.value.date_format,"onUpdate:modelValue":l[26]||(l[26]=n=>o.value.date_format=n),items:r,label:s(t)("date_format")},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(Y,{modelValue:o.value.time_format,"onUpdate:modelValue":l[27]||(l[27]=n=>o.value.time_format=n),items:k,label:s(t)("time_format")},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(Y,{modelValue:o.value.number_format,"onUpdate:modelValue":l[28]||(l[28]=n=>o.value.number_format=n),items:ne,label:s(t)("number_format")},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(X,{modelValue:o.value.maintenance_mode,"onUpdate:modelValue":l[29]||(l[29]=n=>o.value.maintenance_mode=n),label:s(t)("maintenance_mode"),color:"warning",inset:""},null,8,["modelValue","label"]),_("p",We,d(s(t)("maintenance_mode_description")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("app_behavior_settings")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:o.value.registration_enabled,"onUpdate:modelValue":l[30]||(l[30]=n=>o.value.registration_enabled=n),label:s(t)("registration_enabled"),color:"success",inset:""},null,8,["modelValue","label"]),_("p",He,d(s(t)("registration_enabled_description")),1)]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:o.value.email_verification_required,"onUpdate:modelValue":l[31]||(l[31]=n=>o.value.email_verification_required=n),label:s(t)("email_verification_required"),color:"info",inset:""},null,8,["modelValue","label"]),_("p",Je,d(s(t)("email_verification_description")),1)]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:o.value.kyc_verification_required,"onUpdate:modelValue":l[32]||(l[32]=n=>o.value.kyc_verification_required=n),label:s(t)("kyc_verification_required"),color:"warning",inset:""},null,8,["modelValue","label"]),_("p",Ke,d(s(t)("kyc_verification_description")),1)]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.session_timeout,"onUpdate:modelValue":l[33]||(l[33]=n=>o.value.session_timeout=n),modelModifiers:{number:!0},label:s(t)("session_timeout"),type:"number",min:"30",max:"480",suffix:"minutes"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("file_upload_settings")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.max_file_upload_size,"onUpdate:modelValue":l[34]||(l[34]=n=>o.value.max_file_upload_size=n),modelModifiers:{number:!0},label:s(t)("max_file_upload_size"),type:"number",min:"1",max:"100",suffix:"MB"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.allowed_file_types,"onUpdate:modelValue":l[35]||(l[35]=n=>o.value.allowed_file_types=n),label:s(t)("allowed_file_types"),placeholder:"jpg,jpeg,png,pdf,doc,docx"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(F,{title:s(t)("security_settings")},{default:a(()=>[e(z,null,{default:a(()=>[e(P,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(p,{modelValue:o.value.password_min_length,"onUpdate:modelValue":l[36]||(l[36]=n=>o.value.password_min_length=n),modelModifiers:{number:!0},label:s(t)("password_min_length"),type:"number",min:"6",max:"20"},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:o.value.password_require_special,"onUpdate:modelValue":l[37]||(l[37]=n=>o.value.password_require_special=n),label:s(t)("password_require_special"),color:"error",inset:""},null,8,["modelValue","label"]),_("p",Qe,d(s(t)("password_require_special_description")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[_("div",Xe,[e(O,{color:"primary","prepend-icon":"tabler-device-floppy",loading:f.value,disabled:f.value,onClick:Q},{default:a(()=>[v(d(s(t)("save_general_settings")),1)]),_:1},8,["loading","disabled"]),e(O,{color:"secondary",variant:"outlined","prepend-icon":"tabler-refresh",disabled:f.value,onClick:le},{default:a(()=>[v(d(s(t)("reset_colors")),1)]),_:1},8,["disabled"]),e(O,{color:"warning",variant:"outlined","prepend-icon":"tabler-restore",disabled:f.value,onClick:D},{default:a(()=>[v(d(s(t)("reset_to_defaults")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}))}}}),ea={class:"text-h5 font-weight-bold mb-3"},aa={class:"text-body-1 text-medium-emphasis mb-6"},la=L({__name:"BusinessSettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T();return(S,g)=>(w(),A(F,null,{default:a(()=>[e(z,{class:"text-center pa-12"},{default:a(()=>[e(j,{icon:"tabler-building-store",size:"64",color:"success",class:"mb-4"}),_("h3",ea,d(s(t)("business_config")),1),_("p",aa,d(s(t)("business_settings_coming_soon_description")),1),e(G,{color:"success",variant:"tonal",size:"large","prepend-icon":"tabler-clock"},{default:a(()=>[v(d(s(t)("coming_soon")),1)]),_:1})]),_:1})]),_:1}))}}),oa={class:"text-h5 font-weight-bold mb-3"},ta={class:"text-body-1 text-medium-emphasis mb-6"},na=L({__name:"ShippingSettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T();return U({ozon_api_key:"",ozon_api_secret:"",default_shipping_mode:"ramassage",default_shipping_zone:"casablanca",shipping_fee:25,free_shipping_threshold:500,...c.data}),(g,q)=>(w(),A(F,null,{default:a(()=>[e(z,{class:"text-center pa-12"},{default:a(()=>[e(j,{icon:"tabler-truck-delivery",size:"64",color:"info",class:"mb-4"}),_("h3",oa,d(s(t)("shipping_integration")),1),_("p",ta,d(s(t)("shipping_settings_coming_soon_description")),1),e(G,{color:"info",variant:"tonal",size:"large","prepend-icon":"tabler-clock"},{default:a(()=>[v(d(s(t)("coming_soon")),1)]),_:1})]),_:1})]),_:1}))}}),sa={class:"text-h5 font-weight-bold mb-3"},ia={class:"text-body-1 text-medium-emphasis mb-6"},ra=L({__name:"UserSettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T();return(S,g)=>(w(),A(F,null,{default:a(()=>[e(z,{class:"text-center pa-12"},{default:a(()=>[e(j,{icon:"tabler-users",size:"64",color:"warning",class:"mb-4"}),_("h3",sa,d(s(t)("user_management")),1),_("p",ia,d(s(t)("user_settings_coming_soon_description")),1),e(G,{color:"warning",variant:"tonal",size:"large","prepend-icon":"tabler-clock"},{default:a(()=>[v(d(s(t)("coming_soon")),1)]),_:1})]),_:1})]),_:1}))}}),ua={class:"text-h5 font-weight-bold mb-3"},da=L({__name:"ProductSettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T();return(S,g)=>(w(),A(F,null,{default:a(()=>[e(z,{class:"text-center pa-12"},{default:a(()=>[e(j,{icon:"tabler-package",size:"64",color:"secondary",class:"mb-4"}),_("h3",ua,d(s(t)("product_settings")),1),e(G,{color:"secondary",variant:"tonal",size:"large","prepend-icon":"tabler-clock"},{default:a(()=>[v(d(s(t)("coming_soon")),1)]),_:1})]),_:1})]),_:1}))}}),ca={class:"text-h5 font-weight-bold mb-3"},ma=L({__name:"CommunicationSettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T();return(S,g)=>(w(),A(F,null,{default:a(()=>[e(z,{class:"text-center pa-12"},{default:a(()=>[e(j,{icon:"tabler-mail",size:"64",color:"purple",class:"mb-4"}),_("h3",ca,d(s(t)("communication")),1),e(G,{color:"purple",variant:"tonal",size:"large","prepend-icon":"tabler-clock"},{default:a(()=>[v(d(s(t)("coming_soon")),1)]),_:1})]),_:1})]),_:1}))}}),pa={class:"text-h5 font-weight-bold mb-3"},_a=L({__name:"SecuritySettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T();return(S,g)=>(w(),A(F,null,{default:a(()=>[e(z,{class:"text-center pa-12"},{default:a(()=>[e(j,{icon:"tabler-shield-lock",size:"64",color:"error",class:"mb-4"}),_("h3",pa,d(s(t)("security_privacy")),1),e(G,{color:"error",variant:"tonal",size:"large","prepend-icon":"tabler-clock"},{default:a(()=>[v(d(s(t)("coming_soon")),1)]),_:1})]),_:1})]),_:1}))}}),ga={class:"text-h5 font-weight-bold mb-3"},fa=L({__name:"SystemSettings",props:{data:{},loading:{type:Boolean}},emits:["change","save"],setup(c,{emit:b}){const{t}=T();return(S,g)=>(w(),A(F,null,{default:a(()=>[e(z,{class:"text-center pa-12"},{default:a(()=>[e(j,{icon:"tabler-server",size:"64",color:"grey",class:"mb-4"}),_("h3",ga,d(s(t)("system_config")),1),e(G,{color:"grey",variant:"tonal",size:"large","prepend-icon":"tabler-clock"},{default:a(()=>[v(d(s(t)("coming_soon")),1)]),_:1})]),_:1})]),_:1}))}}),va={class:"d-flex align-center justify-space-between mb-6"},ba={class:"text-h4 font-weight-bold mb-1"},ya={class:"text-body-1 mb-0"},Qa=L({__name:"settings",setup(c){const{t:b}=T(),t=U(!1),S=U("general"),g=U({general:{},business:{},shipping:{},users:{},products:{},communication:{},security:{},system:{}}),q=x(()=>[{value:"general",title:b("general_settings"),icon:"tabler-settings"},{value:"business",title:b("business_config"),icon:"tabler-building-store"},{value:"shipping",title:b("shipping_integration"),icon:"tabler-truck-delivery"},{value:"users",title:b("user_management"),icon:"tabler-users"},{value:"products",title:b("product_settings"),icon:"tabler-package"},{value:"communication",title:b("communication"),icon:"tabler-mail"},{value:"security",title:b("security_privacy"),icon:"tabler-shield-lock"},{value:"system",title:b("system_config"),icon:"tabler-server"}]),o=(y,i,r)=>{g.value[y]||(g.value[y]={}),g.value[y][i]=r},h=async(y,i)=>{try{const r=await te(`/admin/settings/${y}`,{method:"PUT",body:i});return r.success&&(g.value[y]={...g.value[y],...i},console.log("Settings saved successfully:",r.message)),r.success}catch(r){return console.error("Failed to save settings:",r),!1}},$=async()=>{t.value=!0;try{const y=await te("/admin/settings/new",{method:"GET"});y.success&&Object.keys(y.data).forEach(i=>{g.value[i]?g.value[i]={...g.value[i],...y.data[i]}:g.value[i]=y.data[i]})}catch(y){console.error("Failed to load settings:",y)}finally{t.value=!1}},B=()=>{g.value={general:{app_name:"Affiliate Platform",app_description:"",app_tagline:"",app_keywords:"",company_name:"",company_email:"",company_phone:"",company_address:"",company_website:"",company_social_facebook:"",company_social_instagram:"",company_social_twitter:"",app_logo:"",app_favicon:"",primary_color:"#6366F1",secondary_color:"#8B5CF6",login_background_image:"",signup_background_image:"",app_theme:"light",default_language:"fr",timezone:"Africa/Casablanca",currency:"MAD",currency_symbol:"MAD",date_format:"DD/MM/YYYY",time_format:"24",number_format:"european",maintenance_mode:!1,registration_enabled:!0,email_verification_required:!0,kyc_verification_required:!0,max_file_upload_size:10,allowed_file_types:"jpg,jpeg,png,pdf,doc,docx",session_timeout:120,password_min_length:8,password_require_special:!0,app_version:"1.0.0"},business:{},shipping:{},users:{},products:{},communication:{},security:{},system:{}}};return ge(()=>{B(),$()}),(y,i)=>(w(),R("div",null,[_("div",va,[_("div",null,[_("h4",ba,d(s(b)("app_settings")),1),_("p",ya,d(s(b)("configure_app_behavior_preferences")),1)])]),e(Se,{modelValue:S.value,"onUpdate:modelValue":i[0]||(i[0]=r=>S.value=r),class:"v-tabs-pill"},{default:a(()=>[(w(!0),R(me,null,pe(q.value,r=>(w(),A(Fe,{key:r.value,value:r.value},{default:a(()=>[e(j,{size:"20",start:"",icon:r.icon},null,8,["icon"]),v(" "+d(r.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(ze,{modelValue:S.value,"onUpdate:modelValue":i[17]||(i[17]=r=>S.value=r),class:"mt-6 disable-tab-transition",touch:!1},{default:a(()=>[e(I,{value:"general"},{default:a(()=>[e(Ze,{data:g.value.general,loading:t.value,onChange:i[1]||(i[1]=(r,k)=>o("general",r,k)),onSave:i[2]||(i[2]=r=>h("general",r))},null,8,["data","loading"])]),_:1}),e(I,{value:"business"},{default:a(()=>[e(la,{data:g.value.business,loading:t.value,onChange:i[3]||(i[3]=(r,k)=>o("business",r,k)),onSave:i[4]||(i[4]=r=>h("business",r))},null,8,["data","loading"])]),_:1}),e(I,{value:"shipping"},{default:a(()=>[e(na,{data:g.value.shipping,loading:t.value,onChange:i[5]||(i[5]=(r,k)=>o("shipping",r,k)),onSave:i[6]||(i[6]=r=>h("shipping",r))},null,8,["data","loading"])]),_:1}),e(I,{value:"users"},{default:a(()=>[e(ra,{data:g.value.users,loading:t.value,onChange:i[7]||(i[7]=(r,k)=>o("users",r,k)),onSave:i[8]||(i[8]=r=>h("users",r))},null,8,["data","loading"])]),_:1}),e(I,{value:"products"},{default:a(()=>[e(da,{data:g.value.products,loading:t.value,onChange:i[9]||(i[9]=(r,k)=>o("products",r,k)),onSave:i[10]||(i[10]=r=>h("products",r))},null,8,["data","loading"])]),_:1}),e(I,{value:"communication"},{default:a(()=>[e(ma,{data:g.value.communication,loading:t.value,onChange:i[11]||(i[11]=(r,k)=>o("communication",r,k)),onSave:i[12]||(i[12]=r=>h("communication",r))},null,8,["data","loading"])]),_:1}),e(I,{value:"security"},{default:a(()=>[e(_a,{data:g.value.security,loading:t.value,onChange:i[13]||(i[13]=(r,k)=>o("security",r,k)),onSave:i[14]||(i[14]=r=>h("security",r))},null,8,["data","loading"])]),_:1}),e(I,{value:"system"},{default:a(()=>[e(fa,{data:g.value.system,loading:t.value,onChange:i[15]||(i[15]=(r,k)=>o("system",r,k)),onSave:i[16]||(i[16]=r=>h("system",r))},null,8,["data","loading"])]),_:1})]),_:1},8,["modelValue"])]))}});export{Qa as default};
