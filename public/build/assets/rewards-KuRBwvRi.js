import{d as F,aL as I,r as v,V as N,o as U,c as k,f as r,e,v as s,n as o,g as t,ac as V,b6 as j,b as x,t as i,az as m,h as A}from"./main-DEzoUo6n.js";import{V as u,b as y}from"./VCard-BQBmQiQJ.js";import{V as f}from"./VCardText-DtKfeQ8i.js";import{V as E}from"./VAvatar-DcdpS4jo.js";import{V as L,a as w}from"./VRow-CCKjjrNU.js";import{V as C}from"./VTextField-BiqUvfe6.js";import{V as M}from"./VDataTableServer-BPywD3NC.js";import{V as D}from"./VChip-BLx6lUDe.js";import{V as O}from"./VAlert--Qma1TSN.js";import"./createSimpleFunctional-DUhC6iZd.js";import"./VImg-Dcm3Nb79.js";/* empty css              */import"./VField-BrxQSdNw.js";import"./forwardRefs-BYcTBJDs.js";import"./VDataTable-CY4RDaZO.js";import"./VPagination-BwetZgLf.js";import"./VSelect-DRK_p5uX.js";import"./VList-PlS4cpk2.js";import"./ssrBoot-BNMsj90G.js";import"./VDivider-96JDmIpb.js";import"./dialog-transition-PfMbSZsR.js";import"./VMenu-CAJpv2vQ.js";import"./VOverlay-D7sMErQR.js";import"./lazy-BPEwf1-U.js";import"./VCheckboxBtn-ispl65Ef.js";import"./VTable-pKKqnQcU.js";import"./filter-C0NlBkaG.js";const P={class:"d-flex justify-space-between align-center mb-6"},R={class:"text-h4 font-weight-bold mb-1"},$={class:"text-body-1 mb-0"},q={class:"text-h2 font-weight-bold text-success mb-2"},G={class:"text-h6 mb-0"},H={class:"d-flex gap-2"},J={class:"text-wrap",style:{"max-width":"300px"}},K={key:1,class:"text-medium-emphasis"},Q={class:"text-center py-8"},W={class:"text-h6 mb-2"},X={class:"text-body-2"},Y={class:"mt-4"},Z={class:"text-h6 mb-2"},ee={class:"text-body-2"},Te=F({__name:"rewards",setup(te){const{t:a}=I(),h=v(!1),d=v({dispensations:[],total_points:0,pagination:{current_page:1,last_page:1,per_page:15,total:0}}),c=v({start_date:"",end_date:""}),z=N(()=>[{title:a("points"),key:"points",sortable:!0},{title:a("comment"),key:"comment",sortable:!1},{title:a("reference"),key:"reference",sortable:!1},{title:a("date"),key:"created_at",sortable:!0}]),_=async(p=1)=>{h.value=!0;try{const n={page:p,per_page:d.value.pagination.per_page,...c.value};Object.keys(n).forEach(g=>{(n[g]===""||n[g]===null)&&delete n[g]});const l=await j.get("/affiliate/referrals/dispensations",{params:n});l.data.success&&(d.value=l.data.data)}catch(n){console.error("Failed to fetch dispensations:",n)}finally{h.value=!1}},b=()=>{d.value.pagination.current_page=1,_()},B=()=>{c.value={start_date:"",end_date:""},_()},T=p=>new Date(p).toLocaleDateString(),S=p=>`+${p} pts`;return U(()=>{_()}),(p,n)=>(x(),k("div",null,[r("div",P,[r("div",null,[r("h1",R,s(o(a)("my_rewards_history")),1),r("p",$,s(o(a)("rewards_history_subtitle")),1)]),e(V,{color:"primary",to:"/affiliate/referrals"},{default:t(()=>[e(m,{start:"",icon:"tabler-arrow-left"}),i(" "+s(o(a)("back_to_dashboard")),1)]),_:1})]),e(u,{class:"mb-6"},{default:t(()=>[e(f,{class:"text-center"},{default:t(()=>[e(E,{color:"success",variant:"tonal",size:"64",class:"mb-4"},{default:t(()=>[e(m,{icon:"tabler-award",size:"32"})]),_:1}),r("h2",q,s(d.value.total_points),1),r("p",G,s(o(a)("total_points_earned")),1)]),_:1})]),_:1}),e(u,{class:"mb-6"},{default:t(()=>[e(y,null,{default:t(()=>[i(s(o(a)("filters")),1)]),_:1}),e(f,null,{default:t(()=>[e(L,null,{default:t(()=>[e(w,{cols:"12",md:"4"},{default:t(()=>[e(C,{modelValue:c.value.start_date,"onUpdate:modelValue":n[0]||(n[0]=l=>c.value.start_date=l),type:"date",label:o(a)("start_date"),onChange:b},null,8,["modelValue","label"])]),_:1}),e(w,{cols:"12",md:"4"},{default:t(()=>[e(C,{modelValue:c.value.end_date,"onUpdate:modelValue":n[1]||(n[1]=l=>c.value.end_date=l),type:"date",label:o(a)("end_date"),onChange:b},null,8,["modelValue","label"])]),_:1}),e(w,{cols:"12",md:"4"},{default:t(()=>[r("div",H,[e(V,{color:"primary",onClick:b},{default:t(()=>[i(s(o(a)("search")),1)]),_:1}),e(V,{variant:"outlined",onClick:B},{default:t(()=>[i(s(o(a)("clear")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(y,{class:"d-flex align-center"},{default:t(()=>[e(m,{icon:"tabler-gift",class:"me-2"}),i(" "+s(o(a)("rewards_history")),1)]),_:1}),e(f,null,{default:t(()=>[e(M,{page:d.value.pagination.current_page,"onUpdate:page":[n[2]||(n[2]=l=>d.value.pagination.current_page=l),_],headers:z.value,items:d.value.dispensations,"items-length":d.value.pagination.total,"items-per-page":d.value.pagination.per_page,loading:h.value,class:"text-no-wrap"},{"item.points":t(({item:l})=>[e(D,{color:"success",size:"small"},{default:t(()=>[i(s(S(l.points)),1)]),_:2},1024)]),"item.comment":t(({item:l})=>[r("div",J,s(l.comment),1)]),"item.reference":t(({item:l})=>[l.reference?(x(),A(D,{key:0,color:"info",size:"small",variant:"outlined"},{default:t(()=>[i(s(l.reference),1)]),_:2},1024)):(x(),k("span",K,"-"))]),"item.created_at":t(({item:l})=>[i(s(T(l.created_at)),1)]),"no-data":t(()=>[r("div",Q,[e(m,{icon:"tabler-gift-off",size:"64",class:"mb-4",color:"disabled"}),r("h6",W,s(o(a)("no_rewards_yet")),1),r("p",X,s(o(a)("no_rewards_yet_description")),1)])]),_:1},8,["page","headers","items","items-length","items-per-page","loading"])]),_:1})]),_:1}),e(u,{class:"mt-6"},{default:t(()=>[e(y,null,{default:t(()=>[i(s(o(a)("about_rewards")),1)]),_:1}),e(f,null,{default:t(()=>[e(O,{type:"info",variant:"tonal"},{default:t(()=>[i(s(o(a)("rewards_explanation")),1)]),_:1}),r("div",Y,[r("h6",Z,s(o(a)("how_to_earn_more")),1),r("ul",ee,[r("li",null,s(o(a)("earn_tip_1")),1),r("li",null,s(o(a)("earn_tip_2")),1),r("li",null,s(o(a)("earn_tip_3")),1)])])]),_:1})]),_:1})]))}});export{Te as default};
