import{d as D,aL as S,r as h,V as B,o as I,c as C,b as g,f as r,e,v as l,n as s,g as t,az as d,F,j as N,h as R,t as i,ac as y,b6 as q}from"./main-DnYrbSQO.js";import{V as w,a as _}from"./VRow-B-6WkvV7.js";import{V as z}from"./VTextField-BFgmXL2S.js";import{V as u,b as V}from"./VCard-om2cqSxr.js";import{V as p}from"./VCardText-ByjN3mlm.js";import{V as T}from"./VAvatar-BwJp41ss.js";import{V as L}from"./VDataTable-DKYwtbC2.js";import{V as v}from"./VChip-CjuV2Q4G.js";/* empty css              */import"./VField-CQs8lPb7.js";import"./VImg-CrKU03S9.js";import"./forwardRefs-CKYzHDJS.js";import"./createSimpleFunctional-D0EIrpo1.js";import"./VPagination-08TpqLBG.js";import"./VSelect-CKLjvmQy.js";import"./VList-DOWShsA2.js";import"./ssrBoot-DYjajp4c.js";import"./VDivider-u64Rz-6W.js";import"./dialog-transition-DVo_RrAy.js";import"./VMenu-Bwc3jIko.js";import"./VOverlay-B2NeWL_F.js";import"./lazy-tUmo4pC_.js";import"./VCheckboxBtn-CH3WdWXy.js";import"./VTable-CrO6KCbh.js";import"./filter-Dgd-zPx5.js";const O={class:"d-flex justify-space-between align-center mb-6"},U={class:"text-h4 font-weight-bold mb-1"},A={class:"text-body-1 mb-0"},E={class:"text-h6 mb-0"},M={class:"text-body-2 mb-0"},$={class:"d-flex align-center"},G={class:"font-weight-medium"},H={class:"font-weight-medium text-success"},J={class:"text-center py-8"},K={class:"text-h6 mb-2"},P={class:"text-body-2"},Q={class:"d-flex justify-space-between mb-2"},W={class:"font-weight-medium"},X={class:"d-flex justify-space-between mb-2"},Y={class:"d-flex justify-space-between"},Ce=D({__name:"dashboard",setup(Z){const{t:a}=S(),b=h(!1),n=h({overview:{total_clicks:0,total_signups:0,verified_signups:0,conversion_rate:0,verified_conversion_rate:0,total_points_awarded:0,active_referrers:0},top_referrers:[],date_range:{start_date:"",end_date:""}}),c=h({start_date:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),j=B(()=>[{title:a("referral_total_clicks"),value:n.value.overview.total_clicks,icon:"tabler-click",color:"primary"},{title:a("referral_total_signups"),value:n.value.overview.total_signups,icon:"tabler-user-plus",color:"success"},{title:a("referral_verified_signups"),value:n.value.overview.verified_signups,icon:"tabler-user-check",color:"info"},{title:a("referral_conversion_rate"),value:`${n.value.overview.conversion_rate}%`,icon:"tabler-trending-up",color:"warning"},{title:a("referral_points_awarded"),value:n.value.overview.total_points_awarded,icon:"tabler-award",color:"secondary"},{title:a("referral_active_referrers"),value:n.value.overview.active_referrers,icon:"tabler-users",color:"error"}]),x=async()=>{b.value=!0;try{const f=await q.get("/admin/referrals/dashboard/stats",{params:{start_date:c.value.start_date,end_date:c.value.end_date}});f.data.success&&(n.value=f.data.data)}catch(f){console.error("Failed to fetch referral stats:",f)}finally{b.value=!1}},k=()=>{x()};return I(()=>{x()}),(f,m)=>(g(),C("div",null,[r("div",O,[r("div",null,[r("h1",U,l(s(a)("referral_dashboard")),1),r("p",A,l(s(a)("referral_dashboard_subtitle")),1)]),e(u,{class:"pa-4",style:{"min-width":"300px"}},{default:t(()=>[e(w,{"no-gutters":""},{default:t(()=>[e(_,{cols:"5"},{default:t(()=>[e(z,{modelValue:c.value.start_date,"onUpdate:modelValue":m[0]||(m[0]=o=>c.value.start_date=o),type:"date",label:s(a)("start_date"),density:"compact",variant:"outlined",onChange:k},null,8,["modelValue","label"])]),_:1}),e(_,{cols:"2",class:"d-flex align-center justify-center"},{default:t(()=>[e(d,{icon:"tabler-arrow-right",size:"20"})]),_:1}),e(_,{cols:"5"},{default:t(()=>[e(z,{modelValue:c.value.end_date,"onUpdate:modelValue":m[1]||(m[1]=o=>c.value.end_date=o),type:"date",label:s(a)("end_date"),density:"compact",variant:"outlined",onChange:k},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),e(w,{class:"mb-6"},{default:t(()=>[(g(!0),C(F,null,N(j.value,o=>(g(),R(_,{key:o.title,cols:"12",sm:"6",lg:"4",xl:"2"},{default:t(()=>[e(u,null,{default:t(()=>[e(p,{class:"d-flex align-center"},{default:t(()=>[e(T,{color:o.color,variant:"tonal",size:"40",class:"me-4"},{default:t(()=>[e(d,{icon:o.icon,size:"24"},null,8,["icon"])]),_:2},1032,["color"]),r("div",null,[r("h6",E,l(o.value),1),r("p",M,l(o.title),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(u,{class:"mb-6"},{default:t(()=>[e(V,{class:"d-flex align-center"},{default:t(()=>[e(d,{icon:"tabler-trophy",class:"me-2"}),i(" "+l(s(a)("referral_top_referrers")),1)]),_:1}),e(p,null,{default:t(()=>[e(L,{headers:[{title:s(a)("affiliate"),key:"affiliate_name"},{title:s(a)("email"),key:"affiliate_email"},{title:s(a)("total_referrals"),key:"total_referrals"},{title:s(a)("verified_referrals"),key:"verified_referrals"},{title:s(a)("total_points"),key:"total_points"}],items:n.value.top_referrers,loading:b.value,class:"text-no-wrap"},{"item.affiliate_name":t(({item:o})=>[r("div",$,[e(T,{size:"32",class:"me-3"},{default:t(()=>[e(d,{icon:"tabler-user"})]),_:1}),r("span",G,l(o.affiliate_name),1)])]),"item.total_referrals":t(({item:o})=>[e(v,{color:o.total_referrals>10?"success":"default",size:"small"},{default:t(()=>[i(l(o.total_referrals),1)]),_:2},1032,["color"])]),"item.verified_referrals":t(({item:o})=>[e(v,{color:o.verified_referrals>5?"info":"default",size:"small"},{default:t(()=>[i(l(o.verified_referrals),1)]),_:2},1032,["color"])]),"item.total_points":t(({item:o})=>[r("span",H,l(o.total_points||0)+" pts ",1)]),"no-data":t(()=>[r("div",J,[e(d,{icon:"tabler-users-off",size:"64",class:"mb-4",color:"disabled"}),r("h6",K,l(s(a)("no_referrers_yet")),1),r("p",P,l(s(a)("no_referrers_description")),1)])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(_,{cols:"12",md:"6"},{default:t(()=>[e(u,null,{default:t(()=>[e(V,null,{default:t(()=>[i(l(s(a)("quick_actions")),1)]),_:1}),e(p,null,{default:t(()=>[e(y,{block:"",color:"primary",class:"mb-3",to:{name:"admin-referrals-referred-users"}},{default:t(()=>[e(d,{start:"",icon:"tabler-users"}),i(" "+l(s(a)("view_referred_users")),1)]),_:1}),e(y,{block:"",color:"secondary",class:"mb-3",to:{name:"admin-referrals-dispensations"}},{default:t(()=>[e(d,{start:"",icon:"tabler-gift"}),i(" "+l(s(a)("manage_dispensations")),1)]),_:1}),e(y,{block:"",color:"info",to:{name:"admin-referrals-referred-users"}},{default:t(()=>[e(d,{start:"",icon:"tabler-chart-line"}),i(" "+l(s(a)("performance_analysis")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{cols:"12",md:"6"},{default:t(()=>[e(u,null,{default:t(()=>[e(V,null,{default:t(()=>[i(l(s(a)("system_info")),1)]),_:1}),e(p,null,{default:t(()=>[r("div",Q,[r("span",null,l(s(a)("attribution_window"))+":",1),r("span",W,"30 "+l(s(a)("days")),1)]),r("div",X,[r("span",null,l(s(a)("verification_required"))+":",1),e(v,{color:"success",size:"small"},{default:t(()=>[i(l(s(a)("yes")),1)]),_:1})]),r("div",Y,[r("span",null,l(s(a)("reward_type"))+":",1),e(v,{color:"info",size:"small"},{default:t(()=>[i(l(s(a)("manual_points")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{Ce as default};
