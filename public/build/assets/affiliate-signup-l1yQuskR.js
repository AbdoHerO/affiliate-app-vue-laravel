import{V as D}from"./VField-BrxQSdNw.js";import{V as de}from"./VTextarea-BfvN6PTe.js";import{d as F,V as B,cY as U,by as K,c as I,b,h as A,m as L,e as t,n as e,cZ as O,j as Q,b0 as q,b1 as R,x as X,g as l,z as ee,b5 as pe,r as V,b6 as M,aL as me,u as fe,o as _e,a as ge,f as r,E as ve,ac as T,t as S,v as c,az as P,aW as be}from"./main-DEzoUo6n.js";import{V as Ve}from"./VSelect-DRK_p5uX.js";import{_ as he}from"./AppTextField.vue_vue_type_script_setup_true_lang-B6_Db-rl.js";import{u as J,a as ye,b as ke}from"./misc-mask-light-CXPalxaE.js";import{a as xe,b as we,c as Se,d as Ce}from"./auth-v2-login-illustration-light-CZAH_Qyi.js";import{V as Ie}from"./VNodeRenderer-BpdtYH3f.js";import{u as Ae}from"./useFormErrors-C8Y5_5Yb.js";import{u as Le}from"./useNotifications-Bc6GUAmT.js";import{u as $e}from"./useFacebookPixel-CdsLBNvo.js";import{a as p,V as W}from"./VRow-CCKjjrNU.js";import{V as Ee}from"./VImg-Dcm3Nb79.js";import{V as Te}from"./VCard-BQBmQiQJ.js";import{V as Y}from"./VCardText-DtKfeQ8i.js";import{V as Z}from"./VAlert--Qma1TSN.js";import{V as Be}from"./VForm-rtEvNB7m.js";import{V as Ue}from"./VCheckbox-BgUxiM5L.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./forwardRefs-BYcTBJDs.js";import"./VTextField-BiqUvfe6.js";import"./VList-PlS4cpk2.js";import"./ssrBoot-BNMsj90G.js";import"./createSimpleFunctional-DUhC6iZd.js";import"./VAvatar-DcdpS4jo.js";import"./VDivider-96JDmIpb.js";import"./dialog-transition-PfMbSZsR.js";import"./VMenu-CAJpv2vQ.js";import"./VOverlay-D7sMErQR.js";import"./lazy-BPEwf1-U.js";import"./VCheckboxBtn-ispl65Ef.js";import"./VChip-BLx6lUDe.js";import"./settings-DmzVLnCY.js";/* empty css              */const Re=F({name:"AppTextarea",inheritAttrs:!1,__name:"AppTextarea",setup(C){const s=B(()=>{const _=U().id,g=K();return _?`app-textarea-${_}`:g}),m=B(()=>U().label);return(o,_)=>(b(),I("div",{class:X(["app-textarea flex-grow-1",o.$attrs.class])},[e(m)?(b(),A(D,{key:0,for:e(s),class:"mb-1 text-body-2",text:e(m)},null,8,["for","text"])):L("",!0),t(de,q(R({...o.$attrs,class:null,label:void 0,variant:"outlined",id:e(s)})),O({_:2},[Q(o.$slots,(g,v)=>({name:v,fn:l(h=>[ee(o.$slots,v,q(R(h||{})))])}))]),1040)],2))}}),Me=F({name:"AppSelect",inheritAttrs:!1,__name:"AppSelect",setup(C){const s=B(()=>{const _=U().id,g=K();return _?`app-select-${_}`:g}),m=B(()=>U().label);return(o,_)=>(b(),I("div",{class:X(["app-select flex-grow-1",o.$attrs.class])},[e(m)?(b(),A(D,{key:0,for:e(s),class:"mb-1 text-body-2",style:{"line-height":"15px"},text:e(m)},null,8,["for","text"])):L("",!0),t(Ve,q(R({...o.$attrs,class:null,label:void 0,variant:"outlined",id:e(s),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",o.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),O({_:2},[Q(o.$slots,(g,v)=>({name:v,fn:l(h=>[ee(o.$slots,v,q(R(h||{})))])}))]),1040)],2))}}),je=pe("affiliateSignup",()=>{const C=V(!1),s=V(!1),m=V(null),o=V(null);return{isLoading:C,isResending:s,lastSignupEmail:m,lastExpiresAt:o,signup:async h=>{var k,x,w;C.value=!0;try{const d=await M.post("/public/affiliates/signup",h);return d.data.success&&(m.value=((k=d.data.data)==null?void 0:k.email)||null,o.value=((x=d.data.data)==null?void 0:x.expires_at)||null),d.data}catch(d){return(w=d.response)!=null&&w.data?d.response.data:{success:!1,message:"Une erreur rÃ©seau est survenue. Veuillez rÃ©essayer."}}finally{C.value=!1}},resendVerification:async h=>{var k,x,w;s.value=!0;try{const d=await M.post("/public/affiliates/resend-verification",{email:h});return d.data.success&&(m.value=((k=d.data.data)==null?void 0:k.email)||null,o.value=((x=d.data.data)==null?void 0:x.expires_at)||null),d.data}catch(d){return(w=d.response)!=null&&w.data?d.response.data:{success:!1,message:"Une erreur rÃ©seau est survenue. Veuillez rÃ©essayer."}}finally{s.value=!1}},clearData:()=>{m.value=null,o.value=null}}}),ze={class:"position-relative bg-background w-100 me-0"},Pe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"100px"}},De=["src"],Fe={key:0},Ne={class:"mb-4"},Ge={class:"text-h4 mb-1"},He={class:"mb-0"},Je={key:1},We={class:"text-center mb-4"},Ye={class:"text-h4 mb-1 text-success"},Ze={class:"text-h6 mb-4 text-medium-emphasis"},Ke={class:"mb-4 text-center"},Oe={class:"mb-2"},Qe={class:"ps-4"},Xe={class:"d-flex gap-4 justify-center"},ea={class:"mb-1"},aa={class:"mb-0 text-sm"},sa={class:"d-flex align-center"},ta={key:0,class:"text-error text-caption mt-1"},la=F({__name:"affiliate-signup",setup(C){const{t:s}=me(),m=fe(),o=je(),{showSuccess:_,showError:g}=Le(),{errors:v,set:h,clear:k}=Ae(),{trackViewContent:x,trackCompleteRegistration:w,trackLead:d}=$e(),f=u=>v[u]||[],N=u=>!!(v[u]&&v[u].length>0),n=V({nom_complet:"",email:"",telephone:"",password:"",password_confirmation:"",adresse:"",ville:"",pays:"Maroc",rib:"",bank_type:"",notes:"",accept_terms:!1}),$=V(!1),E=V(!1),j=V(!1),G=V(""),z=V(null),ae=["Maroc","France","AlgÃ©rie","Tunisie","Espagne","Belgique","Suisse","Canada","Autre"],se=["Attijariwafa Bank","Banque Populaire","BMCE Bank","BMCI","CIH Bank","CrÃ©dit Agricole","CrÃ©dit du Maroc","SociÃ©tÃ© GÃ©nÃ©rale","Autre"],te=async()=>{k();try{const u={...n.value,referral_code:G.value},a=await o.signup(u);a.success?(_(a.message),j.value=!0,w(0,"MAD"),d({page:"email_verification_wait"})):a.errors?h(a.errors):g(a.message)}catch{g(s("affiliate_signup_unexpected_error"))}},le=async()=>{if(o.lastSignupEmail)try{const u=await o.resendVerification(o.lastSignupEmail);u.success?_(u.message):g(u.message)}catch{g(s("affiliate_signup_resend_error"))}},re=async u=>{try{const a=await M.get(`/api/public/referrals/info?ref=${u}`);a.data.success&&(z.value=a.data.data)}catch(a){console.error("Failed to fetch referral info:",a)}},oe=async u=>{try{await M.post("/api/public/referrals/track-click",{ref:u,source:"web"})}catch(a){console.error("Failed to track referral click:",a)}},ne=J(Ce,Se,we,xe,!0),ie=J(ke,ye);return _e(()=>{x({page:"affiliate_signup"});const u=m.query.ref;u&&(G.value=u,oe(u),re(u))}),(u,a)=>{const y=he,H=Me,ue=Re,ce=ge("RouterLink");return b(),A(W,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:l(()=>[t(p,{lg:"7",md:"6",class:"d-none d-md-flex"},{default:l(()=>[r("div",ze,[r("div",Pe,[t(Ee,{"max-width":"500",src:e(ne),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),r("img",{class:"auth-footer-mask",src:e(ie),alt:"auth-footer-mask",height:"280",width:"100"},null,8,De)])]),_:1}),t(p,{cols:"12",md:"6",lg:"5",class:"auth-card-v2 d-flex align-center justify-center"},{default:l(()=>[t(Te,{flat:"","max-width":600,class:"mt-12 mt-sm-0 pa-6 w-100",style:{"max-width":"100% !important"}},{default:l(()=>[t(Y,null,{default:l(()=>[t(e(Ie),{nodes:e(ve).app.logo,class:"mb-6"},null,8,["nodes"]),j.value?(b(),I("div",Je,[r("div",We,[t(P,{icon:"tabler-circle-check",color:"success",size:"64",class:"mb-3"}),r("h4",Ye," ðŸŽ‰ "+c(e(s)("thank_you_registration_complete")),1),r("p",Ze,c(e(s)("welcome_to_our_affiliate_network")),1)]),r("p",Ke,[S(c(e(s)("verification_email_sent_to"))+" ",1),r("strong",null,c(e(o).lastSignupEmail),1)]),t(Z,{type:"success",variant:"tonal",class:"mb-4"},{prepend:l(()=>[t(P,{icon:"tabler-gift"})]),default:l(()=>[r("p",Oe,[r("strong",null,c(e(s)("congratulations_next_steps"))+":",1)]),r("ol",Qe,[r("li",null,c(e(s)("click_verification_link_in_email")),1),r("li",null,c(e(s)("wait_for_application_approval")),1),r("li",null,c(e(s)("receive_login_credentials")),1),r("li",null,c(e(s)("start_earning_commissions")),1)])]),_:1}),r("div",Xe,[t(T,{variant:"outlined",onClick:le,loading:e(o).isResending,"prepend-icon":"tabler-refresh"},{default:l(()=>[S(c(e(s)("resend_verification_email")),1)]),_:1},8,["loading"]),t(T,{color:"primary",to:{name:"login"},"prepend-icon":"tabler-arrow-left"},{default:l(()=>[S(c(e(s)("actions.backToLogin")),1)]),_:1})])])):(b(),I("div",Fe,[r("div",Ne,[t(T,{to:{name:"login"},variant:"text",size:"small","prepend-icon":"tabler-arrow-left",class:"text-primary"},{default:l(()=>[S(c(e(s)("actions.backToLogin")),1)]),_:1})]),r("h4",Ge," ðŸš€ "+c(e(s)("join_our_affiliate_network")),1),r("p",He,c(e(s)("start_earning_commissions_today")),1)]))]),_:1}),j.value?L("",!0):(b(),A(Y,{key:0},{default:l(()=>[t(Be,{onSubmit:be(te,["prevent"])},{default:l(()=>[z.value?(b(),A(Z,{key:0,type:"info",variant:"tonal",class:"mb-6"},{prepend:l(()=>[t(P,{icon:"tabler-user-plus"})]),default:l(()=>[r("div",null,[r("p",ea,[S(c(e(s)("referred_by"))+": ",1),r("strong",null,c(z.value.referrer_name),1)]),r("p",aa,c(e(s)("referral_bonus_info")),1)])]),_:1})):L("",!0),t(W,null,{default:l(()=>[t(p,{cols:"12"},{default:l(()=>[t(y,{modelValue:n.value.nom_complet,"onUpdate:modelValue":a[0]||(a[0]=i=>n.value.nom_complet=i),autofocus:"",label:e(s)("form_full_name_required"),placeholder:e(s)("full_name_placeholder"),"error-messages":f("nom_complet")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:l(()=>[t(y,{modelValue:n.value.email,"onUpdate:modelValue":a[1]||(a[1]=i=>n.value.email=i),label:e(s)("form_email_required"),type:"email",placeholder:e(s)("email_placeholder"),"error-messages":f("email")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:l(()=>[t(y,{modelValue:n.value.telephone,"onUpdate:modelValue":a[2]||(a[2]=i=>n.value.telephone=i),label:e(s)("form_phone_required"),placeholder:e(s)("phone_placeholder"),"error-messages":f("telephone")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:l(()=>[t(y,{modelValue:n.value.password,"onUpdate:modelValue":a[3]||(a[3]=i=>n.value.password=i),label:e(s)("form_password_required"),placeholder:e(s)("password_placeholder"),type:$.value?"text":"password","append-inner-icon":$.value?"tabler-eye-off":"tabler-eye","error-messages":f("password"),"onClick:appendInner":a[4]||(a[4]=i=>$.value=!$.value)},null,8,["modelValue","label","placeholder","type","append-inner-icon","error-messages"])]),_:1}),t(p,{cols:"12",md:"6"},{default:l(()=>[t(y,{modelValue:n.value.password_confirmation,"onUpdate:modelValue":a[5]||(a[5]=i=>n.value.password_confirmation=i),label:e(s)("form_password_confirmation_required"),placeholder:e(s)("password_placeholder"),type:E.value?"text":"password","append-inner-icon":E.value?"tabler-eye-off":"tabler-eye","error-messages":f("password_confirmation"),"onClick:appendInner":a[6]||(a[6]=i=>E.value=!E.value)},null,8,["modelValue","label","placeholder","type","append-inner-icon","error-messages"])]),_:1}),t(p,{cols:"12"},{default:l(()=>[t(y,{modelValue:n.value.adresse,"onUpdate:modelValue":a[7]||(a[7]=i=>n.value.adresse=i),label:e(s)("form_address_required"),placeholder:e(s)("affiliate_signup_address_placeholder"),"error-messages":f("adresse")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:l(()=>[t(y,{modelValue:n.value.ville,"onUpdate:modelValue":a[8]||(a[8]=i=>n.value.ville=i),label:e(s)("form_city_required"),placeholder:e(s)("city_placeholder"),"error-messages":f("ville")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:l(()=>[t(H,{modelValue:n.value.pays,"onUpdate:modelValue":a[9]||(a[9]=i=>n.value.pays=i),label:"Pays *",items:ae,"error-messages":f("pays")},null,8,["modelValue","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:l(()=>[t(H,{modelValue:n.value.bank_type,"onUpdate:modelValue":a[10]||(a[10]=i=>n.value.bank_type=i),label:e(s)("form_bank_type_required"),placeholder:e(s)("affiliate_signup_bank_placeholder"),items:se,"error-messages":f("bank_type")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12",sm:"6"},{default:l(()=>[t(y,{modelValue:n.value.rib,"onUpdate:modelValue":a[11]||(a[11]=i=>n.value.rib=i),label:e(s)("form_rib_required"),placeholder:e(s)("rib_placeholder"),style:{"font-family":"monospace"},"error-messages":f("rib")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12"},{default:l(()=>[t(ue,{modelValue:n.value.notes,"onUpdate:modelValue":a[12]||(a[12]=i=>n.value.notes=i),label:e(s)("form_notes_optional"),placeholder:e(s)("affiliate_signup_experience_placeholder"),rows:"3","error-messages":f("notes")},null,8,["modelValue","label","placeholder","error-messages"])]),_:1}),t(p,{cols:"12"},{default:l(()=>[r("div",sa,[t(Ue,{id:"accept-terms",modelValue:n.value.accept_terms,"onUpdate:modelValue":a[13]||(a[13]=i=>n.value.accept_terms=i),error:N("accept_terms")},null,8,["modelValue","error"]),t(D,{for:"accept-terms",class:"text-sm",style:{opacity:"1"}},{default:l(()=>a[14]||(a[14]=[r("span",{class:"me-1"},"J'accepte les",-1),r("a",{href:"javascript:void(0)",class:"text-primary"},"conditions d'utilisation",-1),r("span",{class:"mx-1"},"et la",-1),r("a",{href:"javascript:void(0)",class:"text-primary"},"politique de confidentialitÃ©",-1)])),_:1,__:[14]})]),N("accept_terms")?(b(),I("div",ta,c(f("accept_terms")),1)):L("",!0)]),_:1}),t(p,{cols:"12"},{default:l(()=>[t(T,{block:"",type:"submit",loading:e(o).isLoading},{default:l(()=>a[15]||(a[15]=[S(" S'inscrire comme affiliÃ© ")])),_:1,__:[15]},8,["loading"])]),_:1}),t(p,{cols:"12",class:"text-center"},{default:l(()=>[a[17]||(a[17]=r("span",{class:"text-sm"},"Vous avez dÃ©jÃ  un compte ?",-1)),t(ce,{class:"text-primary ms-1 text-sm",to:{name:"login"}},{default:l(()=>a[16]||(a[16]=[S(" Se connecter ")])),_:1,__:[16]})]),_:1,__:[17]})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),za=qe(la,[["__scopeId","data-v-c93949f4"]]);export{za as default};
