import{u as Ve}from"./useAuth-CtoFjAb0.js";import{b4 as Se,r as I,V as u,aj as ce,Z as me,as as $e,b9 as De,w as K,D as fe,a2 as ve,b as e,p as P,a0 as Ae,ba as ze,F as W,aB as Te,ac as z,b1 as _e,d as Y,c as E,o as d,f as t,g as _,i as N,aV as se,m as l,J as Re,az as S,e as n,t as i,aF as Ie,aL as pe,G as Le,s as h,v as Pe,l as X,bb as Ee,bc as Be}from"./main-uLG9IIeX.js";import{$ as ee}from"./api-DSi3Suj8.js";import{u as Oe}from"./useNotifications-DDBS_wPD.js";import{_ as je,u as Fe,S as Me,E as We,M as Ne,a as Ue,b as Ge,D as qe}from"./MixedChart-BU0yZ_mf.js";import{_ as He}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-nczKusLe.js";import{V as U,a as Je,b as ae}from"./VCard-CB1gT6RB.js";import{a as le,m as Ze,V as re,b as Ke}from"./VWindowItem-DPvP18Ki.js";import{V as j}from"./VCardText-BZtszuIK.js";import{V as ne,m as Qe}from"./VImg-BS6_svHJ.js";import{V as G,a as T}from"./VRow-aGfXYx3U.js";import{V as te}from"./VChip-B84WcmDa.js";import{u as Xe,m as Ye,S as ea,P as aa}from"./MixedChart.vue_vue_type_style_index_0_scoped_14692a4d_lang-DJnNojsB.js";import{V as ta,a as sa,b as oa,d as la}from"./VList-uZDByhc2.js";import{V as Q}from"./VAvatar-bHPDEsYY.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as ra,S as na}from"./AdvancedStatsCard-CP5nLFwL.js";import{V as ie}from"./VDivider-UqGR4x4D.js";import{V as H}from"./VTooltip-Ce3bfmSx.js";import{V as de}from"./VTextField-Dxeq5kx5.js";import{V as ia}from"./VMenu-DP1p-55V.js";import{V as da}from"./VAlert-TgguXW_5.js";import{V as ua}from"./VSelect-sWnAtot-.js";import{V as ue}from"./VDataTable-DNqSzzrc.js";import"./index-D-EbNoF1.js";import"./VBreadcrumbs-D7yKQl5l.js";import"./createSimpleFunctional-DugzUcbB.js";import"./lazy-CjF3Yiep.js";import"./ssrBoot-BPhRU-mF.js";/* empty css              */import"./_commonjsHelpers-CqkleIqs.js";import"./forwardRefs-Dv_T9a_w.js";import"./VField-CfH1YcVv.js";import"./dialog-transition-2hF0ajsQ.js";import"./VCheckboxBtn-CogF2AUK.js";import"./VPagination-DYW6O4lq.js";import"./VTable-0U-NvIH3.js";import"./filter-D_SbaZWa.js";const ca=Se("adminDashboard",()=>{const r=I(null),s=I({}),f=I({}),o=I({stats:!1,charts:!1,tables:!1}),m=I(null),b=I(null),g=I({dateRange:{start:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]},page:1,perPage:15}),y=u(()=>o.value.stats||o.value.charts||o.value.tables),R=u(()=>r.value!==null),C=u(()=>{var c;return((c=r.value)==null?void 0:c.overview.totalAffiliates)??0}),k=u(()=>{var c;return((c=r.value)==null?void 0:c.overview.totalRevenue)??0}),p=u(()=>{var c;return((c=r.value)==null?void 0:c.overview.totalCommissions)??0}),w=u(()=>{var c;return((c=r.value)==null?void 0:c.overview.pendingPayouts)??0}),$=u(()=>{if(!r.value)return 0;const{signupsLast7d:c,signupsMTD:L}=r.value.overview;return L>0?c/L*100:0}),V=u(()=>{var c;return((c=r.value)==null?void 0:c.revenue.growth)??0}),A=u(()=>{var c;return((c=r.value)==null?void 0:c.commissions.growth)??0}),J=async c=>{o.value.stats=!0,m.value=null;try{const L={...g.value,...c},D=await ee("/admin/dashboard/stats",{method:"GET",params:L});if(D.success)r.value=D.data,b.value=new Date;else throw new Error(D.message||"Failed to fetch dashboard stats")}catch(L){m.value=L instanceof Error?L.message:"An error occurred",console.error("Error fetching admin dashboard stats:",L)}finally{o.value.stats=!1}},q=async(c="month",L)=>{o.value.charts=!0,m.value=null;try{const D={...g.value,...L,period:c},M=await ee("/admin/dashboard/charts",{method:"GET",params:D});if(M.success)s.value=M.data;else throw new Error(M.message||"Failed to fetch chart data")}catch(D){m.value=D instanceof Error?D.message:"An error occurred",console.error("Error fetching admin dashboard charts:",D)}finally{o.value.charts=!1}},F=async(c,L)=>{o.value.tables=!0,m.value=null;try{const D={...g.value,...L,type:c},M=await ee("/admin/dashboard/tables",{method:"GET",params:D});if(M.success)f.value[c]=M.data;else throw new Error(M.message||"Failed to fetch table data")}catch(D){m.value=D instanceof Error?D.message:"An error occurred",console.error(`Error fetching admin dashboard table data (${c}):`,D)}finally{o.value.tables=!1}},Z=c=>{g.value={...g.value,...c}},x=async()=>{await Promise.all([J(),q(),F("recent_affiliates"),F("recent_payouts"),F("recent_tickets"),F("recent_activities")])},v=()=>{r.value=null,s.value={},f.value={},m.value=null,b.value=null},B=u(()=>s.value.signups_over_time),a=u(()=>s.value.revenue_over_time),O=u(()=>s.value.commissions_over_time),he=u(()=>s.value.top_affiliates_commissions),be=u(()=>s.value.top_affiliates_signups),ge=u(()=>s.value.orders_by_status),ye=u(()=>s.value.conversion_funnel),we=u(()=>f.value.recent_affiliates||[]),xe=u(()=>f.value.recent_payouts||[]),Ce=u(()=>f.value.recent_tickets||[]),ke=u(()=>f.value.recent_activities||[]);return{stats:r,chartData:s,tableData:f,loading:o,error:m,lastUpdated:b,filters:g,isLoading:y,hasData:R,totalAffiliates:C,totalRevenue:k,totalCommissions:p,pendingPayouts:w,signupsGrowth:$,revenueGrowth:V,commissionGrowth:A,signupsChartData:B,revenueChartData:a,commissionsChartData:O,topAffiliatesChart:he,topAffiliatesSignupsChart:be,ordersByStatusChart:ge,conversionFunnelData:ye,recentAffiliates:we,recentPayouts:xe,recentTickets:Ce,recentActivities:ke,fetchStats:J,fetchChartData:q,fetchTableData:F,updateFilters:Z,refreshAll:x,clearData:v}}),ma=me({color:String,cycle:Boolean,delimiterIcon:{type:ze,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:r=>Number(r)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Ze({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),fa=ce()({name:"VCarousel",props:ma(),emits:{"update:modelValue":r=>!0},setup(r,s){let{slots:f}=s;const o=$e(r,"modelValue"),{t:m}=De(),b=I();let g=-1;K(o,R),K(()=>r.interval,R),K(()=>r.cycle,C=>{C?R():window.clearTimeout(g)}),fe(y);function y(){!r.cycle||!b.value||(g=window.setTimeout(b.value.group.next,Number(r.interval)>0?Number(r.interval):6e3))}function R(){window.clearTimeout(g),window.requestAnimationFrame(y)}return ve(()=>{const C=le.filterProps(r);return e(le,P({ref:b},C,{modelValue:o.value,"onUpdate:modelValue":k=>o.value=k,class:["v-carousel",{"v-carousel--hide-delimiter-background":r.hideDelimiterBackground,"v-carousel--vertical-delimiters":r.verticalDelimiters},r.class],style:[{height:Ae(r.height)},r.style]}),{default:f.default,additional:k=>{let{group:p}=k;return e(W,null,[!r.hideDelimiters&&e("div",{class:"v-carousel__controls",style:{left:r.verticalDelimiters==="left"&&r.verticalDelimiters?0:"auto",right:r.verticalDelimiters==="right"?0:"auto"}},[p.items.value.length>0&&e(Te,{defaults:{VBtn:{color:r.color,icon:r.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[p.items.value.map((w,$)=>{const V={id:`carousel-item-${w.id}`,"aria-label":m("$vuetify.carousel.ariaLabel.delimiter",$+1,p.items.value.length),class:["v-carousel__controls__item",p.isSelected(w.id)&&"v-btn--active"],onClick:()=>p.select(w.id,!0)};return f.item?f.item({props:V,item:w}):e(z,P(w,V),null)})]})]),r.progress&&e(_e,{class:"v-carousel__progress",color:typeof r.progress=="string"?r.progress:void 0,modelValue:(p.getItemIndex(o.value)+1)/p.items.value.length*100},null)])},prev:f.prev,next:f.next})}),{}}}),va=me({...Qe(),...Ke()},"VCarouselItem"),_a=ce()({name:"VCarouselItem",inheritAttrs:!1,props:va(),setup(r,s){let{slots:f,attrs:o}=s;ve(()=>{const m=ne.filterProps(r),b=re.filterProps(r);return e(re,P({class:["v-carousel-item",r.class]},b),{default:()=>[e(ne,P(o,m),f)]})})}}),pa={class:"advanced-chart-container"},ha={class:"text-h6 text-white mb-1 mt-5"},ba={class:"text-base"},ga={class:"d-inline-block"},ya=Y({__name:"WebsiteAnalyticsCarousel",props:{data:{},loading:{type:Boolean,default:!1}},setup(r){const s=r,f=u(()=>[{name:"Signups",data:[{number:s.data.totalSignups.toLocaleString(),text:"Total Signups"},{number:s.data.verifiedSignups.toLocaleString(),text:"Verified"},{number:`${Math.round(s.data.growthRate)}%`,text:"Growth Rate"},{number:`${Math.round(s.data.verifiedSignups/s.data.totalSignups*100)}%`,text:"Conversion"}]},{name:"Performance",data:[{number:"2.4k",text:"Clicks"},{number:"1.8k",text:"Visits"},{number:"892",text:"Leads"},{number:"15%",text:"CTR"}]},{name:"Revenue Sources",data:[{number:"268",text:"Direct"},{number:"890",text:"Organic"},{number:"622",text:"Referral"},{number:"1.2k",text:"Campaign"}]}]);return(o,m)=>(d(),E("div",pa,[e(U,{color:"primary",height:"260",class:"web-analytics-carousel"},{default:t(()=>[o.loading?(d(),_(j,{key:1,class:"d-flex align-center justify-center chart-loading",style:{height:"260px"}},{default:t(()=>[e(se,{indeterminate:"",color:"white",size:"48"})]),_:1})):(d(),_(fa,{key:0,cycle:"",continuous:!1,"show-arrows":!1,"hide-delimiter-background":"","delimiter-icon":()=>("h"in o?o.h:l(Re))(l(S),{icon:"fa-circle",size:"8"}),height:"260",class:"carousel-delimiter-top-end web-analytics-carousel"},{default:t(()=>[(d(!0),E(W,null,N(f.value,b=>(d(),_(_a,{key:b.name},{default:t(()=>[e(j,{class:"position-relative"},{default:t(()=>[e(G,null,{default:t(()=>[e(T,{cols:"12"},{default:t(()=>m[0]||(m[0]=[n("h5",{class:"text-h5 text-white"}," Affiliate Analytics ",-1),n("p",{class:"text-sm mb-0"}," Total Performance Overview ",-1)])),_:1,__:[0]}),e(T,{cols:"12",sm:"6",order:"2","order-sm":"1"},{default:t(()=>[e(G,null,{default:t(()=>[e(T,{cols:"12",class:"pb-0 pt-1"},{default:t(()=>[n("h6",ha,i(b.name),1)]),_:2},1024),(d(!0),E(W,null,N(b.data,g=>(d(),_(T,{key:g.number,cols:"6",class:"text-no-wrap pb-2"},{default:t(()=>[e(te,{label:"",variant:"flat",size:"default",color:"rgb(var(--v-theme-primary-darken-1))",class:"font-weight-medium text-white rounded me-2 px-2",style:{"block-size":"30px"}},{default:t(()=>[n("span",ba,i(g.number),1)]),_:2},1024),n("span",ga,i(g.text),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),e(T,{cols:"12",sm:"6",order:"1","order-sm":"2",class:"text-center"},{default:t(()=>[e(l(S),{icon:"tabler-chart-line",size:"120",class:"text-white opacity-50",style:{filter:"drop-shadow(0 4px 60px rgba(0, 0, 0, 50%))"}})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["delimiter-icon"]))]),_:1})]))}}),wa={class:"d-flex align-center mt-2"},xa={class:"text-h2 me-2"},Ca={class:"text-base"},ka={class:"mt-n10 me-n2"},Va={key:1,class:"d-flex align-center justify-center my-2 chart-loading",style:{height:"191px"}},Sa={class:"text-success font-weight-medium"},$a=Y({__name:"TotalEarningChart",props:{data:{},loading:{type:Boolean,default:!1}},setup(r){const s=Ie(),{t:f}=pe(),o=r,{shouldRender:m,containerRef:b,containerStyle:g}=Xe(u(()=>o.loading),u(()=>o.data),{minWidth:200,minHeight:400}),y=u(()=>{var p,w;return[{name:f("charts.series.revenue"),data:Array.isArray((p=o.data)==null?void 0:p.revenue)?o.data.revenue.filter($=>typeof $=="number"&&isFinite($)):[0]},{name:f("charts.series.commissions"),data:Array.isArray((w=o.data)==null?void 0:w.commissions)?o.data.commissions.filter($=>typeof $=="number"&&isFinite($)).map($=>-$):[0]}]}),R=u(()=>{const p=s.current.value.colors;return{chart:{parentHeightOffset:0,stacked:!0,type:"bar",toolbar:{show:!1}},tooltip:{enabled:!0,y:{formatter:w=>`$${Math.abs(w).toLocaleString()}`}},legend:{show:!1},stroke:{curve:"smooth",width:6,lineCap:"round",colors:[p.surface]},plotOptions:{bar:{horizontal:!1,columnWidth:"45%",borderRadius:8,borderRadiusApplication:"around",borderRadiusWhenStacked:"all"}},colors:["rgba(var(--v-theme-primary),1)","rgba(var(--v-theme-secondary),1)"],dataLabels:{enabled:!1},grid:{show:!1,padding:{top:-40,bottom:-20,left:-10,right:-2}},xaxis:{categories:o.data.labels,labels:{show:!0,style:{fontSize:"11px",colors:"rgba(var(--v-theme-on-surface), 0.6)"}},axisTicks:{show:!1},axisBorder:{show:!1}},yaxis:{labels:{show:!1}},responsive:[{breakpoint:1600,options:{plotOptions:{bar:{columnWidth:"50%",borderRadius:8}}}},{breakpoint:1279,options:{plotOptions:{bar:{columnWidth:"35%",borderRadius:8}}}}],states:{hover:{filter:{type:"lighten",value:.1}},active:{filter:{type:"darken",value:.1}}}}}),C=u(()=>[{avatar:"tabler-currency-dollar",avatarColor:"primary",title:"Total Revenue",subtitle:"Platform Revenue",earning:`+$${o.data.totalRevenue.toLocaleString()}`},{avatar:"tabler-chart-line",avatarColor:"secondary",title:"Total Commissions",subtitle:"Affiliate Earnings",earning:`+$${o.data.totalCommissions.toLocaleString()}`}]),k=[{title:"View More",value:"View More"},{title:"Export Data",value:"Export Data"}];return(p,w)=>{const $=je,V=Ye;return d(),E("div",{ref_key:"containerRef",ref:b,class:"advanced-chart-container",style:Le(l(g))},[e(U,{class:"total-earning-chart"},{default:t(()=>[e(Je,{class:"pb-0"},{append:t(()=>[n("div",ka,[e($,{size:"small","menu-list":k})])]),default:t(()=>[e(ae,null,{default:t(()=>w[0]||(w[0]=[h("Total Earning")])),_:1,__:[0]}),n("div",wa,[n("h2",xa," $"+i((p.data.totalRevenue+p.data.totalCommissions).toLocaleString()),1),n("div",{class:Pe(p.data.growth>=0?"text-success":"text-error")},[e(S,{size:"20",icon:p.data.growth>=0?"tabler-chevron-up":"tabler-chevron-down"},null,8,["icon"]),n("span",Ca,i(Math.abs(p.data.growth))+"%",1)],2)])]),_:1}),e(j,null,{default:t(()=>[l(m)?(d(),_(V,{key:0,options:R.value,series:y.value,height:"191",class:"my-2"},null,8,["options","series"])):(d(),E("div",Va,[e(se,{indeterminate:"",color:"primary",size:"48"})])),e(ta,{class:"card-list"},{default:t(()=>[(d(!0),E(W,null,N(C.value,A=>(d(),_(sa,{key:A.title},{prepend:t(()=>[e(Q,{size:"38",color:A.avatarColor,variant:"tonal",rounded:"",class:"me-1"},{default:t(()=>[e(S,{icon:A.avatar,size:"22"},null,8,["icon"])]),_:2},1032,["color"])]),append:t(()=>[n("span",Sa,i(A.earning),1)]),default:t(()=>[e(oa,{class:"font-weight-medium"},{default:t(()=>[h(i(A.title),1)]),_:2},1024),e(la,null,{default:t(()=>[h(i(A.subtitle),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})],4)}}}),Da=oe($a,[["__scopeId","data-v-9701f4ee"]]),Aa={class:"advanced-chart-container"},za={class:"d-flex align-center justify-space-between"},Ta={class:"text-body-1"},Ra={class:"text-success font-weight-medium"},Ia={class:"text-h4 mt-2"},La={class:"py-2"},Pa={class:"d-flex align-center mb-3"},Ea={class:"text-h5"},Ba={class:"text-body-2 text-disabled"},Oa={class:"d-flex flex-column align-center justify-center h-100"},ja={class:"py-2"},Fa={class:"d-flex align-center justify-end mb-3"},Ma={class:"text-h5"},Wa={class:"text-body-2 text-disabled"},Na={class:"mt-6"},Ua=Y({__name:"SalesOverviewCard",props:{data:{},loading:{type:Boolean,default:!1}},setup(r){const s=r,f=u(()=>{if(s.loading)return!1;const o=s.data;return o?typeof o.amount=="string"&&typeof o.growth=="string":!1});return(o,m)=>(d(),E("div",Aa,[f.value?(d(),_(U,{key:0,class:"sales-overview-card"},{default:t(()=>[e(j,null,{default:t(()=>[n("div",za,[n("div",Ta,i(o.data.title),1),n("div",Ra,i(o.data.growth),1)]),n("h4",Ia,i(o.data.amount),1)]),_:1}),e(j,null,{default:t(()=>[e(G,{"no-gutters":""},{default:t(()=>[e(T,{cols:"5"},{default:t(()=>[n("div",La,[n("div",Pa,[e(Q,{color:"info",variant:"tonal",size:24,rounded:"",class:"me-2"},{default:t(()=>[e(S,{size:"18",icon:"tabler-shopping-cart"})]),_:1}),m[0]||(m[0]=n("span",null,"Orders",-1))]),n("h5",Ea,i(o.data.orderPercentage)+"% ",1),n("div",Ba,i(o.data.orderCount.toLocaleString()),1)])]),_:1}),e(T,{cols:"2"},{default:t(()=>[n("div",Oa,[e(ie,{vertical:"",class:"mx-auto"}),e(Q,{size:"24",color:"rgba(var(--v-theme-on-surface), var(--v-hover-opacity))",class:"my-2"},{default:t(()=>m[1]||(m[1]=[n("div",{class:"text-overline text-disabled"}," VS ",-1)])),_:1,__:[1]}),e(ie,{vertical:"",class:"mx-auto"})])]),_:1}),e(T,{cols:"5",class:"text-end"},{default:t(()=>[n("div",ja,[n("div",Fa,[m[2]||(m[2]=n("span",{class:"me-2"},"Visits",-1)),e(Q,{color:"primary",variant:"tonal",size:24,rounded:""},{default:t(()=>[e(S,{size:"18",icon:"tabler-link"})]),_:1})]),n("h5",Ma,i(o.data.visitPercentage)+"% ",1),n("div",Wa,i(o.data.visitCount.toLocaleString()),1)])]),_:1})]),_:1}),n("div",Na,[e(_e,{"model-value":o.data.progressValue,color:"#00CFE8",height:"10","bg-color":"primary","rounded-bar":!1,rounded:""},null,8,["model-value"])])]),_:1}),o.loading||!f.value?(d(),_(j,{key:0,class:"d-flex align-center justify-center chart-loading",style:{height:"200px"}},{default:t(()=>[e(se,{indeterminate:"",color:"primary",size:"48"})]),_:1})):X("",!0)]),_:1})):X("",!0)]))}}),Ga=oe(Ua,[["__scopeId","data-v-6d92e50f"]]),qa={class:"admin-dashboard"},Ha={class:"d-flex align-center justify-space-between mb-6"},Ja={class:"text-h4 font-weight-bold mb-1"},Za={class:"text-body-1 text-medium-emphasis"},Ka={class:"d-flex align-center gap-3"},Qa={class:"d-flex align-center justify-space-between mb-4 flex-wrap gap-4"},Xa={class:"text-h5 font-weight-bold"},Ya={class:"text-body-2 text-disabled mb-0"},et={class:"d-flex align-center gap-3 flex-wrap"},at={class:"d-flex align-center gap-2"},tt={class:"period-selector-wrapper"},st=Y({__name:"dashboard",setup(r){const{t:s}=pe(),{user:f}=Ve(),o=ca(),{showSuccess:m,showError:b}=Oe(),{chartConfigs:g}=Fe(o),y=I("month"),R=I(null),C=I(!0),k=I([new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],new Date().toISOString().split("T")[0]]),p=u(()=>[{title:s("admin_breadcrumb"),disabled:!1,href:"/admin"},{title:s("dashboard"),disabled:!0,href:"/admin/dashboard"}]),w=u(()=>{if(!o.stats)return[];const{overview:x,revenue:v,commissions:B,payouts:a}=o.stats;return[{title:s("total_affiliates"),value:x.totalAffiliates,icon:"tabler-users",color:"primary",trend:{value:o.signupsGrowth,label:s("vs_last_month")}},{title:s("total_revenue"),value:x.totalRevenue,prefix:"$",icon:"tabler-currency-dollar",color:"success",trend:{value:v.growth,label:s("vs_last_month")}},{title:s("total_commissions"),value:x.totalCommissions,prefix:"$",icon:"tabler-chart-line",color:"info",trend:{value:B.growth,label:s("vs_last_month")}},{title:s("pending_payouts"),value:a.pending.amount,prefix:"$",subtitle:`${a.pending.count} ${s("requests")}`,icon:"tabler-clock",color:"warning"},{title:s("verified_signups"),value:x.verifiedSignups,subtitle:`${x.verificationRate.toFixed(1)}% ${s("conversion_rate")}`,icon:"tabler-user-check",color:"success"},{title:s("total_orders"),value:x.totalOrders,icon:"tabler-shopping-cart",color:"secondary"}]}),$=u(()=>[{title:s("signups_over_time"),type:"line",data:o.signupsChartData,cols:{cols:12,md:6}},{title:s("revenue_commissions"),type:"area",data:o.revenueChartData,cols:{cols:12,md:6}},{title:s("top_affiliates_by_commissions"),type:"bar",data:o.topAffiliatesChart,cols:{cols:12,md:6}},{title:s("orders_by_status"),type:"doughnut",data:o.ordersByStatusChart,cols:{cols:12,md:6}}]),V=I(!0),A=async()=>{try{await o.refreshAll(),C.value&&m(s("dashboard_data_refreshed"))}catch{b(s("dashboard_refresh_failed"))}},J=()=>{o.updateFilters({dateRange:{start:k.value[0],end:k.value[1]}}),A()},q=x=>{y.value=x,o.fetchChartData(x)},F=()=>{try{const x={timestamp:new Date().toISOString(),period:y.value,stats:o.stats,charts:V.value?"advanced":"basic"},v=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),B=URL.createObjectURL(v),a=document.createElement("a");a.href=B,a.download=`admin-dashboard-${y.value}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(B),m(s("admin_dashboard_export_success"))}catch(x){console.error("Error exporting dashboard:",x),b(s("admin_dashboard_export_error"))}},Z=()=>{R.value&&clearInterval(R.value),C.value&&(R.value=setInterval(()=>{A()},300*1e3))};return fe(async()=>{await A(),Z()}),Ee(()=>{R.value&&clearInterval(R.value)}),K(C,Z),(x,v)=>{var B;return d(),E("div",qa,[e(He,{items:p.value},null,8,["items"]),n("div",Ha,[n("div",null,[n("h1",Ja,i(l(s)("admin_dashboard_title")),1),n("p",Za,i(l(s)("admin_dashboard_welcome",{name:(B=l(f))==null?void 0:B.nom_complet})),1)]),n("div",Ka,[e(H,{text:l(s)("admin_dashboard_auto_refresh_tooltip")},{activator:t(({props:a})=>[e(z,P(a,{color:C.value?"success":"default",variant:C.value?"tonal":"outlined",icon:"",onClick:v[0]||(v[0]=O=>C.value=!C.value)}),{default:t(()=>[e(S,{icon:C.value?"tabler-refresh":"tabler-refresh-off"},null,8,["icon"])]),_:2},1040,["color","variant"])]),_:1},8,["text"]),e(z,{color:"primary",variant:"outlined",loading:l(o).isLoading,onClick:A},{default:t(()=>[e(S,{start:"",icon:"tabler-refresh"}),h(" "+i(l(s)("admin_dashboard_refresh")),1)]),_:1},8,["loading"]),e(ia,null,{activator:t(({props:a})=>[e(z,P(a,{variant:"outlined","prepend-icon":"tabler-calendar"}),{default:t(()=>[h(i(k.value[0])+" - "+i(k.value[1]),1)]),_:2},1040)]),default:t(()=>[e(U,{"min-width":"300"},{default:t(()=>[e(j,null,{default:t(()=>[e(de,{modelValue:k.value[0],"onUpdate:modelValue":v[1]||(v[1]=a=>k.value[0]=a),label:l(s)("admin_dashboard_start_date"),type:"date",variant:"outlined",density:"compact",class:"mb-3"},null,8,["modelValue","label"]),e(de,{modelValue:k.value[1],"onUpdate:modelValue":v[2]||(v[2]=a=>k.value[1]=a),label:l(s)("admin_dashboard_end_date"),type:"date",variant:"outlined",density:"compact",class:"mb-3"},null,8,["modelValue","label"]),e(z,{color:"primary",block:"",onClick:J},{default:t(()=>[h(i(l(s)("admin_dashboard_apply")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),l(o).error?(d(),_(da,{key:0,type:"error",variant:"tonal",class:"mb-6",closable:"","onClick:close":v[3]||(v[3]=a=>l(o).error=null)},{default:t(()=>[h(i(l(o).error),1)]),_:1})):X("",!0),e(G,{class:"mb-6"},{default:t(()=>[(d(!0),E(W,null,N(w.value,(a,O)=>(d(),_(T,{key:O,cols:"12",sm:"6",lg:"4",xl:"2"},{default:t(()=>[e(Me,{title:a.title,value:a.value,subtitle:a.subtitle,icon:a.icon,color:a.color,trend:a.trend,prefix:a.prefix,loading:l(o).loading.stats,error:l(o).error||void 0,size:"medium"},null,8,["title","value","subtitle","icon","color","trend","prefix","loading","error"])]),_:2},1024))),128))]),_:1}),e(G,{class:"mb-6"},{default:t(()=>[e(T,{cols:"12"},{default:t(()=>[n("div",Qa,[n("div",null,[n("h2",Xa,i(l(s)("dashboard_analytics")),1),n("p",Ya,i(l(s)("admin_dashboard_analytics_subtitle")),1)]),n("div",et,[n("div",at,[e(H,{text:l(s)("admin_dashboard_refresh_data_tooltip")},{activator:t(({props:a})=>[e(z,P(a,{icon:"tabler-refresh",variant:"outlined",size:"small",loading:l(o).loading.stats,onClick:A}),null,16,["loading"])]),_:1},8,["text"]),e(H,{text:l(s)("admin_dashboard_export_tooltip")},{activator:t(({props:a})=>[e(z,P(a,{icon:"tabler-download",variant:"outlined",size:"small",onClick:F}),null,16)]),_:1},8,["text"]),e(H,{text:V.value?l(s)("admin_dashboard_switch_to_basic"):l(s)("admin_dashboard_switch_to_advanced")},{activator:t(({props:a})=>[e(z,P(a,{icon:V.value?"tabler-chart-dots-3":"tabler-chart-line",color:V.value?"primary":"default",variant:"outlined",size:"small",onClick:v[4]||(v[4]=O=>V.value=!V.value)}),{default:t(()=>[e(S,{icon:V.value?"tabler-chart-dots-3":"tabler-chart-line"},null,8,["icon"]),e(H,{activator:"parent",location:"bottom"},{default:t(()=>[h(i(V.value?l(s)("admin_dashboard_advanced_charts"):l(s)("admin_dashboard_basic_charts")),1)]),_:1})]),_:2},1040,["icon","color"])]),_:1},8,["text"])]),n("div",tt,[e(Be,{modelValue:y.value,"onUpdate:modelValue":[v[5]||(v[5]=a=>y.value=a),q],color:"primary",variant:"outlined",divided:"",class:"d-none d-md-flex"},{default:t(()=>[e(z,{value:"day",size:"small"},{default:t(()=>[e(S,{icon:"tabler-calendar-day",class:"me-1",size:"16"}),h(" "+i(l(s)("admin_dashboard_period_day")),1)]),_:1}),e(z,{value:"week",size:"small"},{default:t(()=>[e(S,{icon:"tabler-calendar-week",class:"me-1",size:"16"}),h(" "+i(l(s)("admin_dashboard_period_week")),1)]),_:1}),e(z,{value:"month",size:"small"},{default:t(()=>[e(S,{icon:"tabler-calendar-month",class:"me-1",size:"16"}),h(" "+i(l(s)("admin_dashboard_period_month")),1)]),_:1}),e(z,{value:"year",size:"small"},{default:t(()=>[e(S,{icon:"tabler-calendar-year",class:"me-1",size:"16"}),h(" "+i(l(s)("admin_dashboard_period_year")),1)]),_:1})]),_:1},8,["modelValue"]),e(ua,{modelValue:y.value,"onUpdate:modelValue":[v[6]||(v[6]=a=>y.value=a),q],items:[{title:l(s)("admin_dashboard_period_day"),value:"day",prepend:"tabler-calendar-day"},{title:l(s)("admin_dashboard_period_week"),value:"week",prepend:"tabler-calendar-week"},{title:l(s)("admin_dashboard_period_month"),value:"month",prepend:"tabler-calendar-month"},{title:l(s)("admin_dashboard_period_year"),value:"year",prepend:"tabler-calendar-year"}],variant:"outlined",density:"compact",class:"d-flex d-md-none period-select-mobile",style:{"min-width":"120px","max-width":"140px"},"hide-details":""},{"prepend-inner":t(()=>[e(S,{size:"16",class:"me-1"},{default:t(()=>[h(i(y.value==="day"?"tabler-calendar-day":y.value==="week"?"tabler-calendar-week":y.value==="month"?"tabler-calendar-month":"tabler-calendar-year"),1)]),_:1})]),_:1},8,["modelValue","items"])])])])]),_:1}),V.value?(d(!0),E(W,{key:0},N(l(g),(a,O)=>(d(),_(T,P({key:`advanced-${O}`,ref_for:!0},a.cols),{default:t(()=>[a.component==="AdvancedStatsCard"?(d(),_(l(ra),{key:0,data:a.data,loading:a.loading,size:a.size},null,8,["data","loading","size"])):a.component==="SalesOverviewCard"?(d(),_(l(Ga),{key:1,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="EarningReportsWeekly"?(d(),_(l(We),{key:2,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="WebsiteAnalyticsCarousel"?(d(),_(l(ya),{key:3,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="MixedChart"?(d(),_(l(Ne),{key:4,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="SalesAreaChart"?(d(),_(l(ea),{key:5,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="ProfitLineChart"?(d(),_(l(aa),{key:6,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="TotalEarningChart"?(d(),_(l(Da),{key:7,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="RevenueGrowthChart"?(d(),_(l(Ue),{key:8,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="SessionAnalyticsDonut"?(d(),_(l(na),{key:9,data:a.data,loading:a.loading},null,8,["data","loading"])):a.component==="ExpensesRadialChart"?(d(),_(l(Ge),{key:10,data:a.data,loading:a.loading},null,8,["data","loading"])):X("",!0)]),_:2},1040))),128)):(d(!0),E(W,{key:1},N($.value,(a,O)=>(d(),_(T,P({key:`legacy-${O}`,ref_for:!0},a.cols),{default:t(()=>[e(qe,{type:a.type,data:a.data,title:a.title,loading:l(o).loading.charts,error:l(o).error||void 0,height:350},null,8,["type","data","title","loading","error"])]),_:2},1040))),128))]),_:1}),e(G,null,{default:t(()=>[e(T,{cols:"12",md:"6"},{default:t(()=>[e(U,null,{default:t(()=>[e(ae,{class:"d-flex align-center justify-space-between"},{default:t(()=>[n("span",null,i(l(s)("admin_dashboard_recent_affiliates")),1),e(z,{variant:"text",size:"small",onClick:v[7]||(v[7]=a=>l(o).fetchTableData("recent_affiliates"))},{default:t(()=>[e(S,{icon:"tabler-refresh"})]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(ue,{items:l(o).recentAffiliates,headers:[{title:l(s)("admin_dashboard_table_name"),key:"name"},{title:l(s)("admin_dashboard_table_email"),key:"email"},{title:l(s)("admin_dashboard_table_joined"),key:"joinedAt"},{title:l(s)("admin_dashboard_table_status"),key:"status"},{title:l(s)("admin_dashboard_table_commissions"),key:"totalCommissions"}],loading:l(o).loading.tables,density:"compact","hide-default-footer":""},{"item.joinedAt":t(({item:a})=>[h(i(new Date(a.joinedAt).toLocaleDateString()),1)]),"item.totalCommissions":t(({item:a})=>[h(" $"+i(a.totalCommissions.toLocaleString()),1)]),"item.status":t(({item:a})=>[e(te,{color:a.status==="actif"?"success":"warning",size:"small",variant:"tonal"},{default:t(()=>[h(i(a.status),1)]),_:2},1032,["color"])]),_:1},8,["items","headers","loading"])]),_:1})]),_:1})]),_:1}),e(T,{cols:"12",md:"6"},{default:t(()=>[e(U,null,{default:t(()=>[e(ae,{class:"d-flex align-center justify-space-between"},{default:t(()=>[n("span",null,i(l(s)("admin_dashboard_recent_payouts")),1),e(z,{variant:"text",size:"small",onClick:v[8]||(v[8]=a=>l(o).fetchTableData("recent_payouts"))},{default:t(()=>[e(S,{icon:"tabler-refresh"})]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(ue,{items:l(o).recentPayouts,headers:[{title:l(s)("admin_dashboard_table_affiliate"),key:"affiliateName"},{title:l(s)("admin_dashboard_table_amount"),key:"amount"},{title:l(s)("admin_dashboard_table_status"),key:"status"},{title:l(s)("admin_dashboard_table_requested"),key:"requestedAt"}],loading:l(o).loading.tables,density:"compact","hide-default-footer":""},{"item.amount":t(({item:a})=>[h(" $"+i(a.amount.toLocaleString()),1)]),"item.requestedAt":t(({item:a})=>[h(i(new Date(a.requestedAt).toLocaleDateString()),1)]),"item.status":t(({item:a})=>[e(te,{color:a.status==="pending"?"warning":a.status==="paid"?"success":"error",size:"small",variant:"tonal"},{default:t(()=>[h(i(a.status),1)]),_:2},1032,["color"])]),_:1},8,["items","headers","loading"])]),_:1})]),_:1})]),_:1})]),_:1})])}}}),Wt=oe(st,[["__scopeId","data-v-975f147a"]]);export{Wt as default};
