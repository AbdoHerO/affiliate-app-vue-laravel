import{d as F,aL as I,r as p,V as N,D as j,c as E,e as i,b as e,t as o,m as s,f as a,ac as V,b5 as K,o as L,s as c,az as g,cD as R}from"./main-uLG9IIeX.js";import{V as x,b as A}from"./VCard-CB1gT6RB.js";import{V as w}from"./VCardText-BZtszuIK.js";import{V as C,a as f}from"./VRow-aGfXYx3U.js";import{V as h}from"./VTextField-Dxeq5kx5.js";import{V as M}from"./VSelect-sWnAtot-.js";import{V as O}from"./VDataTableServer-DfLBg0lg.js";import{V as k}from"./VChip-B84WcmDa.js";import{V as q}from"./VAvatar-bHPDEsYY.js";import"./createSimpleFunctional-DugzUcbB.js";import"./VImg-BS6_svHJ.js";/* empty css              */import"./VField-CfH1YcVv.js";import"./forwardRefs-Dv_T9a_w.js";import"./lazy-CjF3Yiep.js";import"./VList-uZDByhc2.js";import"./ssrBoot-BPhRU-mF.js";import"./VDivider-UqGR4x4D.js";import"./dialog-transition-2hF0ajsQ.js";import"./VMenu-DP1p-55V.js";import"./VCheckboxBtn-CogF2AUK.js";import"./VDataTable-DNqSzzrc.js";import"./VPagination-DYW6O4lq.js";import"./VTable-0U-NvIH3.js";import"./filter-D_SbaZWa.js";const G={class:"d-flex justify-space-between align-center mb-6"},H={class:"text-h4 font-weight-bold mb-1"},J={class:"text-body-1 mb-0"},P={class:"d-flex gap-2"},Q={class:"d-flex align-center"},W={class:"font-weight-medium"},X={class:"text-body-2 text-medium-emphasis"},Y={class:"text-center py-8"},Z={class:"text-h6 mb-2"},$={class:"text-body-2"},De=F({__name:"users",setup(ee){const{t:r}=I(),v=p(!1),y=p([]),u=p({current_page:1,last_page:1,per_page:15,total:0}),d=p({search:"",verified:null,start_date:"",end_date:""}),D=N(()=>[{title:r("user"),key:"new_user",sortable:!1},{title:r("signup_date"),key:"attributed_at",sortable:!0},{title:r("verification_status"),key:"verified",sortable:!0},{title:r("source"),key:"source",sortable:!0}]),_=async(n=1)=>{v.value=!0;try{const l={page:n,per_page:u.value.per_page,...d.value};Object.keys(l).forEach(b=>{(l[b]===""||l[b]===null)&&delete l[b]});const t=await K.get("/affiliate/referrals/referred-users",{params:l});t.data.success&&(y.value=t.data.data,u.value=t.data.pagination)}catch(l){console.error("Failed to fetch referred users:",l)}finally{v.value=!1}},m=()=>{u.value.current_page=1,_()},U=()=>{d.value={search:"",verified:null,start_date:"",end_date:""},_()},S=n=>new Date(n).toLocaleDateString(),T=n=>n?"success":"warning",z=n=>r(n?"verified":"pending_verification"),B=n=>n==="mobile"?"info":"primary";return j(()=>{_()}),(n,l)=>(L(),E("div",null,[i("div",G,[i("div",null,[i("h1",H,o(s(r)("my_referred_users")),1),i("p",J,o(s(r)("my_referred_users_subtitle")),1)]),e(V,{color:"primary",to:"/affiliate/referrals"},{default:a(()=>[e(g,{start:"",icon:"tabler-arrow-left"}),c(" "+o(s(r)("back_to_dashboard")),1)]),_:1})]),e(x,{class:"mb-6"},{default:a(()=>[e(A,null,{default:a(()=>[c(o(s(r)("filters")),1)]),_:1}),e(w,null,{default:a(()=>[e(C,null,{default:a(()=>[e(f,{cols:"12",md:"4"},{default:a(()=>[e(h,{modelValue:d.value.search,"onUpdate:modelValue":l[0]||(l[0]=t=>d.value.search=t),label:s(r)("search_users"),placeholder:s(r)("search_by_name_email"),"prepend-inner-icon":"tabler-search",clearable:"",onKeyup:R(m,["enter"])},null,8,["modelValue","label","placeholder"])]),_:1}),e(f,{cols:"12",md:"3"},{default:a(()=>[e(M,{modelValue:d.value.verified,"onUpdate:modelValue":[l[1]||(l[1]=t=>d.value.verified=t),m],items:[{value:!0,title:s(r)("verified")},{value:!1,title:s(r)("unverified")}],label:s(r)("verification_status"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),e(f,{cols:"12",md:"3"},{default:a(()=>[e(h,{modelValue:d.value.start_date,"onUpdate:modelValue":l[2]||(l[2]=t=>d.value.start_date=t),type:"date",label:s(r)("start_date"),onChange:m},null,8,["modelValue","label"])]),_:1}),e(f,{cols:"12",md:"2"},{default:a(()=>[i("div",P,[e(V,{color:"primary",onClick:m},{default:a(()=>[c(o(s(r)("search")),1)]),_:1}),e(V,{variant:"outlined",onClick:U},{default:a(()=>[c(o(s(r)("clear")),1)]),_:1})])]),_:1})]),_:1}),e(C,{class:"mt-2"},{default:a(()=>[e(f,{cols:"12",md:"3"},{default:a(()=>[e(h,{modelValue:d.value.end_date,"onUpdate:modelValue":l[3]||(l[3]=t=>d.value.end_date=t),type:"date",label:s(r)("end_date"),onChange:m},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(w,null,{default:a(()=>[e(O,{page:u.value.current_page,"onUpdate:page":[l[4]||(l[4]=t=>u.value.current_page=t),_],headers:D.value,items:y.value,"items-length":u.value.total,"items-per-page":u.value.per_page,loading:v.value,class:"text-no-wrap"},{"item.new_user":a(({item:t})=>[i("div",Q,[e(q,{size:"32",class:"me-3"},{default:a(()=>[e(g,{icon:"tabler-user"})]),_:1}),i("div",null,[i("div",W,o(t.new_user.nom_complet),1),i("div",X,o(t.new_user.email),1)])])]),"item.attributed_at":a(({item:t})=>[c(o(S(t.attributed_at)),1)]),"item.verified":a(({item:t})=>[e(k,{color:T(t.verified),size:"small"},{default:a(()=>[c(o(z(t.verified)),1)]),_:2},1032,["color"])]),"item.source":a(({item:t})=>[e(k,{color:B(t.source),size:"small"},{default:a(()=>[c(o(t.source),1)]),_:2},1032,["color"])]),"no-data":a(()=>[i("div",Y,[e(g,{icon:"tabler-users-off",size:"64",class:"mb-4",color:"disabled"}),i("h6",Z,o(s(r)("no_referred_users_yet")),1),i("p",$,o(s(r)("no_referred_users_yet_description")),1)])]),_:1},8,["page","headers","items","items-length","items-per-page","loading"])]),_:1})]),_:1})]))}});export{De as default};
