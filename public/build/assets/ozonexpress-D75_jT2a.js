import{b5 as Xe,r as b,b6 as be,d as Ye,aL as Ze,o as ea,c as p,b as c,e,g as l,t,az as C,v as o,n as d,f as n,m,ac as V,h as I,aW as fe}from"./main-DnYrbSQO.js";import{u as aa}from"./shipping-BpG-tFds.js";import{u as la}from"./useNotifications-B96M_DMY.js";import{u as Z}from"./useApi-CLL5zN4i.js";import{b as D,V as f,c as ke}from"./VCard-om2cqSxr.js";import{V as g}from"./VCardText-ByjN3mlm.js";import{V as N,a as ge}from"./VAlert-MvsAUjNt.js";import{V as ta}from"./VSwitch-CU13ZRbV.js";import{V as j}from"./VChip-CjuV2Q4G.js";import{V as G,a as y}from"./VRow-B-6WkvV7.js";import{V as xe}from"./VDataTable-DKYwtbC2.js";import{V as Ve,a as de,b as ce,c as ve}from"./VExpansionPanels-N4bpDHcE.js";import{a as sa,V as Ce}from"./VTabs-CbJQ0_Ck.js";import{a as ra,V as we}from"./VWindowItem-Co6Rem7Z.js";import{V as ye}from"./VForm-CBmw6Dgd.js";import{V as ee}from"./VTextField-BFgmXL2S.js";import{V as Te}from"./VSelect-CKLjvmQy.js";import{V as oa}from"./VTextarea-Dcb-AMDz.js";import{V as Ee}from"./VSpacer-CqgRR1TD.js";import{V as Se}from"./VDialog-Bxp8pJL4.js";import"./createSimpleFunctional-D0EIrpo1.js";import"./VAvatar-BwJp41ss.js";import"./VImg-CrKU03S9.js";import"./VField-CQs8lPb7.js";import"./forwardRefs-CKYzHDJS.js";import"./VCheckboxBtn-CH3WdWXy.js";/* empty css              */import"./VPagination-08TpqLBG.js";import"./VTable-CrO6KCbh.js";import"./filter-Dgd-zPx5.js";import"./VDivider-u64Rz-6W.js";import"./lazy-tUmo4pC_.js";import"./ssrBoot-DYjajp4c.js";import"./VList-DOWShsA2.js";import"./dialog-transition-DVo_RrAy.js";import"./VMenu-Bwc3jIko.js";import"./VOverlay-B2NeWL_F.js";const na=Xe("ozonDebug",()=>{const ae=b({sendParcel:!1,track:!1}),L=b(null),Q=b(null),O=b([]);return{loading:ae,lastSentParcel:L,lastTrackedParcel:Q,trackingHistory:O,sendParcel:async P=>{var X;ae.value.sendParcel=!0;try{const w=await be.post("admin/shipping/ozon/debug/send-parcel",P);return w.data.success&&(L.value=w.data.data),w.data}catch(w){return(X=w.response)!=null&&X.data?w.response.data:{success:!1,message:w.message||"Une erreur est survenue"}}finally{ae.value.sendParcel=!1}},track:async P=>{var X,w,M;ae.value.track=!0;try{const R=await be.post("/admin/shipping/ozon/debug/track",P);return R.data.success&&(Q.value=((X=R.data.data)==null?void 0:X.parcel)||null,(w=R.data.data)!=null&&w.tracking_info&&O.value.unshift({tracking_number:P.tracking_number,timestamp:new Date().toISOString(),data:R.data.data})),R.data}catch(R){return(M=R.response)!=null&&M.data?R.response.data:{success:!1,message:R.message||"Une erreur est survenue"}}finally{ae.value.track=!1}},clearHistory:()=>{L.value=null,Q.value=null,O.value=[]}}}),ua={class:"pa-6"},ia={class:"d-flex align-center gap-4"},da={class:"d-flex align-center gap-2"},ca={class:"font-weight-medium"},va={key:0},ma={key:1},_a={key:0,class:"mt-4"},pa={class:"text-body-2"},fa={class:"mt-2"},ga={key:0},ya={key:1},ba={class:"text-body-2"},ka={class:"d-flex gap-2 mb-4"},xa={key:1,class:"mt-4"},Va={key:0,class:"mt-2"},Ca={class:"text-h6"},wa={class:"text-h6"},Ta={class:"text-h6"},Ea={key:2,class:"mt-4"},Sa={key:0,class:"mt-4"},Pa={class:"text-h4"},Ra={class:"text-h4"},ha={class:"text-h4"},za={class:"text-h4"},Da={class:"text-body-2"},Na={class:"d-flex gap-2 mb-4"},Oa={key:0,class:"mt-4"},Ma={class:"d-flex justify-space-between align-center mb-2"},Aa={class:"text-subtitle-1"},Ia={key:0},La={key:1},Ua={class:"d-flex align-center gap-2"},$a={class:"font-weight-medium"},ja={class:"d-flex gap-2 flex-wrap"},qa={key:1,class:"mt-4"},Ba={key:0,class:"mt-2"},Fa={class:"text-body-2"},Ja={key:2,class:"mt-4"},Ha={key:0,class:"mt-2"},Wa={class:"d-flex flex-column gap-2"},Ka={class:"text-caption"},Ga={key:3,class:"mt-4"},Qa={key:0,class:"mt-2"},Xa={class:"d-flex flex-column gap-2 mb-3"},Ya={key:0},Za={class:"text-caption"},el={class:"text-caption"},al={class:"text-caption"},ll={class:"d-flex align-center justify-space-between"},tl={key:0,class:"mt-2"},sl={key:1,class:"mt-4"},rl={class:"text-caption text-medium-emphasis"},ol={class:"text-body-2"},nl={class:"text-body-2"},ul={class:"d-flex flex-wrap gap-2 mb-4"},il={key:0,class:"mb-4"},dl={key:1,class:"mt-4"},cl={key:0,class:"mt-3"},vl={class:"text-caption"},ml={class:"text-caption"},_l={key:0,class:"mt-2"},Yl=Ye({__name:"ozonexpress",setup(ae){const L=na(),Q=aa(),{showSuccess:O,showError:E}=la(),{t:u}=Ze(),i=b({systemStatus:!1,apiTest:!1,parcels:!1,toggle:!1,bulkTest:!1,analytics:!1,sync:!1,platformParcels:!1,createTest:!1,trackTest:!1,deliveryNote:!1}),P=b(null),X=b(null),w=b(null),M=b(null),R=b(null),F=b(null),Y=b(null),T=b(null),k=b(null),re=b(!1),le=b(""),q=b(""),h=b(null),ue=b("manual"),te=b(""),oe=b(""),U=b(null),B=b(null),S=b({receiver:"",phone:"",city:"",address:"",price:0,nature:"",stock:0}),_=b({useReal:!0,currentMode:"real"}),se=b({show:!1,data:null}),Pe=[{title:"Tracking",key:"tracking_number"},{title:"Client",key:"client_name"},{title:"Ville",key:"city"},{title:"Prix",key:"price"},{title:"Statut",key:"status"},{title:"Créé le",key:"created_at"},{title:u("labels.details"),key:"meta",sortable:!1}],Re=[{title:"Tracking",key:"tracking_number"},{title:"Statut",key:"status"},{title:"Ville",key:"city"},{title:"Prix",key:"price"},{title:"Date",key:"created_at"}],he=async()=>{i.value.toggle=!0;try{_.value.currentMode=_.value.useReal?"real":"mock",P.value=null,X.value=null,w.value=null,M.value=null,R.value=null,console.log(`Switched to ${_.value.currentMode} mode`)}catch(r){console.error("Error toggling test mode:",r)}finally{i.value.toggle=!1}},ze=async()=>{i.value.systemStatus=!0;try{const r=_.value.useReal?"/admin/test/system-status":"/admin/test/system-status?mock=true",{data:a,error:s}=await Z(r);s.value?console.error("Error loading system status:",s.value):P.value={...a.value,test_mode:_.value.currentMode}}catch(r){console.error("Error loading system status:",r)}finally{i.value.systemStatus=!1}},De=async()=>{var r,a,s;i.value.analytics=!0;try{const v=_.value.useReal?"/admin/test/shipping-parcels":"/admin/test/shipping-parcels?mock=true",{data:z,error:x}=await Z(v);if(x.value)console.error("Error loading parcels analytics:",x.value);else{const A=z.value;if(_.value.useReal){const H=((r=A.recent_parcels)==null?void 0:r.filter(ne=>{var K;return!((K=ne.meta)!=null&&K.mock_data)}))||[],W=((a=A.recent_parcels)==null?void 0:a.filter(ne=>{var K;return(K=ne.meta)==null?void 0:K.mock_data}))||[],$=new Date().toISOString().split("T")[0],ie=((s=A.recent_parcels)==null?void 0:s.filter(ne=>{var K;return(K=ne.created_at)==null?void 0:K.startsWith($)}))||[];R.value={total_count:A.total_parcels||0,real_count:(A.total_parcels||0)-W.length,mock_count:W.length,today_count:ie.length,recent_real:H.slice(0,10),recent_mock:W.slice(0,5),mode:"real"}}else R.value={total_count:25,real_count:0,mock_count:25,today_count:5,recent_real:[],recent_mock:Array.from({length:10},(H,W)=>({tracking_number:`MOCK${Date.now()}${W}`,status:"pending",created_at:new Date().toISOString()})),mode:"mock"}}}catch(v){console.error("Error loading parcels analytics:",v)}finally{i.value.analytics=!1}},Ne=async()=>{var r;i.value.parcels=!0;try{if(_.value.useReal){const{data:a,error:s}=await Z("/admin/test/shipping-parcels");if(s.value)console.error("Error loading shipping parcels:",s.value);else{const v=a.value,z=((r=v.recent_parcels)==null?void 0:r.filter(x=>{var A;return!((A=x.meta)!=null&&A.mock_data)}))||[];w.value={...v,recent_parcels:z,filtered_type:"real_only",test_mode:"real"}}}else w.value={total_parcels:0,recent_parcels:[],filtered_type:"real_only",test_mode:"mock",message:"Mode test: Aucun colis réel en mode mock"}}catch(a){console.error("Error loading real parcels:",a)}finally{i.value.parcels=!1}},J=async()=>{i.value.parcels=!0;try{if(_.value.useReal){const{data:r,error:a}=await Z("/admin/test/shipping-parcels");if(a.value)console.error("Error loading shipping parcels:",a.value);else{const s=r.value;w.value={...s,filtered_type:"all",test_mode:"real"}}}else{const r=Array.from({length:15},(a,s)=>({id:s+1,tracking_number:`MOCK${Date.now()}${String(s).padStart(3,"0")}`,status:["pending","shipped","delivered"][s%3],provider:"OzonExpress",client_name:`Client Test ${s+1}`,city:["Casablanca","Rabat","Marrakech"][s%3],price:(Math.random()*500+50).toFixed(2),created_at:new Date(Date.now()-s*36e5).toISOString(),meta:{mock_data:!0},is_real:!1,type:"mock"}));w.value={total_parcels:15,real_parcels:0,mock_parcels:15,recent_parcels:r,filtered_type:"all",test_mode:"mock"}}}catch(r){console.error("Error loading shipping parcels:",r)}finally{i.value.parcels=!1}},Oe=async()=>{var r,a;i.value.sync=!0;try{const{data:s,error:v}=await Z("/admin/test/sync-parcels",{method:"POST"});v.value?(console.error("Error syncing from platform:",v.value),F.value={success:!1,message:u("admin_debug_sync_error")+": "+((r=v.value)==null?void 0:r.message)}):(F.value=s.value,(a=s.value)!=null&&a.success&&await J())}catch(s){console.error("Error syncing from platform:",s),F.value={success:!1,message:u("admin_debug_sync_error")+": "+(s==null?void 0:s.message)}}finally{i.value.sync=!1}},Me=async()=>{var r;i.value.platformParcels=!0;try{const{data:a,error:s}=await Z("/admin/test/platform-parcels");s.value?(console.error("Error loading platform parcels:",s.value),Y.value={success:!1,message:u("admin_debug_platform_parcels_loading_error")+": "+((r=s.value)==null?void 0:r.message)}):Y.value=a.value}catch(a){console.error("Error loading platform parcels:",a),Y.value={success:!1,message:u("admin_debug_platform_parcels_loading_error")+": "+(a==null?void 0:a.message)}}finally{i.value.platformParcels=!1}},Ae=async()=>{var r;i.value.bulkTest=!0;try{if(_.value.useReal){const{data:a,error:s}=await Z("/admin/test/bulk-operations");s.value?(console.error("Error testing bulk operations:",s.value),M.value={success:!1,message:u("admin_debug_batch_operations_error")+": "+((r=s.value)==null?void 0:r.message),test_mode:"real"}):M.value={...a.value,test_mode:"real"}}else M.value={success:!0,message:"Test des opérations en lot réussi (mode mock)",operations_tested:3,results:[{operation:"Création de colis",status:"success",message:"Mock: 5 colis créés"},{operation:"Mise à jour statuts",status:"success",message:"Mock: 3 statuts mis à jour"},{operation:"Synchronisation",status:"success",message:"Mock: Synchronisation simulée"}],test_mode:"mock",note:"Données simulées pour les tests"}}catch(a){console.error("Error testing bulk operations:",a),M.value={success:!1,message:"Erreur lors du test des opérations en lot: "+(a==null?void 0:a.message),test_mode:_.value.currentMode}}finally{i.value.bulkTest=!1}},Ie=async()=>{i.value.toggle=!0,alert("Utilisez la commande: php artisan ozonexpress:toggle --enable"),i.value.toggle=!1},Le=async()=>{i.value.toggle=!0,alert("Utilisez la commande: php artisan ozonexpress:toggle --disable"),i.value.toggle=!1},Ue=async()=>{i.value.createTest=!0;try{const r=await L.sendParcel({receiver:"Test Client",phone:"0612345678",city:"97",address:"123 Rue Test, Quartier Test",price:50,nature:"Test Product",stock:0,products:[{ref:"TEST-PRODUCT-001",qnty:1}]});T.value=r,r.success?(O(u("admin_debug_test_parcel_created")),await J()):E(r.message||"Erreur lors de la création du colis test")}catch(r){console.error("Error creating test parcel:",r),T.value={success:!1,message:"Erreur lors de la création du colis test: "+r.message},E(r.message||"Erreur lors de la création du colis test")}finally{i.value.createTest=!1}},$e=async()=>{if(!le.value.trim()){k.value={success:!1,message:"Veuillez entrer un numéro de suivi"};return}i.value.trackTest=!0;try{const r=await L.track({tracking_number:le.value.trim()});k.value=r,re.value=!1,r.success?(O(u("admin_debug_tracking_updated")),await J()):E(r.message||"Erreur lors du suivi du colis")}catch(r){console.error("Error tracking parcel:",r),k.value={success:!1,message:"Erreur lors du suivi du colis: "+r.message},E(r.message||"Erreur lors du suivi du colis")}finally{i.value.trackTest=!1}},je=async()=>{var a,s,v,z;if(!((s=(a=T.value)==null?void 0:a.data)!=null&&s.tracking_number)&&!((v=T.value)!=null&&v.tracking_number)){k.value={success:!1,message:"Aucun colis test créé récemment"};return}const r=((z=T.value.data)==null?void 0:z.tracking_number)||T.value.tracking_number;i.value.trackTest=!0;try{const x=await L.track({tracking_number:r});k.value=x,x.success?(O(u("admin_debug_last_parcel_tracking_updated")),await J()):E(x.message||"Erreur lors du suivi du colis créé")}catch(x){console.error("Error tracking last created parcel:",x),k.value={success:!1,message:"Erreur lors du suivi du colis créé: "+x.message},E(x.message||"Erreur lors du suivi du colis créé")}finally{i.value.trackTest=!1}},qe=r=>{se.value.data=r.meta,se.value.show=!0},me=r=>{switch(r==null?void 0:r.toLowerCase()){case"delivered":return"success";case"shipped":case"in_transit":case"out_for_delivery":return"info";case"pending":case"received":case"ready_for_delivery":return"warning";case"cancelled":case"refused":case"delivery_failed":return"error";case"returned":case"return_delivered":return"secondary";default:return"secondary"}},_e=r=>({pending:"En Attente",received:"Reçu",in_transit:"En Transit",out_for_delivery:"En Cours de Livraison",delivered:"Livré",returned:u("order.status.returned"),refused:"Refusé",cancelled:"Annulé",shipped:"Expédié",at_facility:"Arrivé au Centre",ready_for_delivery:"Prêt pour Livraison",delivery_attempted:"Tentative de Livraison",delivery_failed:"Échec de Livraison",return_in_progress:u("order.status.returnInProgress"),return_delivered:u("order.status.returnDelivered"),unknown:"Statut Inconnu"})[r==null?void 0:r.toLowerCase()]||r||"Inconnu",pe=r=>new Date(r).toLocaleString("fr-FR"),Be=async()=>{U.value=null;try{const r=await L.sendParcel({receiver:S.value.receiver,phone:S.value.phone,city:S.value.city,address:S.value.address,price:S.value.price,nature:S.value.nature,stock:S.value.stock,products:[{ref:"DEBUG-PRODUCT",qnty:1}]});U.value=r,r.success?(O(u("admin_debug_parcel_sent")),S.value={receiver:"",phone:"",city:"",address:"",price:0,nature:"",stock:0},await J()):E(r.message||"Erreur lors de l'envoi du colis")}catch(r){E(r.message||"Erreur lors de l'envoi du colis")}},Fe=async()=>{if(te.value){U.value=null;try{const r=await L.sendParcel({commande_id:te.value});U.value=r,r.success?(O(u("admin_debug_parcel_sent")),te.value="",await J()):E(r.message||"Erreur lors de l'envoi du colis")}catch(r){E(r.message||"Erreur lors de l'envoi du colis")}}},Je=async()=>{if(oe.value){B.value=null;try{const r=await L.track({tracking_number:oe.value});B.value=r,r.success?(O(u("admin_debug_tracking_updated")),await J()):E(r.message||"Erreur lors du suivi du colis")}catch(r){E(r.message||"Erreur lors du suivi du colis")}}},He=async r=>{try{await navigator.clipboard.writeText(r),O(u("admin_shipping_tracking_copied"))}catch{E("Erreur lors de la copie")}},We=async()=>{i.value.deliveryNote=!0,h.value=null;try{const a=await(await fetch("/api/admin/shipping/ozon/dn/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();h.value=a,a.success?(q.value=a.data.ref,O(`Bon de livraison créé: ${a.data.ref}`)):E(a.message||"Erreur lors de la création du bon de livraison")}catch(r){h.value={success:!1,message:"Erreur de connexion: "+r.message},E("Erreur de connexion")}finally{i.value.deliveryNote=!1}},Ke=async()=>{if(q.value){i.value.deliveryNote=!0,h.value=null;try{const r=["TEST-001","TEST-002","TEST-003"],s=await(await fetch("/api/admin/shipping/ozon/dn/add-parcels",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({ref:q.value,codes:r})})).json();h.value=s,s.success?O(`${r.length} colis ajoutés au bon de livraison`):E(s.message||"Erreur lors de l'ajout des colis")}catch(r){h.value={success:!1,message:"Erreur de connexion: "+r.message},E("Erreur de connexion")}finally{i.value.deliveryNote=!1}}},Ge=async()=>{if(q.value){i.value.deliveryNote=!0,h.value=null;try{const a=await(await fetch("/api/admin/shipping/ozon/dn/save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({ref:q.value})})).json();h.value=a,a.success?O(u("admin_debug_delivery_note_saved")):E(a.message||"Erreur lors de la sauvegarde")}catch(r){h.value={success:!1,message:"Erreur de connexion: "+r.message},E("Erreur de connexion")}finally{i.value.deliveryNote=!1}}},Qe=async()=>{if(q.value){i.value.deliveryNote=!0,h.value=null;try{const a=await(await fetch(`/api/admin/shipping/ozon/dn/pdf?ref=${q.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();if(h.value=a,a.success){O(u("admin_debug_pdf_links_retrieved"));const s=a.data.pdf_links;s.bl_pdf&&window.open(s.bl_pdf,"_blank")}else E(a.message||"Erreur lors de la récupération des PDFs")}catch(r){h.value={success:!1,message:"Erreur de connexion: "+r.message},E("Erreur de connexion")}finally{i.value.deliveryNote=!1}}};return ea(async()=>{await Q.fetchCities()}),(r,a)=>(c(),p("div",ua,[e(f,null,{default:l(()=>[e(D,{class:"d-flex align-center gap-2"},{default:l(()=>[e(C,{icon:"tabler-bug"}),t(" "+o(d(u)("admin.debug.ozonExpressTitle")),1)]),_:1}),e(g,null,{default:l(()=>[e(N,{type:"info",variant:"tonal",class:"mb-4"},{default:l(()=>[t(o(d(u)("admin.debug.ozonExpressDescription")),1)]),_:1}),e(f,{class:"mb-4",variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.testMode")),1)]),_:1}),e(g,null,{default:l(()=>[n("div",ia,[e(ta,{modelValue:_.value.useReal,"onUpdate:modelValue":a[0]||(a[0]=s=>_.value.useReal=s),loading:i.value.toggle,color:"success",onChange:he},{label:l(()=>[n("div",da,[e(C,{icon:_.value.useReal?"tabler-rocket":"tabler-flask",color:_.value.useReal?"success":"warning"},null,8,["icon","color"]),n("span",ca,o(_.value.useReal?d(u)("admin.debug.realApiMode"):d(u)("admin.debug.mockTestMode")),1)])]),_:1},8,["modelValue","loading"]),e(j,{color:_.value.useReal?"success":"warning",variant:"tonal",size:"small"},{default:l(()=>[t(o(_.value.useReal?"PRODUCTION":"TEST"),1)]),_:1},8,["color"])]),e(N,{type:_.value.useReal?"success":"warning",variant:"tonal",density:"compact",class:"mt-3"},{prepend:l(()=>[e(C,{icon:_.value.useReal?"tabler-check":"tabler-alert-triangle"},null,8,["icon"])]),default:l(()=>[_.value.useReal?(c(),p("span",va,[a[20]||(a[20]=t(" 🚀 ")),n("strong",null,o(d(u)("admin.debug.productionMode"))+":",1),t(" "+o(d(u)("admin.debug.productionModeDesc")),1)])):(c(),p("span",ma,[a[21]||(a[21]=t(" 🧪 ")),n("strong",null,o(d(u)("admin.debug.testMode"))+":",1),t(" "+o(d(u)("admin.debug.testModeDesc")),1)]))]),_:1},8,["type"])]),_:1})]),_:1}),e(f,{class:"mb-4",variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.systemStatus")),1)]),_:1}),e(g,null,{default:l(()=>[e(V,{color:"primary",onClick:ze,loading:i.value.systemStatus},{default:l(()=>[t(o(d(u)("admin.debug.checkStatus")),1)]),_:1},8,["loading"]),P.value?(c(),p("div",_a,[e(G,null,{default:l(()=>[e(y,{cols:"12",md:"6"},{default:l(()=>[e(f,{variant:"tonal",color:"primary"},{default:l(()=>[e(g,null,{default:l(()=>[a[26]||(a[26]=n("div",{class:"text-h6"},"OzonExpress",-1)),n("div",pa,[n("div",null,[a[22]||(a[22]=t("Statut: ")),e(j,{color:P.value.ozonexpress.enabled?"success":"warning",size:"small"},{default:l(()=>[t(o(P.value.ozonexpress.enabled?"API RÉELLE ACTIVÉE":"Mode Mock"),1)]),_:1},8,["color"])]),n("div",null,"URL: "+o(P.value.ozonexpress.base_url),1),n("div",null,"Customer ID: "+o(P.value.ozonexpress.customer_id||"Non configuré"),1),n("div",null,[a[23]||(a[23]=t("API Key: ")),e(j,{color:P.value.ozonexpress.api_key_set?"success":"error",size:"small"},{default:l(()=>[t(o(P.value.ozonexpress.api_key_set?"Configuré":"Manquant"),1)]),_:1},8,["color"])]),n("div",fa,[e(N,{type:P.value.test_mode==="real"?"success":"warning",variant:"tonal",density:"compact"},{prepend:l(()=>[e(C,{icon:P.value.test_mode==="real"?"tabler-rocket":"tabler-flask"},null,8,["icon"])]),default:l(()=>[P.value.test_mode==="real"?(c(),p("span",ga,a[24]||(a[24]=[t(" 🚀 "),n("strong",null,"Mode API Réelle:",-1),t(" Connexion directe à l'API OzonExpress ")]))):(c(),p("span",ya,a[25]||(a[25]=[t(" 🧪 "),n("strong",null,"Mode Test Mock:",-1),t(" Données simulées pour les tests ")])))]),_:1},8,["type"])])])]),_:1,__:[26]})]),_:1})]),_:1}),e(y,{cols:"12",md:"6"},{default:l(()=>[e(f,{variant:"tonal",color:"info"},{default:l(()=>[e(g,null,{default:l(()=>[a[27]||(a[27]=n("div",{class:"text-h6"},"Commandes",-1)),n("div",ba,[n("div",null,"En attente: "+o(P.value.orders.en_attente),1),n("div",null,"Confirmées: "+o(P.value.orders.confirmee),1),n("div",null,"Avec expédition: "+o(P.value.orders.with_shipping),1),n("div",null,"Sans expédition: "+o(P.value.orders.without_shipping),1)])]),_:1,__:[27]})]),_:1})]),_:1})]),_:1})])):m("",!0)]),_:1})]),_:1}),e(f,{class:"mb-4",variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.platformSync")),1)]),_:1}),e(g,null,{default:l(()=>{var s;return[n("div",ka,[e(V,{color:"success",onClick:Oe,loading:i.value.sync,disabled:!_.value.useReal},{default:l(()=>[e(C,{start:"",icon:"tabler-refresh"}),a[28]||(a[28]=t(" Synchroniser depuis OzonExpress "))]),_:1,__:[28]},8,["loading","disabled"]),e(V,{color:"info",variant:"outlined",onClick:Me,loading:i.value.platformParcels,disabled:!_.value.useReal},{default:l(()=>[e(C,{start:"",icon:"tabler-cloud-download"}),t(" "+o(d(u)("actions.viewPlatformPackage")),1)]),_:1},8,["loading","disabled"])]),_.value.useReal?m("",!0):(c(),I(N,{key:0,type:"warning",variant:"tonal",density:"compact"},{default:l(()=>[e(C,{start:"",icon:"tabler-alert-triangle"}),a[29]||(a[29]=t(" La synchronisation n'est disponible qu'en mode API réelle "))]),_:1,__:[29]})),F.value?(c(),p("div",xa,[e(N,{type:F.value.success?"success":"error",variant:"tonal"},{default:l(()=>[t(o(F.value.message),1)]),_:1},8,["type"]),F.value.success&&F.value.data?(c(),p("div",Va,[e(G,null,{default:l(()=>[e(y,{cols:"12",md:"4"},{default:l(()=>[e(f,{variant:"tonal",color:"success"},{default:l(()=>[e(g,{class:"text-center"},{default:l(()=>[n("div",Ca,o(F.value.data.synced_new),1),a[30]||(a[30]=n("div",{class:"text-caption"},"Nouveaux Colis",-1))]),_:1,__:[30]})]),_:1})]),_:1}),e(y,{cols:"12",md:"4"},{default:l(()=>[e(f,{variant:"tonal",color:"info"},{default:l(()=>[e(g,{class:"text-center"},{default:l(()=>[n("div",wa,o(F.value.data.updated_existing),1),a[31]||(a[31]=n("div",{class:"text-caption"},"Colis Mis à Jour",-1))]),_:1,__:[31]})]),_:1})]),_:1}),e(y,{cols:"12",md:"4"},{default:l(()=>[e(f,{variant:"tonal",color:"primary"},{default:l(()=>[e(g,{class:"text-center"},{default:l(()=>[n("div",Ta,o(F.value.data.total_platform_parcels),1),a[32]||(a[32]=n("div",{class:"text-caption"},"Total Plateforme",-1))]),_:1,__:[32]})]),_:1})]),_:1})]),_:1})])):m("",!0)])):m("",!0),Y.value?(c(),p("div",Ea,[e(N,{type:"info",variant:"tonal",density:"compact"},{default:l(()=>[t(" 📦 Colis trouvés sur la plateforme OzonExpress: "+o(Y.value.total_platform_parcels),1)]),_:1}),(s=Y.value.platform_parcels)!=null&&s.length?(c(),I(xe,{key:0,headers:Re,items:Y.value.platform_parcels,"items-per-page":10,class:"elevation-1 mt-2"},{"item.status":l(({item:v})=>[e(j,{size:"small",color:me(v.status)},{default:l(()=>[t(o(_e(v.status)),1)]),_:2},1032,["color"])]),"item.created_at":l(({item:v})=>[t(o(pe(v.created_at)),1)]),_:1},8,["items"])):m("",!0)])):m("",!0)]}),_:1})]),_:1}),e(f,{class:"mb-4",variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.realParcelsAnalytics")),1)]),_:1}),e(g,null,{default:l(()=>[e(V,{color:"primary",onClick:De,loading:i.value.analytics},{default:l(()=>a[33]||(a[33]=[t(" Analyser les Colis Réels ")])),_:1,__:[33]},8,["loading"]),R.value?(c(),p("div",Sa,[e(G,null,{default:l(()=>[e(y,{cols:"12",md:"3"},{default:l(()=>[e(f,{variant:"tonal",color:"success"},{default:l(()=>[e(g,{class:"text-center"},{default:l(()=>[n("div",Pa,o(R.value.real_count),1),a[34]||(a[34]=n("div",{class:"text-body-2"},"Colis Réels",-1))]),_:1,__:[34]})]),_:1})]),_:1}),e(y,{cols:"12",md:"3"},{default:l(()=>[e(f,{variant:"tonal",color:"warning"},{default:l(()=>[e(g,{class:"text-center"},{default:l(()=>[n("div",Ra,o(R.value.mock_count),1),a[35]||(a[35]=n("div",{class:"text-body-2"},"Colis Mock",-1))]),_:1,__:[35]})]),_:1})]),_:1}),e(y,{cols:"12",md:"3"},{default:l(()=>[e(f,{variant:"tonal",color:"info"},{default:l(()=>[e(g,{class:"text-center"},{default:l(()=>[n("div",ha,o(R.value.today_count),1),a[36]||(a[36]=n("div",{class:"text-body-2"},"Aujourd'hui",-1))]),_:1,__:[36]})]),_:1})]),_:1}),e(y,{cols:"12",md:"3"},{default:l(()=>[e(f,{variant:"tonal",color:"primary"},{default:l(()=>[e(g,{class:"text-center"},{default:l(()=>[n("div",za,o(R.value.total_count),1),n("div",Da,o(d(u)("admin_total")),1)]),_:1})]),_:1})]),_:1})]),_:1}),R.value.real_count>0?(c(),I(N,{key:0,type:"success",variant:"tonal",class:"mt-4"},{default:l(()=>[t(" 🎉 Excellent! Vous avez "+o(R.value.real_count)+" colis réels créés via l'API OzonExpress ",1)]),_:1})):m("",!0)])):m("",!0)]),_:1})]),_:1}),e(f,{class:"mb-4",variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.recentRealParcels")),1)]),_:1}),e(g,null,{default:l(()=>[n("div",Na,[e(V,{color:"success",onClick:Ne,loading:i.value.parcels},{default:l(()=>a[37]||(a[37]=[t(" Charger Colis Réels ")])),_:1,__:[37]},8,["loading"]),e(V,{color:"info",variant:"outlined",onClick:J,loading:i.value.parcels},{default:l(()=>a[38]||(a[38]=[t(" Tous les Colis ")])),_:1,__:[38]},8,["loading"])]),w.value?(c(),p("div",Oa,[n("div",Ma,[n("div",Aa,[w.value.filtered_type==="real_only"?(c(),p("span",Ia," Colis Réels: "+o(w.value.recent_parcels.length),1)):(c(),p("span",La," Total des colis: "+o(w.value.total_parcels),1))]),e(j,{color:w.value.filtered_type==="real_only"?"success":"info",size:"small"},{default:l(()=>[t(o(w.value.filtered_type==="real_only"?"Colis Réels Uniquement":"Tous les Colis"),1)]),_:1},8,["color"])]),e(xe,{headers:Pe,items:w.value.recent_parcels,"items-per-page":10,class:"elevation-1"},{"item.tracking_number":l(({item:s})=>{var v;return[n("div",Ua,[n("span",$a,o(s.tracking_number),1),(v=s.meta)!=null&&v.mock_data?(c(),I(j,{key:0,color:"warning",size:"x-small"},{default:l(()=>a[39]||(a[39]=[t(" MOCK ")])),_:1,__:[39]})):(c(),I(j,{key:1,color:"success",size:"x-small"},{default:l(()=>a[40]||(a[40]=[t(" RÉEL ")])),_:1,__:[40]}))])]}),"item.status":l(({item:s})=>[e(j,{size:"small",color:me(s.status)},{default:l(()=>[t(o(_e(s.status)),1)]),_:2},1032,["color"])]),"item.created_at":l(({item:s})=>[t(o(pe(s.created_at)),1)]),"item.meta":l(({item:s})=>[e(V,{size:"small",variant:"text",onClick:v=>qe(s)},{default:l(()=>[t(o(d(u)("actions.viewDetails")),1)]),_:2},1032,["onClick"])]),_:1},8,["items"])])):m("",!0)]),_:1})]),_:1}),e(f,{variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.quickActions")),1)]),_:1}),e(g,null,{default:l(()=>{var s,v,z;return[n("div",ja,[e(V,{color:"success",onClick:Ie,loading:i.value.toggle},{default:l(()=>a[41]||(a[41]=[t(" Activer OzonExpress ")])),_:1,__:[41]},8,["loading"]),e(V,{color:"warning",onClick:Le,loading:i.value.toggle},{default:l(()=>a[42]||(a[42]=[t(" Désactiver (Mode Mock) ")])),_:1,__:[42]},8,["loading"]),e(V,{color:"primary",onClick:Ae,loading:i.value.bulkTest},{default:l(()=>a[43]||(a[43]=[t(" Test Opérations en Lot ")])),_:1,__:[43]},8,["loading"]),e(V,{color:"success",onClick:Ue,loading:i.value.createTest,disabled:!_.value.useReal},{default:l(()=>[e(C,{start:"",icon:"tabler-package-export"}),a[44]||(a[44]=t(" Test Send Colis "))]),_:1,__:[44]},8,["loading","disabled"]),e(V,{color:"info",onClick:a[1]||(a[1]=x=>re.value=!0),disabled:!_.value.useReal},{default:l(()=>[e(C,{start:"",icon:"tabler-search"}),a[45]||(a[45]=t(" Suivre Colis "))]),_:1,__:[45]},8,["disabled"]),(s=T.value)!=null&&s.success&&((z=(v=T.value)==null?void 0:v.data)!=null&&z.tracking_number)?(c(),I(V,{key:0,color:"secondary",onClick:je,loading:i.value.trackTest},{default:l(()=>[e(C,{start:"",icon:"tabler-eye"}),a[46]||(a[46]=t(" Suivre Dernier Colis Créé "))]),_:1,__:[46]},8,["loading"])):m("",!0)]),_.value.useReal?m("",!0):(c(),I(N,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>[e(C,{start:"",icon:"tabler-alert-triangle"}),a[47]||(a[47]=t(" Les tests de création et suivi ne sont disponibles qu'en mode API réelle "))]),_:1,__:[47]})),M.value?(c(),p("div",qa,[e(N,{type:M.value.success?"success":"error",variant:"tonal"},{default:l(()=>[t(o(M.value.message),1)]),_:1},8,["type"]),M.value.summary?(c(),p("div",Ba,[n("div",Fa," Total: "+o(M.value.summary.total)+" | Succès: "+o(M.value.summary.success)+" | Erreurs: "+o(M.value.summary.errors),1)])):m("",!0)])):m("",!0),T.value?(c(),p("div",Ja,[e(N,{type:T.value.success?"success":"error",variant:"tonal"},{default:l(()=>[t(o(T.value.message),1)]),_:1},8,["type"]),T.value.success&&T.value.data?(c(),p("div",Ha,[e(f,{variant:"tonal",color:"success"},{default:l(()=>[e(D,{class:"text-h6"},{default:l(()=>a[48]||(a[48]=[t("Colis Créé avec Succès")])),_:1,__:[48]}),e(g,null,{default:l(()=>{var x,A,H;return[n("div",Wa,[n("div",null,[a[49]||(a[49]=n("strong",null,"Numéro de Suivi:",-1)),t(" "+o(T.value.data.tracking_number),1)]),n("div",null,[a[50]||(a[50]=n("strong",null,"ID Local:",-1)),t(" "+o(T.value.data.local_parcel_id),1)]),n("div",null,[a[51]||(a[51]=n("strong",null,"Client Test:",-1)),t(" "+o((x=T.value.data.test_data)==null?void 0:x.client_name),1)]),n("div",null,[a[52]||(a[52]=n("strong",null,"Ville:",-1)),t(" "+o((A=T.value.data.test_data)==null?void 0:A.city),1)]),n("div",null,[a[53]||(a[53]=n("strong",null,"Prix:",-1)),t(" "+o((H=T.value.data.test_data)==null?void 0:H.price)+" DH",1)])]),e(Ve,{class:"mt-3"},{default:l(()=>[e(de,null,{default:l(()=>[e(ce,null,{default:l(()=>a[54]||(a[54]=[t("Réponse Plateforme")])),_:1,__:[54]}),e(ve,null,{default:l(()=>[n("pre",Ka,o(JSON.stringify(T.value.data.platform_response,null,2)),1)]),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})])):m("",!0)])):m("",!0),k.value?(c(),p("div",Ga,[e(N,{type:k.value.success?"success":"error",variant:"tonal"},{default:l(()=>[t(o(k.value.message),1)]),_:1},8,["type"]),k.value.success&&k.value.data?(c(),p("div",Qa,[e(f,{variant:"tonal",color:"info"},{default:l(()=>[e(D,{class:"text-h6"},{default:l(()=>a[55]||(a[55]=[t("Informations de Suivi")])),_:1,__:[55]}),e(g,null,{default:l(()=>{var x,A,H,W;return[n("div",Xa,[n("div",null,[a[56]||(a[56]=n("strong",null,"Numéro de Suivi:",-1)),t(" "+o(k.value.data.tracking_number),1)]),n("div",null,[a[57]||(a[57]=n("strong",null,"Existe Localement:",-1)),e(j,{color:(x=k.value.data.comparison)!=null&&x.exists_locally?"success":"error",size:"small"},{default:l(()=>{var $;return[t(o(($=k.value.data.comparison)!=null&&$.exists_locally?"Oui":"Non"),1)]}),_:1},8,["color"])]),n("div",null,[a[58]||(a[58]=n("strong",null,"Existe sur Plateforme:",-1)),e(j,{color:(A=k.value.data.comparison)!=null&&A.exists_on_platform?"success":"error",size:"small"},{default:l(()=>{var $;return[t(o(($=k.value.data.comparison)!=null&&$.exists_on_platform?"Oui":"Non"),1)]}),_:1},8,["color"])]),((H=k.value.data.comparison)==null?void 0:H.status_match)!==null?(c(),p("div",Ya,[a[59]||(a[59]=n("strong",null,"Statuts Correspondent:",-1)),e(j,{color:(W=k.value.data.comparison)!=null&&W.status_match?"success":"warning",size:"small"},{default:l(()=>{var $;return[t(o(($=k.value.data.comparison)!=null&&$.status_match?"Oui":"Non"),1)]}),_:1},8,["color"])])):m("",!0)]),e(Ve,null,{default:l(()=>{var $,ie;return[k.value.data.local_parcel?(c(),I(de,{key:0},{default:l(()=>[e(ce,null,{default:l(()=>a[60]||(a[60]=[t("Données Locales")])),_:1,__:[60]}),e(ve,null,{default:l(()=>[n("pre",Za,o(JSON.stringify(k.value.data.local_parcel,null,2)),1)]),_:1})]),_:1})):m("",!0),($=k.value.data.platform_parcel_info)!=null&&$.success?(c(),I(de,{key:1},{default:l(()=>[e(ce,null,{default:l(()=>a[61]||(a[61]=[t("Données Plateforme")])),_:1,__:[61]}),e(ve,null,{default:l(()=>[n("pre",el,o(JSON.stringify(k.value.data.platform_parcel_info.data,null,2)),1)]),_:1})]),_:1})):m("",!0),(ie=k.value.data.platform_tracking_info)!=null&&ie.success?(c(),I(de,{key:2},{default:l(()=>[e(ce,null,{default:l(()=>a[62]||(a[62]=[t("Historique de Suivi")])),_:1,__:[62]}),e(ve,null,{default:l(()=>[n("pre",al,o(JSON.stringify(k.value.data.platform_tracking_info.data,null,2)),1)]),_:1})]),_:1})):m("",!0)]}),_:1})]}),_:1})]),_:1})])):m("",!0)])):m("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}),e(f,{class:"mt-6"},{default:l(()=>[e(D,{class:"d-flex align-center gap-2"},{default:l(()=>[e(C,{icon:"tabler-api"}),t(" "+o(d(u)("admin.debug.advancedApiDebug")),1)]),_:1}),e(g,null,{default:l(()=>[e(G,null,{default:l(()=>[e(y,{cols:"12",lg:"6"},{default:l(()=>[e(f,{variant:"outlined"},{default:l(()=>[e(D,{class:"d-flex align-center gap-2"},{default:l(()=>[e(C,{icon:"tabler-package-export"}),t(" "+o(d(u)("admin.debug.sendParcel")),1)]),_:1}),e(g,null,{default:l(()=>[e(sa,{modelValue:ue.value,"onUpdate:modelValue":a[2]||(a[2]=s=>ue.value=s),class:"mb-4"},{default:l(()=>[e(Ce,{value:"manual"},{default:l(()=>[t(o(d(u)("admin.debug.manualEntry")),1)]),_:1}),e(Ce,{value:"order"},{default:l(()=>[t(o(d(u)("admin.debug.fromOrder")),1)]),_:1})]),_:1},8,["modelValue"]),e(ra,{modelValue:ue.value,"onUpdate:modelValue":a[11]||(a[11]=s=>ue.value=s)},{default:l(()=>[e(we,{value:"manual"},{default:l(()=>[e(ye,{onSubmit:fe(Be,["prevent"])},{default:l(()=>[e(G,null,{default:l(()=>[e(y,{cols:"12",md:"6"},{default:l(()=>[e(ee,{modelValue:S.value.receiver,"onUpdate:modelValue":a[3]||(a[3]=s=>S.value.receiver=s),label:d(u)("admin.debug.recipient"),required:""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12",md:"6"},{default:l(()=>[e(ee,{modelValue:S.value.phone,"onUpdate:modelValue":a[4]||(a[4]=s=>S.value.phone=s),label:d(u)("admin.debug.phone"),required:""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12",md:"6"},{default:l(()=>[e(Te,{modelValue:S.value.city,"onUpdate:modelValue":a[5]||(a[5]=s=>S.value.city=s),items:d(Q).cities,"item-title":"name","item-value":"city_id",label:d(u)("admin.debug.city"),placeholder:d(u)("admin_debug_city_placeholder"),required:"",loading:d(Q).loading},null,8,["modelValue","items","label","placeholder","loading"])]),_:1}),e(y,{cols:"12",md:"6"},{default:l(()=>[e(ee,{modelValue:S.value.price,"onUpdate:modelValue":a[6]||(a[6]=s=>S.value.price=s),label:d(u)("admin.debug.price"),type:"number",step:"0.01",required:""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(oa,{modelValue:S.value.address,"onUpdate:modelValue":a[7]||(a[7]=s=>S.value.address=s),label:d(u)("admin.debug.address"),required:""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12",md:"6"},{default:l(()=>[e(ee,{modelValue:S.value.nature,"onUpdate:modelValue":a[8]||(a[8]=s=>S.value.nature=s),label:d(u)("admin.debug.parcelNature"),required:""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12",md:"6"},{default:l(()=>[e(Te,{modelValue:S.value.stock,"onUpdate:modelValue":a[9]||(a[9]=s=>S.value.stock=s),items:[{title:"Ramassage",value:0},{title:"Stock",value:1}],label:d(u)("admin.debug.parcelType"),required:""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(V,{type:"submit",color:"primary",loading:d(L).loading.sendParcel,disabled:!_.value.useReal,block:""},{default:l(()=>[e(C,{start:"",icon:"tabler-send"}),a[63]||(a[63]=t(" Envoyer Colis "))]),_:1,__:[63]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(we,{value:"order"},{default:l(()=>[e(ye,{onSubmit:fe(Fe,["prevent"])},{default:l(()=>[e(G,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(ee,{modelValue:te.value,"onUpdate:modelValue":a[10]||(a[10]=s=>te.value=s),label:"ID de la commande",placeholder:d(u)("admin_debug_order_id_placeholder"),required:""},null,8,["modelValue","placeholder"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(V,{type:"submit",color:"primary",loading:d(L).loading.sendParcel,disabled:!te.value||!_.value.useReal,block:""},{default:l(()=>[e(C,{start:"",icon:"tabler-send"}),a[64]||(a[64]=t(" Envoyer Colis "))]),_:1,__:[64]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),U.value?(c(),I(N,{key:0,type:U.value.success?"success":"error",variant:"tonal",class:"mt-4"},{default:l(()=>[n("div",ll,[n("span",null,o(U.value.message),1),U.value.success&&U.value.tracking_number?(c(),I(V,{key:0,size:"small",variant:"text",onClick:a[12]||(a[12]=s=>He(U.value.tracking_number))},{default:l(()=>[e(C,{icon:"tabler-copy"}),a[65]||(a[65]=t(" Copier "))]),_:1,__:[65]})):m("",!0)]),U.value.success&&U.value.tracking_number?(c(),p("div",tl,[e(j,{size:"small",color:"primary",variant:"tonal",class:"font-mono"},{default:l(()=>[t(o(U.value.tracking_number),1)]),_:1})])):m("",!0)]),_:1},8,["type"])):m("",!0)]),_:1})]),_:1})]),_:1}),e(y,{cols:"12",lg:"6"},{default:l(()=>[e(f,{variant:"outlined"},{default:l(()=>[e(D,{class:"d-flex align-center gap-2"},{default:l(()=>[e(C,{icon:"tabler-search"}),t(" "+o(d(u)("admin.debug.trackParcel")),1)]),_:1}),e(g,null,{default:l(()=>{var s;return[e(ye,{onSubmit:fe(Je,["prevent"])},{default:l(()=>[e(G,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(ee,{modelValue:oe.value,"onUpdate:modelValue":a[13]||(a[13]=v=>oe.value=v),label:d(u)("admin.debug.trackingNumber"),placeholder:d(u)("admin_debug_tracking_placeholder"),required:""},null,8,["modelValue","label","placeholder"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(V,{type:"submit",color:"info",loading:d(L).loading.track,disabled:!oe.value||!_.value.useReal,block:""},{default:l(()=>[e(C,{start:"",icon:"tabler-search"}),a[66]||(a[66]=t(" Suivre Maintenant "))]),_:1,__:[66]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),B.value?(c(),I(N,{key:0,type:B.value.success?"success":"error",variant:"tonal",class:"mt-4"},{default:l(()=>[t(o(B.value.message),1)]),_:1},8,["type"])):m("",!0),(s=B.value)!=null&&s.success&&B.value.data?(c(),p("div",sl,[e(f,{variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.parcelDetails")),1)]),_:1}),e(g,null,{default:l(()=>[e(G,null,{default:l(()=>{var v;return[e(y,{cols:"12",md:"6"},{default:l(()=>{var z;return[n("div",rl,o(d(u)("admin_status")),1),e(j,{size:"small",color:me((z=B.value.data.parcel)==null?void 0:z.status),variant:"tonal"},{default:l(()=>{var x;return[t(o(_e((x=B.value.data.parcel)==null?void 0:x.status)),1)]}),_:1},8,["color"])]}),_:1}),e(y,{cols:"12",md:"6"},{default:l(()=>{var z;return[a[67]||(a[67]=n("div",{class:"text-caption text-medium-emphasis"},"Dernière mise à jour",-1)),n("div",ol,o(pe((z=B.value.data.parcel)==null?void 0:z.last_status_at)),1)]}),_:1,__:[67]}),(v=B.value.data.parcel)!=null&&v.last_status_text?(c(),I(y,{key:0,cols:"12"},{default:l(()=>[a[68]||(a[68]=n("div",{class:"text-caption text-medium-emphasis"},"Dernier statut",-1)),n("div",nl,o(B.value.data.parcel.last_status_text),1)]),_:1,__:[68]})):m("",!0)]}),_:1})]),_:1})]),_:1})])):m("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{class:"mt-6"},{default:l(()=>[e(D,{class:"d-flex align-center gap-2"},{default:l(()=>[e(C,{icon:"tabler-file-plus"}),t(" "+o(d(u)("admin.debug.deliveryNoteTest")),1)]),_:1}),e(g,null,{default:l(()=>[e(N,{type:"info",variant:"tonal",class:"mb-4"},{default:l(()=>[e(ge,null,{default:l(()=>a[69]||(a[69]=[t("Test du Workflow Bon de Livraison")])),_:1,__:[69]}),a[70]||(a[70]=t(" Testez le processus complet : Créer → Ajouter Colis → Sauvegarder → PDFs "))]),_:1,__:[70]}),n("div",ul,[e(V,{color:"primary",variant:"outlined",onClick:We,loading:i.value.deliveryNote},{default:l(()=>[e(C,{start:"",icon:"tabler-plus"}),a[71]||(a[71]=t(" 1. Créer BL "))]),_:1,__:[71]},8,["loading"]),e(V,{color:"info",variant:"outlined",disabled:!q.value,onClick:Ke,loading:i.value.deliveryNote},{default:l(()=>[e(C,{start:"",icon:"tabler-package-import"}),a[72]||(a[72]=t(" 2. Ajouter Colis "))]),_:1,__:[72]},8,["disabled","loading"]),e(V,{color:"success",variant:"outlined",disabled:!q.value,onClick:Ge,loading:i.value.deliveryNote},{default:l(()=>[e(C,{start:"",icon:"tabler-device-floppy"}),a[73]||(a[73]=t(" 3. Sauvegarder "))]),_:1,__:[73]},8,["disabled","loading"]),e(V,{color:"secondary",variant:"outlined",disabled:!q.value,onClick:Qe,loading:i.value.deliveryNote},{default:l(()=>[e(C,{start:"",icon:"tabler-file-download"}),a[74]||(a[74]=t(" 4. Obtenir PDFs "))]),_:1,__:[74]},8,["disabled","loading"])]),q.value?(c(),p("div",il,[e(N,{type:"success",variant:"tonal"},{default:l(()=>[e(ge,null,{default:l(()=>a[75]||(a[75]=[t("Référence BL Active")])),_:1,__:[75]}),t(" "+o(q.value),1)]),_:1})])):m("",!0),h.value?(c(),p("div",dl,[e(N,{type:h.value.success?"success":"error",variant:"tonal"},{default:l(()=>[e(ge,null,{default:l(()=>[t(o(h.value.success?d(u)("admin_debug_success"):d(u)("admin_debug_error")),1)]),_:1}),t(" "+o(h.value.message),1)]),_:1},8,["type"]),h.value.success&&h.value.data?(c(),p("div",cl,[e(f,{variant:"outlined"},{default:l(()=>[e(D,null,{default:l(()=>a[76]||(a[76]=[t("Résultat")])),_:1,__:[76]}),e(g,null,{default:l(()=>[n("pre",vl,o(JSON.stringify(h.value.data,null,2)),1)]),_:1})]),_:1})])):m("",!0)])):m("",!0)]),_:1})]),_:1}),e(Se,{modelValue:se.value.show,"onUpdate:modelValue":a[15]||(a[15]=s=>se.value.show=s),"max-width":"600"},{default:l(()=>[e(f,null,{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.parcelDetails")),1)]),_:1}),e(g,null,{default:l(()=>[n("pre",ml,o(JSON.stringify(se.value.data,null,2)),1)]),_:1}),e(ke,null,{default:l(()=>[e(Ee),e(V,{onClick:a[14]||(a[14]=s=>se.value.show=!1)},{default:l(()=>[t(o(d(u)("actions.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Se,{modelValue:re.value,"onUpdate:modelValue":a[19]||(a[19]=s=>re.value=s),"max-width":"500"},{default:l(()=>[e(f,null,{default:l(()=>[e(D,null,{default:l(()=>[t(o(d(u)("admin.debug.trackParcel")),1)]),_:1}),e(g,null,{default:l(()=>{var s,v,z;return[e(ee,{modelValue:le.value,"onUpdate:modelValue":a[16]||(a[16]=x=>le.value=x),label:d(u)("admin.debug.trackingNumber"),placeholder:d(u)("admin_debug_tracking_example"),variant:"outlined",loading:i.value.trackTest},null,8,["modelValue","label","placeholder","loading"]),(s=T.value)!=null&&s.success&&((z=(v=T.value)==null?void 0:v.data)!=null&&z.tracking_number)?(c(),p("div",_l,[e(V,{size:"small",color:"secondary",variant:"outlined",onClick:a[17]||(a[17]=x=>le.value=T.value.data.tracking_number)},{default:l(()=>[e(C,{start:"",icon:"tabler-copy"}),t(" "+o(d(u)("admin.debug.useLastCreated"))+" ("+o(T.value.data.tracking_number)+") ",1)]),_:1})])):m("",!0)]}),_:1}),e(ke,null,{default:l(()=>[e(Ee),e(V,{color:"grey",variant:"text",onClick:a[18]||(a[18]=s=>re.value=!1)},{default:l(()=>[t(o(d(u)("admin.debug.cancel")),1)]),_:1}),e(V,{color:"primary",onClick:$e,loading:i.value.trackTest,disabled:!le.value.trim()},{default:l(()=>[t(o(d(u)("admin.debug.track")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Yl as default};
