import{u as be,C as Ve,P as Ce}from"./ProductDrawer-LSYe1qwT.js";import{u as de,a as we}from"./VNavigationDrawer-DA7Dgz6f.js";import{u as ke}from"./useApi-C6mAvy3D.js";import{u as me}from"./useNotifications-B3v5F4dH.js";import{V as K,b as Ae,c as De}from"./VCard-QqgF9aMj.js";import{d as pe,aL as ve,r as g,V as _,w as ee,o as fe,h as M,b as d,g as r,e as l,m as w,f as a,v as u,ac as T,c as y,n as i,az as R,F as ie,j as _e,x as qe,t as G,aU as $e,aP as Fe}from"./main-3LuWNv9W.js";import{V as Y}from"./VDivider-D28qXVrs.js";import{V as te}from"./VCardText-Dqaeyxp0.js";import{V as Pe}from"./VForm-BMJZijf-.js";import{V as re,a as P}from"./VRow-aVZbYr4A.js";import{V as Z}from"./VTextField-CsO1UfXI.js";import{V as ze}from"./VAutocomplete-CSx4mMtI.js";import{V as Se}from"./VTextarea-BxOghhaY.js";import{V as Me}from"./VImg-DjZhnPY1.js";import{V as Te}from"./VSpacer-Ckvg-9-2.js";import{V as Ie}from"./VDialog-DuTMUR2U.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Ue}from"./VBreadcrumbs-Cjt6xYOm.js";import{V as je}from"./VChip-D2hyzrT3.js";import{V as ue}from"./VBadge-BMwsUA26.js";import{V as oe}from"./VSelect-V4QjM3w5.js";import{V as Le}from"./VPagination-C9G78dYZ.js";import"./VTooltip-DeQJuQst.js";import"./VOverlay-DHKe6cTP.js";import"./forwardRefs-BZg6tG7B.js";import"./lazy-vcHGEOxt.js";import"./VRadioGroup-DYdfkKR-.js";import"./VCheckboxBtn-BQUGQfLA.js";import"./VField-CzoZXYxi.js";import"./VAlert-cTzgSexk.js";import"./createSimpleFunctional-CbZg_Do-.js";import"./VTable-Dyn4MLHa.js";import"./VAvatar-CH3JpKwD.js";import"./ssrBoot-DPE17Lki.js";/* empty css              */import"./filter-DJ4i-HET.js";import"./VList-DWKF8cD-.js";import"./VMenu-cCaIVuKn.js";import"./dialog-transition-TWAYErkS.js";const Ee={class:"d-flex align-center gap-3"},Be={key:0},Ne={key:0,class:"text-center py-8"},Oe={key:1},Re={class:"mb-6"},Qe={class:"mb-6"},Ge={class:"flex-grow-1"},He={class:"text-subtitle-1 mb-1"},Je={key:0,class:"text-caption text-medium-emphasis mb-2"},We={class:"d-flex align-center gap-4"},Xe={class:"text-body-2"},Ye={class:"text-caption text-success"},Ze={class:"d-flex align-center gap-2"},Ke={class:"px-3"},et={class:"text-right"},tt={class:"text-subtitle-2"},at={key:0,class:"mb-3"},lt={key:0,class:"d-flex justify-space-between mb-1"},st={class:"text-body-2"},ot={key:1,class:"d-flex justify-space-between mb-1"},it={class:"d-flex justify-space-between mb-2"},rt={class:"font-weight-medium"},nt={key:1,class:"d-flex justify-space-between mb-2 text-info"},ct={class:"font-weight-medium"},ut={class:"font-weight-medium"},dt={class:"d-flex justify-space-between text-h6"},mt={class:"font-weight-bold text-primary"},pt={key:1,class:"text-center py-8"},vt={class:"text-body-1 mb-4"},ft={class:"d-flex w-100 gap-3"},_t=pe({__name:"AffiliateCartModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","close","success"],setup(ne,{emit:o}){const x=ne,b=o,{t:ce}=ve(),{showSuccess:L,showError:Q}=me(),m=de(),I=g([]),k=g(!1),V=g("cart"),A=g(!1),z=g(""),q=_(()=>I.value.find(s=>s.city_id===p.value.city_id)),C=_(()=>{var e;if(!((e=q.value)!=null&&e.prices))return 0;const s=q.value.prices,t=s.delivered||s.delivery||s.delivered||s.delivery||0;return console.log("ðŸšš Delivery fee calculation:",{cityName:q.value.name,prices:s,deliveryPrice:t}),Number(t)||0});_(()=>m.subtotal);const $=_(()=>{const s=m.items.every(n=>n.type_command==="exchange"),t=m.items.some(n=>n.type_command==="exchange");if(s){const n=-C.value;return console.log("ðŸ’° Commission calculation (Exchange only):",{type:"exchange_only",deliveryFee:C.value,finalCommission:n}),n}let e=0;m.items.forEach(n=>{if(n.type_command==="exchange")e+=0;else{const O=n.sell_price||n.product.prix_vente,j=n.product.prix_achat,F=n.product.prix_affilie;let S=0;F&&F>0?S=F*n.qty:S=Math.max(0,O-j)*n.qty,e+=S}});const h=e;return console.log("ðŸ’° Commission calculation (Normal/Mixed):",{type:t?"mixed":"normal",items:m.items.map(n=>{const O=n.sell_price||n.product.prix_vente,j=n.product.prix_achat,F=n.product.prix_affilie;let S=0;return n.type_command!=="exchange"&&(F&&F>0?S=F*n.qty:S=Math.max(0,O-j)*n.qty),{title:n.product.titre,type:n.type_command,qty:n.qty,sellPrice:O,costPrice:j,fixedCommission:F,itemCommission:S}}),totalProductCommission:e,deliveryFee:C.value,finalCommission:h,note:"Delivery fee deduction happens during actual commission generation, not in estimation"}),h}),E=_(()=>{let s=0,t=0;m.items.forEach(h=>{const n=(h.sell_price||h.product.prix_vente)*h.qty;h.type_command==="exchange"?s+=0:t+=n});const e=t+C.value;return console.log("ðŸ’° Final total calculation:",{exchangeTotal:s,orderSampleTotal:t,deliveryFee:C.value,clientPayableTotal:e}),e}),p=g({nom_complet:"",telephone:"",city_id:"",adresse:"",note:""}),U={nom_complet:[s=>!!s||"Le nom complet est requis",s=>s.length>=3||"Le nom doit contenir au moins 3 caractÃ¨res"],telephone:[s=>!!s||"Le tÃ©lÃ©phone est requis",s=>/^[0-9+\-\s()]+$/.test(s)||"Format de tÃ©lÃ©phone invalide"],city_id:[s=>!!s||"La ville est requise"],adresse:[s=>!!s||"L'adresse est requise",s=>s.length>=10||"L'adresse doit contenir au moins 10 caractÃ¨res"]},B=_({get:()=>x.modelValue,set:s=>b("update:modelValue",s)}),H=_(()=>m.hasItems&&p.value.nom_complet.length>=3&&p.value.telephone.length>0&&p.value.city_id.length>0&&p.value.adresse.length>=10&&!A.value);_(()=>I.value);const ae=()=>{B.value=!1,b("close")},D=async(s,t)=>{try{t<=0?await m.removeItem(s):await m.updateItem(s,{qty:t})}catch(e){console.error("Update quantity error:",e)}},J=async s=>{try{await m.removeItem(s)}catch(t){console.error("Remove item error:",t)}},N=async()=>{await m.clear()},W=async()=>{if(H.value){A.value=!0;try{const s=await m.checkout(p.value,C.value,$.value);s.success&&(z.value=s.data.commande.id,V.value="success",L(`Commande crÃ©Ã©e avec succÃ¨s! RÃ©fÃ©rence: ${s.data.commande.id}`),b("success"))}catch(s){console.error("Checkout error:",s),Q("Erreur lors de la crÃ©ation de la commande. Veuillez rÃ©essayer plus tard.")}finally{A.value=!1}}},le=()=>{p.value={nom_complet:"",telephone:"",city_id:"",adresse:"",note:""},V.value="cart",z.value=""},X=async()=>{if(!(k.value||I.value.length>0)){k.value=!0;try{const s=await m.fetchCities();I.value=s}catch(s){console.error("Failed to load cities:",s)}finally{k.value=!1}}};return ee(B,s=>{s?(m.fetchCart(),X()):le()}),ee(()=>p.value.city_id,s=>{s&&console.log("ðŸ”„ City changed, recalculating totals...",{cityId:s,deliveryFee:C.value,adjustedCommission:$.value})}),fe(()=>{X()}),(s,t)=>(d(),M(Ie,{modelValue:B.value,"onUpdate:modelValue":t[5]||(t[5]=e=>B.value=e),"max-width":"900",persistent:"",scrollable:""},{default:r(()=>[l(K,null,{default:r(()=>[l(Ae,{class:"d-flex align-center justify-space-between"},{default:r(()=>[a("div",Ee,[a("span",null,u(V.value==="cart"?"Mon Panier & Commande":"Commande ConfirmÃ©e"),1)]),l(T,{icon:"tabler-x",variant:"text",size:"small",onClick:ae})]),_:1}),l(Y),l(te,{class:"pa-6"},{default:r(()=>[V.value==="cart"?(d(),y("div",Be,[i(m).hasItems?(d(),y("div",Oe,[a("div",Re,[t[8]||(t[8]=a("h4",{class:"text-h6 mb-4"},"Informations du client final",-1)),l(Pe,null,{default:r(()=>[l(re,null,{default:r(()=>[l(P,{cols:"12",md:"6"},{default:r(()=>[l(Z,{modelValue:p.value.nom_complet,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value.nom_complet=e),label:"Nom complet *",variant:"outlined",density:"compact",rules:U.nom_complet,required:""},null,8,["modelValue","rules"])]),_:1}),l(P,{cols:"12",md:"6"},{default:r(()=>[l(Z,{modelValue:p.value.telephone,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value.telephone=e),label:"TÃ©lÃ©phone *",variant:"outlined",density:"compact",rules:U.telephone,required:""},null,8,["modelValue","rules"])]),_:1}),l(P,{cols:"12",md:"6"},{default:r(()=>[l(ze,{modelValue:p.value.city_id,"onUpdate:modelValue":t[2]||(t[2]=e=>p.value.city_id=e),label:"Ville *",variant:"outlined",density:"compact",items:I.value,"item-title":"name","item-value":"city_id",loading:k.value,rules:U.city_id,required:"",clearable:"","no-data-text":"Aucune ville trouvÃ©e",placeholder:"Tapez pour rechercher une ville...","menu-props":{maxHeight:"300px"},"hide-details":"auto"},null,8,["modelValue","items","loading","rules"])]),_:1}),l(P,{cols:"12",md:"6"},{default:r(()=>[l(Z,{modelValue:p.value.adresse,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value.adresse=e),label:"Adresse *",variant:"outlined",density:"compact",rules:U.adresse,required:""},null,8,["modelValue","rules"])]),_:1}),l(P,{cols:"12"},{default:r(()=>[l(Se,{modelValue:p.value.note,"onUpdate:modelValue":t[4]||(t[4]=e=>p.value.note=e),label:"Note (optionnel)",variant:"outlined",density:"compact",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),l(Y,{class:"my-6"}),a("div",Qe,[t[9]||(t[9]=a("h4",{class:"text-h6 mb-4"},"Articles dans le panier",-1)),(d(!0),y(ie,null,_e(i(m).items,e=>(d(),y("div",{key:e.key,class:"d-flex align-center gap-4 pa-4 border rounded mb-3"},[l(Me,{src:e.product.image||"/images/placeholder.jpg",width:"80",height:"80",cover:"",class:"rounded"},null,8,["src"]),a("div",Ge,[a("h4",He,u(e.product.titre),1),e.variant?(d(),y("div",Je,u(e.variant.attribut_principal)+": "+u(e.variant.valeur),1)):w("",!0),a("div",We,[a("span",Xe,u(e.sell_price||e.product.prix_vente)+" MAD",1),a("span",Ye,"+"+u(((e.item_commission||0)/e.qty).toFixed(2))+" MAD commission",1)])]),a("div",Ze,[l(T,{icon:"tabler-minus",size:"small",variant:"outlined",onClick:h=>D(e.key,e.qty-1)},null,8,["onClick"]),a("span",Ke,u(e.qty),1),l(T,{icon:"tabler-plus",size:"small",variant:"outlined",disabled:e.qty>=e.stock_available,onClick:h=>D(e.key,e.qty+1)},null,8,["disabled","onClick"])]),a("div",et,[a("div",tt,u(e.item_total)+" MAD",1)]),l(T,{icon:"tabler-trash",size:"small",variant:"text",color:"error",onClick:h=>J(e.key)},null,8,["onClick"])]))),128))]),l(K,{variant:"outlined",class:"mb-6"},{default:r(()=>[l(te,null,{default:r(()=>[i(m).items.some(e=>e.type_command==="exchange")?(d(),y("div",at,[t[12]||(t[12]=a("div",{class:"text-caption text-medium-emphasis mb-2"},"DÃ©tail par type de commande:",-1)),i(m).items.some(e=>e.type_command!=="exchange")?(d(),y("div",lt,[t[10]||(t[10]=a("span",{class:"text-body-2"},"Articles normaux:",-1)),a("span",st,u(i(m).items.filter(e=>e.type_command!=="exchange").reduce((e,h)=>e+(h.sell_price||h.product.prix_vente)*h.qty,0).toFixed(2))+" MAD",1)])):w("",!0),i(m).items.some(e=>e.type_command==="exchange")?(d(),y("div",ot,t[11]||(t[11]=[a("span",{class:"text-body-2"},"Articles d'Ã©change:",-1),a("span",{class:"text-body-2 text-warning"},"Gratuit (Ã©change)",-1)]))):w("",!0),l(Y,{class:"my-2"})])):w("",!0),a("div",it,[t[13]||(t[13]=a("span",null,"Sous-total payable:",-1)),a("span",rt,u((E.value-C.value).toFixed(2))+" MAD",1)]),q.value?(d(),y("div",nt,[a("span",null,u(q.value.name)+" (livraison):",1),a("span",ct,"+"+u(C.value.toFixed(2))+" MAD",1)])):w("",!0),a("div",{class:qe(["d-flex justify-space-between mb-2",$.value>=0?"text-success":"text-error"])},[t[14]||(t[14]=a("span",null,"Commission estimÃ©e:",-1)),a("span",ut,u($.value>=0?"+":"")+u($.value.toFixed(2))+" MAD ",1)],2),l(Y,{class:"my-2"}),a("div",dt,[t[15]||(t[15]=a("span",null,"Total Ã  payer par le client:",-1)),a("span",mt,u(E.value.toFixed(2))+" MAD",1)])]),_:1})]),_:1})])):(d(),y("div",Ne,[l(R,{icon:"tabler-shopping-cart-off",size:"64",class:"mb-4",color:"grey"}),t[6]||(t[6]=a("h3",{class:"text-h6 mb-2"},"Votre panier est vide",-1)),t[7]||(t[7]=a("p",{class:"text-body-2 text-medium-emphasis"},"Ajoutez des produits depuis le catalogue",-1))]))])):V.value==="success"?(d(),y("div",pt,[l(R,{icon:"tabler-check-circle",size:"64",class:"mb-4",color:"success"}),t[16]||(t[16]=a("h3",{class:"text-h5 mb-2"},"Commande crÃ©Ã©e avec succÃ¨s!",-1)),a("p",vt,"RÃ©fÃ©rence: "+u(z.value),1),t[17]||(t[17]=a("p",{class:"text-body-2 text-medium-emphasis"}," Votre commande a Ã©tÃ© transmise et sera traitÃ©e par l'Ã©quipe admin. ",-1))])):w("",!0)]),_:1}),V.value!=="success"?(d(),M(De,{key:0,class:"pa-6 pt-0"},{default:r(()=>[a("div",ft,[V.value==="cart"?(d(),y(ie,{key:0},[i(m).hasItems?(d(),M(T,{key:0,variant:"outlined",onClick:N},{default:r(()=>t[18]||(t[18]=[G(" Vider le panier ")])),_:1,__:[18]})):w("",!0),l(Te),l(T,{color:"primary",disabled:!H.value,loading:A.value,onClick:W},{default:r(()=>t[19]||(t[19]=[G(" Valider la commande ")])),_:1,__:[19]},8,["disabled","loading"])],64)):w("",!0)])]),_:1})):w("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),gt=ge(_t,[["__scopeId","data-v-73dc5e6b"]]),yt={class:"affiliate-catalogue"},ht={class:"d-flex align-center justify-space-between mb-6"},xt={class:"text-h4 mb-2"},bt={class:"text-body-1 text-medium-emphasis mb-0"},Vt={class:"d-flex align-center gap-4"},Ct={class:"cart-button-container"},wt={class:"d-flex align-center gap-2"},kt={class:"cart-button-text"},At={class:"filters-section mb-6"},Dt={class:"d-flex align-center justify-space-between mb-3"},qt={class:"d-flex align-center gap-2"},$t={class:"text-subtitle-1 font-weight-medium"},Ft={class:"results-info"},Pt={class:"text-h6 text-primary font-weight-bold"},zt={class:"text-caption text-medium-emphasis"},St={key:0,class:"text-center py-8"},Mt={class:"text-body-1 mt-4"},Tt={key:1,class:"text-center py-12"},It={class:"text-h5 mb-2"},Ut={class:"text-body-1 text-medium-emphasis mb-4"},jt={key:3,class:"d-flex justify-center mt-8"},Lt=pe({__name:"index",setup(ne){const{t:o}=ve(),x=be(),b=de(),{showSuccess:ce,showError:L}=me(),{cartDrawerOpen:Q,openCartDrawer:m,closeCartDrawer:I}=we(),k=g(""),V=g(""),A=g(void 0),z=g(""),q=g(""),C=g("created_at"),$=g("desc"),E=g(null),p=g([]),U=g(!1),B=_(()=>[{title:o("nav_dashboard"),to:{name:"affiliate-dashboard"}},{title:o("catalogue.title"),active:!0}]),H=_(()=>x.isLoading),ae=_(()=>x.items),D=_(()=>x.pagination),J=_(()=>x.hasItems);_(()=>x.selectedProduct),_(()=>x.isDetailLoading);const N=g(!1),W=g(null),le=_(()=>[{value:"created_at:desc",text:o("catalogue.filters.sort_newest")},{value:"created_at:asc",text:o("catalogue.filters.sort_oldest")},{value:"prix_vente:asc",text:o("catalogue.filters.sort_price_asc")},{value:"prix_vente:desc",text:o("catalogue.filters.sort_price_desc")},{value:"prix_affilie:asc",text:o("catalogue.filters.sort_profit_asc")},{value:"prix_affilie:desc",text:o("catalogue.filters.sort_profit_desc")},{value:"titre:asc",text:o("catalogue.filters.sort_name_asc")},{value:"titre:desc",text:o("catalogue.filters.sort_name_desc")}]),X=_(()=>[{value:void 0,text:o("catalogue.filters.all_commissions")},{value:20,text:o("catalogue.filters.profit_over",{amount:"20 MAD"})},{value:50,text:o("catalogue.filters.profit_over",{amount:"50 MAD"})},{value:100,text:o("catalogue.filters.profit_over",{amount:"100 MAD"})},{value:200,text:o("catalogue.filters.profit_over",{amount:"200 MAD"})},{value:500,text:o("catalogue.filters.profit_over",{amount:"500 MAD"})}]),s=_(()=>!!(k.value||V.value||A.value||z.value||q.value)),t=_(()=>{let c=0;return k.value&&c++,V.value&&c++,A.value&&c++,z.value&&c++,q.value&&c++,c}),e=async()=>{const[c,v]=(C.value+":"+$.value).split(":");await x.fetchList({q:k.value||void 0,category_id:V.value||void 0,min_profit:A.value,size:z.value||void 0,color:q.value||void 0,page:D.value.current_page,per_page:D.value.per_page})},h=()=>{E.value&&clearTimeout(E.value),E.value=setTimeout(()=>{x.setPage(1),e()},300)},n=()=>{x.setPage(1),e()},O=c=>{const[v,f]=c.split(":");C.value=v,$.value=f,n()},j=()=>{k.value="",V.value="",A.value=void 0,z.value="",q.value="",C.value="created_at",$.value="desc",x.resetFilters(),e()},F=c=>{x.setPage(c),e()},S=async c=>{try{W.value=c,N.value=!0}catch{N.value=!1,L(o("catalogue.errors.product_loading_error"))}},se=async c=>{try{if(console.log("ðŸ›’ [Catalogue] Adding to cart:",c),!c.produit_id){L(o("catalogue.errors.invalid_product"));return}if(c.qty<1){L(o("catalogue.errors.invalid_quantity"));return}await b.addItem(c),await b.fetchCart(),await x.fetchCartSummary(),ce(o("affiliate_catalogue_added_to_cart")),console.log("âœ… [Catalogue] Item added, cart count:",b.count),setTimeout(()=>{m()},300)}catch(v){console.error("âŒ [Catalogue] Add to cart error:",v)}},ye=c=>{console.log("Variant changed:",c)},he=c=>{console.log("Quantity changed:",c)},xe=async()=>{U.value=!0;try{const{data:c,error:v}=await ke("/affiliate/categories",{method:"GET"});if(v.value)throw v.value;c.value&&c.value.data&&(p.value=c.value.data.filter(f=>f.actif))}catch(c){console.error("Error loading categories:",c),L(o("affiliate.catalogue.errorLoadingCategories"))}finally{U.value=!1}};return ee(k,h),ee([V,A,z,q],n),fe(async()=>{await xe(),await e(),await x.fetchCartSummary(),await b.fetchCart()}),(c,v)=>(d(),y("div",yt,[l(Ue,{items:B.value,class:"pa-0 mb-4"},null,8,["items"]),a("div",ht,[a("div",null,[a("h1",xt,u(i(o)("catalogue.title")),1),a("p",bt,u(i(o)("catalogue.showing_results",{from:D.value.from,to:D.value.to,total:D.value.total})),1)]),a("div",Vt,[a("div",Ct,[i(b).count>0?(d(),M(je,{key:0,color:"success",variant:"elevated",size:"small",class:"cart-summary-chip mb-2"},{default:r(()=>[l(R,{icon:"tabler-check-circle",start:"",size:"16"}),G(" "+u(i(o)("affiliate_catalogue_cart_summary",{count:i(b).count,plural:i(b).count>1?"s":"",total:i(b).subtotal.toFixed(2)})),1)]),_:1})):w("",!0),l(T,{color:"primary",variant:"elevated",size:"large",class:"cart-button",onClick:i(m)},{default:r(()=>[l(ue,{content:i(b).count,"model-value":i(b).count>0,color:"error","offset-x":"-5","offset-y":"-5"},{default:r(()=>[a("div",wt,[l(R,{icon:"tabler-shopping-cart",size:"20"}),a("span",kt,u(i(b).count>0?i(o)("actions.viewCart"):i(o)("cart.title")),1)])]),_:1},8,["content","model-value"])]),_:1},8,["onClick"])])])]),a("div",At,[l(K,{class:"search-card mb-4",elevation:"1"},{default:r(()=>[l(te,{class:"py-3"},{default:r(()=>[l(Z,{modelValue:k.value,"onUpdate:modelValue":v[0]||(v[0]=f=>k.value=f),placeholder:i(o)("catalogue.search_placeholder"),"prepend-inner-icon":"tabler-search",variant:"solo",density:"comfortable","hide-details":"",clearable:"",class:"search-field","bg-color":"transparent"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(K,{class:"filters-card",elevation:"1"},{default:r(()=>[l(te,{class:"py-4"},{default:r(()=>[a("div",Dt,[a("div",qt,[l(R,{icon:"tabler-adjustments-horizontal",size:"20"}),a("span",$t,u(i(o)("affiliate_catalogue_advanced_filters")),1),s.value?(d(),M(ue,{key:0,content:t.value,color:"primary",inline:""},null,8,["content"])):w("",!0)]),s.value?(d(),M(T,{key:0,variant:"text",size:"small",color:"error","prepend-icon":"tabler-refresh",onClick:j},{default:r(()=>[G(u(i(o)("affiliate_catalogue_clear_filters")),1)]),_:1})):w("",!0)]),l(re,{class:"align-center"},{default:r(()=>[l(P,{cols:"12",md:"3",sm:"6"},{default:r(()=>[l(oe,{modelValue:V.value,"onUpdate:modelValue":v[1]||(v[1]=f=>V.value=f),items:[{value:"",title:i(o)("catalogue.all_categories")},...p.value.map(f=>({value:f.id,title:f.nom}))],label:i(o)("affiliate.catalogue.category"),"item-title":"title","item-value":"value",variant:"outlined",density:"compact","hide-details":"","prepend-inner-icon":"tabler-category",class:"filter-select"},null,8,["modelValue","items","label"])]),_:1}),l(P,{cols:"12",md:"3",sm:"6"},{default:r(()=>[l(oe,{modelValue:A.value,"onUpdate:modelValue":v[2]||(v[2]=f=>A.value=f),items:X.value,label:i(o)("affiliate_catalogue_commission_min"),"item-title":"text","item-value":"value",variant:"outlined",density:"compact","hide-details":"","prepend-inner-icon":"tabler-coins",class:"filter-select"},null,8,["modelValue","items","label"])]),_:1}),l(P,{cols:"12",md:"4",sm:"8"},{default:r(()=>[l(oe,{"model-value":C.value+":"+$.value,items:le.value,label:i(o)("affiliate.catalogue.sortBy"),"item-title":"text","item-value":"value",variant:"outlined",density:"compact","hide-details":"","prepend-inner-icon":"tabler-sort-ascending",class:"filter-select","onUpdate:modelValue":O},null,8,["model-value","items","label"])]),_:1}),l(P,{cols:"12",md:"2",sm:"4",class:"text-center"},{default:r(()=>[a("div",Ft,[a("div",Pt,u(D.value.total||0),1),a("div",zt,u(i(o)("affiliate_catalogue_products_count")),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),H.value?(d(),y("div",St,[l($e,{indeterminate:"",color:"primary",size:"64"}),a("p",Mt,u(i(o)("catalogue.loading")),1)])):J.value?(d(),M(re,{key:2,class:"catalogue-grid"},{default:r(()=>[(d(!0),y(ie,null,_e(ae.value,f=>(d(),M(P,{key:f.id,cols:"12",sm:"6",md:"4",lg:"3",class:"catalogue-grid__item"},{default:r(()=>[l(Ve,{product:f,onOpen:S,onAddToCart:se,onVariantChange:ye,onQtyChange:he},null,8,["product"])]),_:2},1024))),128))]),_:1})):(d(),y("div",Tt,[l(R,{icon:"tabler-package-off",size:"64",class:"mb-4 text-disabled"}),a("h3",It,u(i(o)("catalogue.no_products")),1),a("p",Ut,u(i(o)("catalogue.no_products_subtitle")),1),s.value?(d(),M(T,{key:0,color:"primary",variant:"outlined",onClick:j},{default:r(()=>[G(u(i(o)("catalogue.clear_filters")),1)]),_:1})):w("",!0)])),J.value&&D.value.last_page>1?(d(),y("div",jt,[l(Le,{"model-value":D.value.current_page,length:D.value.last_page,"total-visible":7,"onUpdate:modelValue":F},null,8,["model-value","length"])])):w("",!0),l(Ce,{modelValue:N.value,"onUpdate:modelValue":v[3]||(v[3]=f=>N.value=f),"product-id":W.value},null,8,["modelValue","product-id"]),l(gt,{modelValue:i(Q),"onUpdate:modelValue":v[4]||(v[4]=f=>Fe(Q)?Q.value=f:null),onClose:i(I),onSuccess:i(I)},null,8,["modelValue","onClose","onSuccess"])]))}}),ka=ge(Lt,[["__scopeId","data-v-69861101"]]);export{ka as default};
